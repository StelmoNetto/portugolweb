/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e,t){return(t.substring(0,e).match(/\r?\n/g)||"").length+1}function a(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function i(e,t){for(var r=t;r<e.length;r++)r<e.length-1&&(e[r]=e[r+1]);e.pop()}function n(e,t,r){return r||(r={}),r.method="GET",fetch(e,r).then(function(e){if(!e.ok){var t=e.status;return Promise.reject(t)}return e.text()}).then(function(e){if(!e)return Promise.reject("Resposta Vazia");t(e)})}function o(e){if(e&&e.value){var t=e.value.length;e.selectionStart=t,e.selectionEnd=t}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}e.r(t),e.d(t,{GraficosBtnTypeDown:()=>Fi,GraficosBtnTypeUp:()=>Ni,abrirPagina:()=>Ui,android_async_return:()=>Hi,android_loaded:()=>zi,cursorToEnd:()=>Vi,editorCommand:()=>Mi,editorManager:()=>ni,editorType:()=>Pi,executar:()=>vi,executarStepPause:()=>Ai,executarStepStart:()=>ki,exemplo:()=>bi,fonteAumentar:()=>ji,fonteDiminuir:()=>Di,load:()=>Ri,loadFromGitHub:()=>gi,pararExecucao:()=>yi,portugolRun:()=>ii,preventFocus:()=>Li,preventFocusCanvas:()=>wi,preventFocusSaida:()=>Ci,receiveInput:()=>Bi,save:()=>Ii,setAutoCompleterState:()=>Si,setDarkTheme:()=>Ti,setModoTurbo:()=>Ei,toggleHotbar:()=>xi});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TOUCH_DELAY=80,this.events={},this.resetar()},t=[{key:"resetar",value:function(){this.touches=new Array,this.numTouches=0,this.touchDownIssued=!1,this.touchDownDistance=0}},{key:"getTouchByID",value:function(e){for(var t=0;t<this.touches.length;t++)if(this.touches[t].id==e)return this.touches[t];return!1}},{key:"addEventListener",value:function(e,t){this.events[e]=t}},{key:"getFingerDistance",value:function(){if(2==this.touches.length){var e=this.touches[0],t=this.touches[1];return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}return 1}},{key:"touchstart",value:function(e){0==this.touches.length&&(this.touchDownIssued=!1,this.numTouches=0,this.touchDownDistance=0,this.touchDownPosition=!1);for(var t=0;t<e.touches.length;t++){var r=e.touches[t],a=this.getTouchByID(r.identifier);a?(a.x=r.pageX,a.y=r.pageY):this.touches.push({id:r.identifier,x:r.pageX,y:r.pageY})}this.touchDownIssued||(this.numTouches=Math.max(this.numTouches,this.touches.length));var i=this,n=this.numTouches;setTimeout(function(){i.touchDownIssued||i.numTouches!=n||(i.events.onTouchDown&&i.events.onTouchDown(i.getCenterTouchPos(),i.numTouches),i.touchDownIssued=!0)},this.TOUCH_DELAY)}},{key:"touchmove",value:function(e){for(var t=0;t<e.changedTouches.length;t++){var r=e.changedTouches[t],a=this.getTouchByID(r.identifier);a.x=r.pageX,a.y=r.pageY}var i=this.getCenterTouchPos();if(this.touchDownIssued){if(2==this.touches.length&&this.touchDownDistance>50){var n=this.getFingerDistance()/this.touchDownDistance;n&&this.events.onTouchZoom&&this.events.onTouchZoom(i,n),this.touchDownDistance=this.getFingerDistance()}this.numTouches<=this.touches.length&&this.events.onTouchMove&&this.events.onTouchMove(i,this.numTouches)}else this.events.onTouchDown&&this.events.onTouchDown(i,this.numTouches),this.touchDownIssued=!0,this.touchDownDistance=this.getFingerDistance()}},{key:"touchend",value:function(e){for(var t=this.getCenterTouchPos(),r=0;r<e.changedTouches.length;r++){var a=e.changedTouches[r],n=this.getTouchByID(a.identifier);i(this.touches,this.touches.indexOf(n))}this.numTouches>0&&(this.touchDownIssued||(this.events.onTouchDown&&this.events.onTouchDown(t,this.numTouches),this.touchDownIssued=!0),this.events.onTouchUp&&this.events.onTouchUp(t,this.numTouches),this.numTouches=0)}},{key:"touchcancel",value:function(e){this.touchend(e)}},{key:"touchleave",value:function(e){this.touchend(e)}},{key:"getCenterTouchPos",value:function(){for(var e={x:0,y:0},t=0;t<this.touches.length;t++)e.x+=this.touches[t].x,e.y+=this.touches[t].y;return e.x/=this.touches.length,e.y/=this.touches.length,e}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function p(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function f(e,t,r){for(var a="",i=0;i<t.length;i++){var n=t[i];if("\\"==n&&i<t.length-1){var o=t[i+1];"\\"==o?n="\\":"t"==o?n="\t":"n"==o?n="\n":o==r?n=r:e.erro(e.tokens[e.tokens.length-1],"Após inserir a barra invertida \\ você deve ter um desses: \\ (barra invertida), n (nova linha), t (tabulação), "+r+" (aspas)"),i++}a+=n}return a}!function(){if("undefined"!=typeof document)document.createElement("div")}();var m="\n\t +-*/%><!=&|^~;,.{}()[]:\r",v=["programa","funcao","inclua","biblioteca","e","ou","nao","se","senao","enquanto","faca","para","escolha","caso","contrario","pare","retorne","vazio","const","estrutura"],y=["inteiro","caracter","cadeia","real","logico"],b=["sep-ln","sep-tab","sep-space","sep-plus","sep-minus","sep-mul","sep-div","sep-rem","sep-gt","sep-lt","sep-not","sep-equals","sep-and","sep-or","sep-xor","sep-bnot","sep-semi","sep-colon","sep-dot","sep-bracesO","sep-bracesC","sep-parO","sep-parC","sep-squareO","sep-squareC","sep-real-colon","sep-carriage-return"],g=["\n","\t"," ","+","-","*","/","%",">","<","!","=","&","|","^","~",";",",",".","{","}","(",")","[","]",":","\r","","","","","","+=","-=","*=","/=","%=",">>=",">>",">=","<<=","<<","<=","!=","==","e","&=","ou","|=","^=","~=","++","--","","+","-","--\x3e","++","--","","","","",""];function _(e){return g[e-0]}function x(e){return 0+m.indexOf(e)}var E=51,S=57,T=32,k=54,A=52,C=58,w=33,L=55,O=34,j=35,D=36,I=37,R=39,M=40,P=42,F=43,N=10,B=44,V=11,U=45,z=46,H=12,q=47,G=48,$=13,Y=49,J=14,X=15,W=17,Q=18,K=19,Z=20,ee=21,te=22,re=23,ae=24;function ie(e){switch(e){case E:case T:case k:case 3:case A:case w:case L:case 4:case O:case 5:case j:case 6:case D:case 7:case I:case 38:case R:case 8:case M:case 41:case P:case 9:case F:case N:case B:case V:case U:case z:case H:case q:case G:case $:case Y:case J:case 50:case X:return!0;default:return!1}}function ne(e){switch(e){case V:case T:case w:case O:case j:case D:case I:case M:case z:case G:case Y:case 50:return!0;default:return!1}}function oe(e){switch(e){case E:case A:return 14;case S:case C:case k:case L:case N:case X:return 13;case 5:case 6:case 7:return 12;case 3:case 4:return 11;case 38:case 41:return 10;case 8:case R:case 9:case P:return 9;case F:case B:return 8;case H:return 7;case J:return 6;case $:return 5;case U:return 4;case q:return 3;case T:case w:case O:case j:case D:case I:case M:case V:case z:case G:case Y:case 50:return 1;default:return 15}}function se(e){switch(e){case E:case A:case S:case C:case k:case L:case 3:case 4:case N:case X:return!0;default:return!1}}function ue(e){switch(e){case E:case A:return!0;default:return!1}}function ce(e){return 3==e||4==e||ie(e)&&!se(e)&&!ue(e)}var le=63;function pe(e){return e>=0&&e<le}function he(e){return 64+v.indexOf(e)}var de=81,fe=83;function me(e){return 96+y.indexOf(e)}var ve=96,ye=97,be=98,ge=99,_e=100,xe=101,Ee=105,Se=106,Te=110,ke=111,Ae=112;function Ce(e){return e+5}function we(e){return e+10}function Le(e,t){return 1==t?e+5:e+10}function Oe(e){return e>=xe&&e<=Ee?e-5:e>=Se&&e<=Te?e-10:e}function je(e){return e>=ve&&e<=_e}function De(e){switch(e){case ve:return"inteiro";case ye:return"caracter";case be:return"cadeia";case ge:return"real";case _e:return"logico";case de:return"vazio";case ke:return"vetor";case Ae:return"matriz";case xe:return"inteiro[]";case 102:return"caracter[]";case 103:return"cadeia[]";case 104:return"real[]";case Ee:return"logico[]";case Se:return"inteiro[][]";case 107:return"caracter[][]";case 108:return"cadeia[][]";case 109:return"real[][]";case Te:return"logico[][]";default:return"object"===h(e)&&null!==e&&e.txt?e.txt:e}}var Ie=128,Re=129,Me=130,Pe=131,Fe=132,Ne=133,Be=134;function Ve(e){return e>=le&&e<=_e}function Ue(e){return(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\t/g,"\\t")).replace(/\"/g,'\\"')).replace(/\'/g,"\\'")}function ze(e,t){var r=e._i;if(!r||-1==r)return!1;for(var a=r-1,i=0;a>=0&&i<30;a--+i++)switch(t[a].id){case 0:case 2:case 1:break;case Ie:case Re:return t[a].txt;default:return!1}return!1}var He=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=t,this.enviarErro=r,this.tokens=[]},(t=[{key:"erro",value:function(e,t){this.enviarErro?this.enviarErro(this.input,e,t,"sintatico"):console.log("ERRO NO TOKENIZER:",t)}},{key:"getRelevantTokens",value:function(){for(var e=[],t=0;t<this.tokens.length;t++)switch(this.tokens[t].id){case 0:case 2:case 1:case Ie:case Re:break;default:this.tokens[t]._i=t,e.push(this.tokens[t])}return e}},{key:"getTokenIndexAt",value:function(e){for(var t=0,r=0;r<this.tokens.length;r++){if(this.tokens[r].index>e)return t;t=r}return t}},{key:"getTokenIndexAtRowCol",value:function(e,t){for(var a=0,i=-1,n=0;n<this.tokens.length;n++){var o=this.tokens[n].index;if(r(o,this.input)==e&&-1==i&&(i=o),-1!=i){if(o-i>t)return a;a=n}}return a}},{key:"tokenize",value:function(){for(var e=0;e<this.input.length;e++){var t=this.input.charAt(e);if('"'==t||"'"==t){for(var r=e+1;r<this.input.length;r++){var a=this.input.charAt(r);if("\\"==a)r++;else if(a==t||"\n"==a){"\n"==a&&this.erro(this.tokens[this.tokens.length-1],"não fechou as aspas");break}}var i=this.input.substring(e+1,r);i=f(this,i,t),'"'==t?this.tokens.push({id:Fe,index:e,txt:i}):"'"==t&&(1!=i.length&&(this.erro(this.tokens[this.tokens.length-1],"o tipo caracter deve conter apenas uma letra ou número. mude para cadeia"),i.length>1&&(i=i.charAt(0))),this.tokens.push({id:Ne,index:e,txt:i})),e=r}else if("/"==t&&"/"==this.input.charAt(e+1)){for(var n=e+1;n<this.input.length&&"\n"!=this.input.charAt(n);n++);var o=this.input.substring(e,n);this.tokens.push({id:Ie,index:e,txt:o}),e=n-1}else if("/"==t&&"*"==this.input.charAt(e+1)){for(var s=e+1;s<this.input.length&&("/"!=this.input.charAt(s)||"*"!=this.input.charAt(s-1));s++);var u=this.input.substring(e,s+1);this.tokens.push({id:Re,index:e,txt:u}),e=s}else if(t>="0"&&t<="9"){for(var c=e+1;c<this.input.length;c++){var l=this.input.charAt(c);if(!/^[0-9A-Fa-f\.XxBb]$/.test(l))break}var p=this.input.substring(e,c);p.includes(".")?this.tokens.push({id:Pe,index:e,txt:p}):this.tokens.push({id:Me,index:e,txt:p}),e=c-1}else if(/^[a-zA-Z_\$]$/.test(t)){for(var h=e,d=e+1;d<this.input.length;d++){var b=this.input.charAt(d);if(!/^[a-zA-Z0-9_\$]$/.test(b))break}var g=this.input.substring(e,d);if(e=d-1,v.indexOf(g)>-1)"nao"==g?this.tokens.push({id:N,index:h,txt:g}):"ou"==g?this.tokens.push({id:q,index:h,txt:g}):"e"==g?this.tokens.push({id:U,index:h,txt:g}):this.tokens.push({id:he(g),index:h,txt:g});else if("texto"==g){for(var _=e+1;_<this.input.length&&/\s/.test(this.input.charAt(_));)_++;_<this.input.length&&/^[a-zA-Z_\$]$/.test(this.input.charAt(_))?this.tokens.push({id:be,index:h,txt:g}):this.tokens.push({id:le,index:h,txt:g})}else y.indexOf(g)>-1?this.tokens.push({id:me(g),index:h,txt:g}):"verdadeiro"==g||"falso"==g?this.tokens.push({id:Be,index:h,txt:g}):this.tokens.push({id:le,index:h,txt:g})}else if(m.indexOf(t)>-1){var S=1,k=x(t),C=this.input.length>e+1?x(this.input.charAt(e+1)):-1,L=this.input.length>e+2?x(this.input.charAt(e+2)):-1;3==k&&3==C?(k=E,S=2):3==k&&C==V&&(k=T,S=2),4==k&&4==C&&8==L?(k=56,S=3):4==k&&4==C?(k=A,S=2):4==k&&C==V&&(k=w,S=2),5==k&&C==V&&(k=O,S=2),6==k&&C==V&&(k=j,S=2),7==k&&C==V&&(k=D,S=2),8==k&&8==C&&L==V?(k=I,S=3):8==k&&8==C?(k=38,S=2):8==k&&C==V&&(k=R,S=2),9==k&&9==C&&L==V?(k=M,S=3):9==k&&9==C?(k=41,S=2):9==k&&C==V&&(k=P,S=2),k==N&&C==V&&(k=F,S=2),k==V&&C==V&&(k=B,S=2),k==H&&C==H&&(k=U,S=2),k==H&&C==V&&(k=z,S=2),k==$&&C==$&&(k=q,S=2),k==$&&C==V&&(k=G,S=2),k==J&&C==V&&(k=Y,S=2),k==X&&C==V&&(k=50,S=2),26==k&&0==C?(k=0,S=2):26==k&&(k=0),this.tokens.push({id:k,index:e,txt:this.input.substring(e,e+S)}),e+=S-1}else this.erro(this.tokens[this.tokens.length-1],"Remova o caracter '"+t+"', isso não deveria estar aqui")}return this.tokens}},{key:"formatHTML",value:function(){for(var e=1,t="<span class='code-ln' id='ln"+e+"'><span class='ln-n'>"+e+"</span>",r=0;r<this.tokens.length;r++){var a=this.tokens[r];switch(a.id){case 0:t+="\n</span><span class='code-ln' id='ln"+ ++e+"'><span class='ln-n'>"+e+"</span>";break;case Fe:t+="<span class='string-literal'>\""+a.txt+'"</span>';break;case Ne:t+="<span class='string-literal'>'"+a.txt+"'</span>";break;case 1:case 2:t+=a.txt;break;case Ie:t+="<span class='comment-line'>"+a.txt+"</span>";break;case Re:e+=(a.txt.match(/\r?\n/g)||"").length,t+="<span class='comment-line'>"+a.txt+"</span>";break;case Me:case Pe:t+="<span class='numeric-literal'>"+a.txt+"</span>";break;default:Ve(a.id)?t+="<span class='w-"+a.txt+"'>"+a.txt+"</span>":pe(a.id)?t+="<span class='"+b[m.indexOf(a.txt)]+"'>"+a.txt+"</span>":t+=a.txt}}return t}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,p(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function qe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw n}}}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ye(e){if(!e||"object"!==$e(e))return e;var t,r={__struct__:!0},a=qe(Object.getOwnPropertyNames(e));try{for(a.s();!(t=a.n()).done;){var i=t.value;if("__struct__"!==i){var n=Object.getOwnPropertyDescriptor(e,i),o=Je(e[i]);Object.defineProperty(r,i,{value:o,writable:n.writable,enumerable:n.enumerable,configurable:n.configurable})}}}catch(e){a.e(e)}finally{a.f()}return r}function Je(e){return Array.isArray(e)?e.map(function(e){return Je(e)}):e&&"object"===$e(e)&&e.__struct__?Ye(e):e}var Xe=13,We=20,Qe=21,Ke=22,Ze=23,et=24,tt=25,rt=40,at=41,it=49,nt=50,ot=51,st=52,ut=54,ct=55,lt=100,pt=101,ht=102,dt=103,ft=104,mt=105,vt=106,yt=107;function bt(e){switch(e){case 1:return"push";case 2:return"pop";case 3:return"add";case 4:return"sub";case 5:return"mul";case 6:return"div";case 7:return"rem";case 8:return"idiv";case 9:return"irem";case Xe:return"goto";case 14:return"ifeq";case 15:return"ifne";case 16:return"iflt";case 17:return"ifge";case 18:return"ifgt";case 19:return"ifle";case We:return"dup";case Qe:return"invoke";case Ke:return"store";case Ze:return"load";case rt:return"storeglobal";case at:return"loadglobal";case et:return"ret";case tt:return"retvalue";case 26:return"shl";case 27:return"shr";case 28:return"xor";case 29:return"and";case 30:return"or";case 31:return"ifcmpeq";case 32:return"ifcmpne";case 33:return"ifcmplt";case 34:return"ifcmple";case 35:return"ifcmpgt";case 36:return"ifcmpge";case 37:return"neg";case 38:return"not";case lt:return"write";case pt:return"waitinput";case ht:return"read_int";case dt:return"read_float";case ft:return"read_string";case mt:return"read_char";case vt:return"read_bool";case 42:return"f2i";case 43:return"i2s";case 44:return"f2s";case 45:return"b2s";case 46:return"c2s";case 47:return"swap";case 39:return"no";case yt:return"clear";case 48:return"newarray";case it:return"astore";case nt:return"aload";case ot:return"newarrayglobal";case st:return"astoreglobal";case 53:return"aloadglobal";case ut:return"libload";case ct:return"libinvoke"}}function gt(e){switch(e){case 14:case 15:case 16:case 17:case 18:case 19:case Xe:case Ke:case Ze:case rt:case at:case 1:case 31:case 32:case 33:case 34:case 35:case 36:return 1;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case We:case et:case tt:case 26:case 27:case 28:case 29:case 30:case 37:case 38:case 39:case lt:case pt:case ht:case dt:case ft:case mt:case vt:case 42:case 43:case 44:case 45:case 46:case 47:case yt:return 0;case Qe:case it:case nt:case st:case 53:case ut:return 2;case 48:case ot:case ct:return 3}}var _t=0,xt=1,Et=7,St=8,Tt=9,kt=!1;function At(e){kt=e}var Ct=!1;function wt(){return Ct}var Lt=new Set,Ot=-1,jt=!1,Dt=0,It=!1,Rt=0,Mt=!1,Pt=0,Ft=!1,Nt=!1;function Bt(){return Nt}var Vt=!1,Ut=!1,zt=!1,Ht=!1,qt=!1;function Gt(){return qt}var $t=!1,Yt=!1,Jt=0,Xt=5e5,Wt=0,Qt=!1;function Kt(e,t,r){if(r>=e.length)return console.log("não deveria chamar o recursiveDeclareArray DENOVO!"),!1;var a=new Array(e[r]);if(r+1<e.length)for(var i=0;i<a.length;i++)a[i]=Kt(e,t,r+1);else for(var n=0;n<a.length;n++)a[n]=t;return a}function Zt(){if(!$t)throw"Desconfigurado escreva() não pode executar";Wt>1e3&&(Wt=0,qt="<MAIS DE 1000 ESCREVAS, REINICIANDO LOG...>\n");for(var e=0;e<arguments.length;e++)qt+=e<0||arguments.length<=e?void 0:arguments[e];$t.value=qt,$t.scrollTop=$t.scrollHeight,Wt++}function er(){qt="",Wt=0,$t&&($t.value=qt,$t.scrollTop=$t.scrollHeight)}function tr(){if(!$t)throw"Desconfigurado leia() não pode executar";var e=$t.value,t=(e=e.replace(/\r\n/g,"\n")).substring(qt.length,e.length);return t.endsWith("\n")&&(t=t.substring(0,t.length-1)),qt=e,t}function rr(e,t){return Ht.Util.sorteia(e,t).value}var ar=255;function ir(e,t,r){var a=!1;r||(r={count:ar});var i,n=qe(t);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(a?a+=", ":a="[",Array.isArray(o)?a+=ir(e,o,r):(r.count--,a+=nr(e,o)),r.count<=0){a+=", ...";break}}}catch(e){n.e(e)}finally{n.f()}return a+"]"}function nr(e,t){switch(e){case ve:return or(t);case ye:case be:return t;case ge:return sr(t);case _e:return function(e){return 0==e?"verdadeiro":"falso"}(t);default:return(r=e)>=xe&&r<=Te?ir(Oe(e),t):""+t}var r}function or(e){return e.toLocaleString("fullwide",{useGrouping:!1})}function sr(e){var t=""+e;return t.includes(".")||(t+=".0"),t}function ur(e){return e?"verdadeiro":"falso"}function cr(e,t){var r=Ut[t];if(!r||!r.bytecodeIndexes)return 0;var a=Object.keys(r.bytecodeIndexes);if(!a)return 0;for(var i=0,n=0;n<a.length;n++)a[n]<=e&&(i=r.bytecodeIndexes[a[n]]);return i}function lr(){return cr(Dt,Pt)}function pr(e){return Mt[e]}function hr(e){return Nt[e]}function dr(e){var t=function(){var e=Ut[Pt];if(e&&e.bytecodeIndexes)return{funcIndex:Pt,i:Dt};for(var t=Ft.length-1;t>=0;t--){var r=Ft[t].funcIndex;if((e=Ut[r])&&e.bytecodeIndexes)return{funcIndex:r,i:Ft[t].i}}return!1}(),r=0;t&&(r=cr(t.i,t.funcIndex)),Qt?Qt(Yt,{index:r},e,"exec"):console.log("ERRO NA VM:",e)}function fr(e){try{for(Jt=0;;){if(++Jt>e)return 2;var t=Dt,a=Rt,i=jt[Dt++];switch(i){case 1:It[Rt++]=jt[Dt++];break;case 2:Rt--;break;case We:It[Rt]=It[Rt-1],Rt++;break;case 47:var n=It[Rt-1];It[Rt-1]=It[Rt-2],It[Rt-2]=n;break;case Ke:var o=It[--Rt];o&&"object"===$e(o)&&o.__struct__&&(o=Ye(o)),Mt[jt[Dt++]]=o;break;case Ze:It[Rt++]=Mt[jt[Dt++]];break;case rt:var s=It[--Rt];s&&"object"===$e(s)&&s.__struct__&&(s=Ye(s)),Nt[jt[Dt++]]=s;break;case at:It[Rt++]=Nt[jt[Dt++]];break;case ut:var u=jt[Dt++],c=jt[Dt++];if("__struct__"===u){var l=It[--Rt];l&&"object"===$e(l)?It[Rt++]=l[c]:It[Rt++]=void 0}else It[Rt++]=Ht[u][c];break;case 3:It[Rt-2]=It[Rt-2]+It[Rt-1],Rt--;break;case 4:It[Rt-2]=It[Rt-2]-It[Rt-1],Rt--;break;case 5:It[Rt-2]=It[Rt-2]*It[Rt-1],Rt--;break;case 6:It[Rt-2]=It[Rt-2]/It[Rt-1],Rt--;break;case 7:It[Rt-2]=It[Rt-2]%It[Rt-1],Rt--;break;case 8:It[Rt-2]=Math.trunc(It[Rt-2]/It[Rt-1]),Rt--;break;case 9:It[Rt-2]=Math.trunc(It[Rt-2]%It[Rt-1]),Rt--;break;case 26:It[Rt-2]=It[Rt-2]<<It[Rt-1],Rt--;break;case 27:It[Rt-2]=It[Rt-2]>>It[Rt-1],Rt--;break;case 28:It[Rt-2]=It[Rt-2]^It[Rt-1],Rt--;break;case 29:It[Rt-2]=It[Rt-2]&It[Rt-1],Rt--;break;case 30:It[Rt-2]=It[Rt-2]|It[Rt-1],Rt--;break;case 31:Dt=It[Rt-2]==It[Rt-1]?jt[Dt++]:Dt+1,Rt-=2;break;case 32:Dt=It[Rt-2]!=It[Rt-1]?jt[Dt++]:Dt+1,Rt-=2;break;case 33:Dt=It[Rt-2]<It[Rt-1]?jt[Dt++]:Dt+1,Rt-=2;break;case 34:Dt=It[Rt-2]<=It[Rt-1]?jt[Dt++]:Dt+1,Rt-=2;break;case 35:Dt=It[Rt-2]>It[Rt-1]?jt[Dt++]:Dt+1,Rt-=2;break;case 36:Dt=It[Rt-2]>=It[Rt-1]?jt[Dt++]:Dt+1,Rt-=2;break;case Xe:Dt=jt[Dt++];break;case 14:Dt=0==It[--Rt]?jt[Dt++]:Dt+1;break;case 15:Dt=0!=It[--Rt]?jt[Dt++]:Dt+1;break;case 16:Dt=It[--Rt]<0?jt[Dt++]:Dt+1;break;case 17:Dt=It[--Rt]>=0?jt[Dt++]:Dt+1;break;case 18:Dt=It[--Rt]>0?jt[Dt++]:Dt+1;break;case 19:Dt=It[--Rt]<=0?jt[Dt++]:Dt+1;break;case ct:for(var p=jt[Dt++],h=jt[Dt++],d=jt[Dt++],f=[],m=0;m<d;m++)f.push(It[--Rt]);if(f.reverse(),"__struct__"===p&&"__set__"===h){var v=f[0],y=f[1],b=f[2];if(v&&"object"===$e(v)){var g=Object.getOwnPropertyDescriptor(v,y);g&&!1===g.writable||(b&&"object"===$e(b)&&b.__struct__&&(b=Ye(b)),v[y]=b)}break}var _=Ht[p][h].apply(Ht[p],f);if(_){var x=_.value;if(void 0!==x&&("boolean"==typeof x&&(x=x?0:1),It[Rt++]=x),void 0!==_.state&&4!=_.state)return 6==_.state&&(Dt=t,Rt=a),_.state}break;case Qe:for(var E=jt[Dt++],S=jt[Dt++],T=[],k=0;k<S;k++)T.push(It[--Rt]);if(T.reverse(),E<0||!Ut[E]||!Ut[E].bytecode)dr("Function '"+E+"' not found");else if(Ct&&Ut[E].jsSafe){var A=zt[E].jsName;A||dr("Function '"+E+"' has no name");var C=window[A];if(C){var w=C.apply(null,T);void 0!==w&&("boolean"==typeof w&&(w=w?0:1),It[Rt++]=w)}else dr("Function '"+A+"' not found")}else if(Ft.push({i:Dt,stack:It,si:Rt,vars:Mt,funcIndex:Pt}),jt=Ut[Pt=E].bytecode,Dt=0,It=new Array(100),Rt=0,Mt=new Array(Ut[Pt].varCount),T)for(var L=0;L<T.length;L++){var O=T[L],j=Ut[E].parameters&&Ut[E].parameters[L];j&&!j.byRef&&O&&"object"===$e(O)&&O.__struct__&&(O=Ye(O)),Mt[L]=O}break;case et:if(!(Ft.length>0))return _t;var D=Ft.length-1;Pt=Ft[D].funcIndex,jt=Ut[Pt].bytecode,Dt=Ft[D].i,It=Ft[D].stack,Rt=Ft[D].si,Mt=Ft[D].vars,Ft.pop();break;case tt:var I=It[--Rt];if(I&&"object"===$e(I)&&I.__struct__&&(I=Ye(I)),!(Ft.length>0))return console.log("Não pode retornar valor:"+I),_t;var R=Ft.length-1;Ft[R].stack[Ft[R].si++]=I;break;case 37:It[Rt-1]=-It[Rt-1];break;case 38:It[Rt-1]=~It[Rt-1];break;case 39:It[Rt-1]=0==It[Rt-1]?1:0;break;case 42:It[Rt-1]=Math.trunc(It[Rt-1]);break;case 43:It[Rt-1]=It[Rt-1].toLocaleString("fullwide",{useGrouping:!1});break;case 44:var M=""+It[Rt-1];M.includes(".")||(M+=".0"),It[Rt-1]=M;break;case 45:It[Rt-1]=0==It[Rt-1]?"verdadeiro":"falso";break;case ot:case 48:for(var P=jt[Dt++],F=jt[Dt++],N=jt[Dt++],B=[],V=0;V<F;V++){var U=It[--Rt];if(!(U>=0))return dr("Tentou criar vetor com tamanho inválido '"+U+"'"),_t;B.push(U)}B.reverse(),i==ot?Nt[P]=Kt(B,N,0):Mt[P]=Kt(B,N,0);break;case st:case it:var z=jt[Dt++],H=jt[Dt++],q=[],G=void 0,$=void 0;if(-1==z){G=It[--Rt];for(var Y=0;Y<H;Y++)q.push(It[--Rt]);q.reverse(),$=It[--Rt]}else{for(var J=0;J<H;J++)q.push(It[--Rt]);q.reverse(),$=i==st?Nt[z]:Mt[z],G=It[--Rt]}if(G&&"object"===$e(G)&&G.__struct__&&(G=Ye(G)),!$||!Array.isArray($))return dr("tentativa de atribuir elemento de um não-array"),_t;for(var X=0;X<H-1;X++){if(!(q[X]>=0&&q[X]<$.length))return dr("a matriz tem tamanho '"+$.length+"' na dimensão '"+X+"' mas tentou acessar a posição '"+q[X]+"'"),_t;$=$[q[X]]}if(!(q[H-1]>=0&&q[H-1]<$.length))return dr("O vetor vai de 0 à "+($.length-1)+" mas tentou acessar a posição '"+q[H-1]+"'"),_t;$[q[H-1]]=G;break;case 53:case nt:for(var W=jt[Dt++],Q=jt[Dt++],K=[],Z=0;Z<Q;Z++)K.push(It[--Rt]);K.reverse();var ee=void 0;if(!(ee=-1==W?It[--Rt]:53==i?Nt[W]:Mt[W])||!Array.isArray(ee))return dr("tentativa de acessar elemento de um não-array"),_t;for(var te=0;te<Q-1;te++){if(!(K[te]>=0&&K[te]<ee.length))return dr("a matriz tem tamanho '"+ee.length+"' na dimensão '"+te+"' mas tentou acessar a posição '"+K[te]+"'"),_t;ee=ee[K[te]]}if(!(K[Q-1]>=0&&K[Q-1]<ee.length))return dr("O vetor vai de 0 à "+(ee.length-1)+" mas tentou acessar a posição '"+K[Q-1]+"'"),_t;It[Rt++]=ee[K[Q-1]];break;case lt:return Zt(It[--Rt]),2;case yt:return er(),2;case pt:return xt;case ht:var re=tr();if(!re||0===re.length)return dr("Deveria inserir um número inteiro, mas inseriu nada"),_t;if(!/^[\+\-]?\d+$/.test(re))return dr("Deveria inserir um número inteiro, mas inseriu outro tipo"),_t;It[Rt++]=parseInt(re);break;case dt:var ae=tr();if(!ae||0===ae.length)return dr("Deveria inserir um número, mas inseriu nada"),_t;var ie=parseFloat(ae);if(isNaN(ie)||!isFinite(ie))return dr("Deveria inserir um número, mas inseriu outro tipo"),_t;It[Rt++]=ie;break;case ft:It[Rt++]=tr();break;case mt:var ne=tr();if(!ne||0===ne.length)return dr("Deveria inserir um caractere, mas inseriu nada"),_t;It[Rt++]=ne[0];break;case vt:var oe=tr();if("verdadeiro"==oe)It[Rt++]=0;else{if("falso"!=oe)return dr("Deveria inserir verdadeiro ou falso, mas inseriu outro valor"),_t;It[Rt++]=1}break;default:return dr("invalid bytecode:"+i),_t}if(Lt&&Lt.size>0){var se=r(lr(),Yt);if(Lt.has(se)&&se!==Ot)return Ot=se,Tt}}}catch(e){return console.log(e.stack),dr(e),_t}}var mr={};function vr(e,t,r){mr[e]?console.log("Tentando agendar novamente o timeout '"+e+"' antes de executar o anterior"):mr[e]=setTimeout(function(){mr[e]=!1,t()},r)}function yr(e){mr[e]&&(clearTimeout(mr[e]),mr[e]=!1)}function br(e,t){"undefined"!=typeof Storage&&localStorage&&localStorage.setItem(e,t)}function gr(e){return!("undefined"==typeof Storage||!localStorage)&&localStorage.getItem(e)}function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function xr(e){var t=function(e){if("object"!=_r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_r(t)?t:t+""}var Er=10;function Sr(e,t){for(var r=e,a=2;a<arguments.length&&r<t.length;a++){if(t[r].id!=arguments[a])return!1;r++}return!0}function Tr(e,t){for(var r=0;r<e.length;r++){var a=e[r];a.id?a.id==Er||1==a.id?t.push(a):3==a.id||11==a.id||7==a.id||5==a.id||6==a.id?a.statements&&Tr(a.statements,t):4==a.id&&(a.statements_true&&Tr(a.statements_true,t),a.statements_false&&Tr(a.statements_false,t)):a.statements&&Tr(a.statements,t)}}var kr=function(){return e=function e(t,r,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokens=t,this.allTokens=r,this.textInput=a,this.tree=[],this.enviarErro=i,this.structures={}},(t=[{key:"erro",value:function(e,t){this.enviarErro?this.enviarErro(this.textInput,e,t,"semantico"):console.log("ERRO NO PARSER:",t)}},{key:"parse",value:function(){if(!Sr(0,this.tokens,64))return this.erro(this.tokens[0],"não encontrou o programa."),null;var e=this.extractBlock(1,this.tokens,K,Z);return this.tree=this.parsePrograma(e.block),this.tree}},{key:"parsePrograma",value:function(e){for(var t={incluas:[],variaveis:[],funcoes:[],estruturas:[]},r=0;r<e.length;r++){var a=e[r].id;if(66==a)r=this.parseDeclBiblioteca(r,e,t.incluas);else if(a==fe)r=this.parseDeclEstrutura(r,e,t.estruturas,t.variaveis);else if(je(a)||82==a||this.isStructType(e[r].txt))r=this.parseDeclVariavel(r,e,t.variaveis);else if(65==a){var i=ze(e[r],this.allTokens),n=de,o=!1,s=!1,u=[],c=[];if(je(e[++r].id)){if(n=e[r].id,e[++r].id==re){o=n,n=re,s=0;do{e[++r].id!=ae&&this.erro(e[r],"esqueceu de fechar os colchetes na declaração de vetor"),r++,s++}while(e[r].id==re)}}else e[r].id==fe&&(e[++r].id==le&&this.isStructType(e[r].txt)?(n=e[r],r++):this.erro(e[r],"tipo de estrutura '"+e[r].txt+"' não encontrado. Defina a estrutura antes de usá-la."));this.processingFuncType=n;var l=e[r].txt;r++,r=this.parseDeclParametros(r,e,u),r++,r=this.parseStatementOrBlock(r,e,c),t.funcoes.push({name:l,type:n,arrayType:o,arrayDim:s,parameters:u,statements:c,comment:i})}else this.erro(e[r],"não é variável nem função, remova isso")}return t}},{key:"parseDeclBiblioteca",value:function(e,t,r){67!=t[++e].id&&(this.erro(t[e],"esperando 'biblioteca' logo após a palavra inclua"),e--);var a=t[++e].txt,i=!1;return 56==t[e+1].id&&(i=t[e+=2].txt),r.push({name:a,alias:i}),e}},{key:"isStructType",value:function(e){return this.structures.hasOwnProperty(e)}},{key:"parseDeclEstrutura",value:function(e,t,r,a){var i=ze(t[e],this.allTokens),n=e,o=null;if(t[++e].id==le&&(o=t[e].txt,e++),t[e].id!=K)return o?this.parseDeclVariavel(n,t,a):(this.erro(t[e],"esperando '{' após o nome da estrutura ou keyword 'estrutura'"),e);var s=this.extractBlock(e,t,K,Z),u=[];if(this.parseStructFields(s.block,u),o&&(this.structures[o]={name:o,fields:u,comment:i},r.push(this.structures[o])),(e=s.index)+1<t.length&&t[e+1].id==le){e++;for(var c=o||"__anonymous_struct__",l={id:le,txt:c,structType:!0,structDef:u};;){var p=t[e].index;if(t[e].id==le&&t[e+1].id==re){var h=t[e].txt,d=[];e++;do{t[e+1].id!=ae?e=this.parseExpressao(e+1,t,d,0):d.push(!1),t[++e].id!=ae&&this.erro(t[e],"esqueceu de fechar os colchetes na declaração de vetor"),e++}while(t[e].id==re);var f=!1;if(t[e].id==V)if(f={index:p},t[++e].id==K){var m=[];e=this.parseDeclArray(e,t,m),f.id=13,f.expr=m}else{var v=[];e=this.parseExpressao(e,t,v,0),f.id=2,f.expr=v[0]}a.push({id:Er,index:p,type:l,isConst:!1,name:h,size_expr:d,expr:f,comment:i,structType:c,structDef:u})}else if(t[e].id==le&&t[e+1].id==V){var y=t[e].txt,b=[];e=this.parseExpressao(e+2,t,b,0),a.push({id:1,index:p,type:l,isConst:!1,name:y,expr:b[0],comment:i,structType:c,structDef:u})}else{if(t[e].id!=le){this.erro(t[e],"esperando nome de variável após definição da estrutura");break}var g=t[e].txt;a.push({id:1,index:p,type:l,isConst:!1,name:g,expr:!1,comment:i,structType:c,structDef:u})}if(e++,t.length<=e||t[e].id!=W){e--;break}e++}}return e}},{key:"parseStructFields",value:function(e,t){for(var r=0;r<e.length;r++){var a=e[r].id,i=!1;if(82==a&&(i=!0,a=e[++r].id),je(a)){var n=a;for(r++;r<e.length;){if(e[r].id==le){var o=e[r].txt,s=!1,u=[];if(++r<e.length&&e[r].id==re){s=!0;do{e[r+1].id!=ae?r=this.parseExpressao(r+1,e,u,0):(this.erro(e[r],"esperando expressão que indica o tamanho do vetor"),u.push({op:Me,value:"0"})),e[++r].id!=ae&&this.erro(e[r],"esqueceu de fechar os colchetes na declaração de vetor"),r++}while(r<e.length&&e[r].id==re);r--}r<e.length&&e[r].id==V&&(this.erro(e[r],"campos de estrutura não podem ter inicializadores em sua declaração"),r++,r=this.parseExpressao(r,e,[],0),r--);var c={type:n,name:o,isConst:i,initExpr:null};if(s&&(c.isArray=!0,c.arrayDimExpr=u,c.arrayDim=u.length),t.push(c),r<e.length&&e[r].id==W){r++;continue}}break}r--}else if(a==fe){if(++r>=e.length||e[r].id!=le){this.erro(e[r-1],"esperando nome do tipo estrutura");break}var l=e[r].txt,p={id:le,txt:l};for(r++;r<e.length;){if(e[r].id==le){var h=e[r].txt,d=!1,f=[];if(++r<e.length&&e[r].id==re){d=!0;do{e[r+1].id!=ae?r=this.parseExpressao(r+1,e,f,0):(this.erro(e[r],"esperando expressão que indica o tamanho do vetor"),f.push({op:Me,value:"0"})),e[++r].id!=ae&&this.erro(e[r],"esqueceu de fechar os colchetes na declaração de vetor"),r++}while(r<e.length&&e[r].id==re);r--}var m={type:p,name:h,isConst:i,structType:l,structDef:this.structures[l]?this.structures[l].fields:null};if(d&&(m.isArray=!0,m.arrayDimExpr=f,m.arrayDim=f.length),t.push(m),r<e.length&&e[r].id==W){r++;continue}}break}r--}}}},{key:"parseDeclParametros",value:function(e,t,r){for(t[e].id!=ee&&this.erro(t[e],"esqueceu de abrir os parênteses da função"),e++;t[e].id!=te;){var a=!1;82==t[e].id&&(a=!0,e++);var i=t[e].index,n=t[e].id,o=null,s=null;if(t[e].id==fe){if(t[++e].id!=le||!this.isStructType(t[e].txt)){for(this.erro(t[e],"tipo de estrutura '"+t[e].txt+"' não encontrado. Defina a estrutura antes de usá-la.");e<t.length&&t[e].id!=te&&t[e].id!=W;)e++;if(t[e].id==W){e++;continue}break}o=t[e].txt,s=this.structures[o].fields,n=t[e]}else if(!je(t[e].id)){this.erro(t[e],"uma declaração de parâmetro deve começar com um tipo de variável"),e++;break}var u=!1;if(t[++e].id==H&&(u=!0,e++),t[e].id!=le){this.erro(t[e],"o nome do parâmetro é inválido, deve ser apenas letras"),e++;break}var c=t[e].txt;if(t[++e].id==re){var l=[];do{e++,l.push(!1),t[e].id!=ae&&this.erro(t[e],"esqueceu de fechar os colchetes na declaração de vetor"),e++}while(t[e].id==re);r.push({id:Er,index:i,type:n,isConst:a,byRef:u,name:c,size_expr:l,values:[],structType:o,structDef:s,isParameter:!0})}else r.push({id:1,index:i,type:n,isConst:a,byRef:u,name:c,expr:!1,structType:o,structDef:s,isParameter:!0});if(t[e].id!=W)break;e++}return t[e].id!=te&&this.erro(t[e],"esqueceu de fechar os parênteses da função"),e}},{key:"parseStatementOrBlock",value:function(e,t,r){var a=t[e].id,i=t[e].index;if(a==K){var n=[];for(e++;e<t.length&&t[e].id!=Z;)e=this.parseStatement(e,t,n),e++;return r.push({id:3,index:i,statements:n}),e}return this.parseStatement(e,t,r)}},{key:"parseStatement",value:function(e,t,r){var a=t[e].id,i=t[e].index;if(a==fe&&t[e+1]&&(t[e+1].id==le||t[e+1].id==K)&&(t[e+1].id==K||t[e+2]&&t[e+2].id==K))return r.localEstructuras||(r.localEstructuras=[]),this.parseDeclEstrutura(e,t,r.localEstructuras,r);if(je(a)||82==a||a==fe||this.isStructType(t[e].txt))e=this.parseDeclVariavel(e,t,r);else if(79==a)r.push({id:8,index:i});else if(80==a){var n=!1;this.processingFuncType!=de&&(e++,n=[],e=this.parseExpressao(e,t,n,0),n=n[0]),r.push({id:9,index:i,expr:n})}else if(71==a){var o=[],s=[],u=!1;t[++e].id!=ee&&this.erro(t[e],"esqueceu de abrir os parênteses da condição se"),t[e=this.parseExpressao(e,t,o,0)].id!=te&&this.erro(t[e],"esqueceu de fechar os parênteses da condição se"),e++,e=this.parseStatementOrBlock(e,t,s),72==t[++e].id?(u=[],e++,e=this.parseStatementOrBlock(e,t,u)):e--,r.push({id:4,index:i,expr:o[0],statements_true:s,statements_false:u})}else if(73==a){var c=[],l=[];t[++e].id!=ee&&this.erro(t[e],"esqueceu de abrir os parênteses da condição do enquanto"),t[e=this.parseExpressao(e,t,c,0)].id!=te&&this.erro(t[e],"esqueceu de fechar os parênteses da condição do enquanto"),e++,e=this.parseStatementOrBlock(e,t,l),r.push({id:5,index:i,expr:c[0],statements:l})}else if(74==a){var p=[],h=[];e++,e=this.parseStatementOrBlock(e,t,h),73!=t[++e].id&&this.erro(t[e],"esperando 'enquanto' aqui, a estrutura faca está incompleta"),t[++e].id!=ee&&this.erro(t[e],"esqueceu de abrir os parênteses da condição do enquanto"),t[e=this.parseExpressao(e,t,p,0)].id!=te&&this.erro(t[e],"esqueceu de fechar os parênteses da condição do enquanto"),r.push({id:6,index:i,expr:p[0],statements:h})}else if(75==a){var d=!1,f=!1,m=!1,v=[];t[++e].id!=ee&&(this.erro(t[e],"esqueceu de abrir os parênteses do laço para"),e--),16!=t[++e].id?(d=[],e=this.parseStatement(e,t,d),1==d.length&&1!=d[0].id&&2!=d[0].id&&(this.erro(t[e],"dentro do para só pode declarações de variáveis e expressões. remova isso"),d=!1)):e--,16!=t[++e].id&&(this.erro(t[e],"estava esperando o ponto e vírgula do para aqui!"),e--),16!=t[++e].id?(f=[],e=this.parseExpressao(e,t,f,0)):e--,16!=t[++e].id&&(this.erro(t[e],"estava esperando o ponto e vírgula do para aqui!"),e--),t[++e].id!=te&&(m=[],e=this.parseExpressao(e,t,m,0),t[++e].id!=te&&(this.erro(t[e-1],"esqueceu de fechar os parênteses do para!"),e--)),e++,e=this.parseStatementOrBlock(e,t,v),r.push({id:7,index:i,decl:d,expr:f[0],inc:m[0],statements:v})}else if(76==a){var y=[],b=[];t[++e].id!=ee&&this.erro(t[e],"esqueceu de abrir os parênteses do escolha"),t[e=this.parseExpressao(e,t,y,0)].id!=te&&this.erro(t[e],"esqueceu de fechar os parênteses do escolha"),e++,e=this.parseStatementOrBlock(e,t,b),r.push({id:11,index:i,expr:y[0],statements:b})}else if(77==a){var g=[],_=!1;78==t[++e].id?(g=!1,_=!0):e=this.parseExpressao(e,t,g,0),25!=t[++e].id&&this.erro(t[e],"esqueceu dos dois-pontos depois do caso:"+t[e].id),r.push({id:12,contrario:_,index:i,expr:g[0]})}else{var x=[];e=this.parseExpressao(e,t,x,0),r.push({id:2,index:i,expr:x[0]})}return e}},{key:"parseDeclArray",value:function(e,t,r){t[e].id!=K&&this.erro(t[e],"esqueceu de abrir as chaves na declaração dos valores do vetor");do{if(t[++e].id==Z)break;if(t[e].id==K){var a=[];e=this.parseDeclArray(e,t,a),r.push(a)}else e=this.parseExpressao(e,t,r,0);e++}while(t[e].id==W);return e}},{key:"parseDeclStruct",value:function(e,t,r,a){if(!a||!Array.isArray(a))return this.erro(t[e],"estrutura indefinida ou inválida"),e;t[e].id!=K&&this.erro(t[e],"esqueceu de abrir as chaves na inicialização da estrutura");var i=0;do{if(t[++e].id==Z)break;if(i>=a.length){this.erro(t[e],"muitos valores na inicialização da estrutura");break}var n=a[i];if(n.isArray)if(t[e].id==K){var o=[];e=this.parseDeclArray(e,t,o),r.push(o)}else this.erro(t[e],"campo de vetor '"+n.name+"' na estrutura precisa de valores entre chaves {...}"),e=this.parseExpressao(e,t,r,0),r.push(r.pop());else if(n.structType)if(t[e].id==K)if(n.structDef){var s=[];e=this.parseDeclStruct(e,t,s,n.structDef),r.push(s)}else this.erro(t[e],"definição da estrutura '"+n.structType+"' não encontrada para campo '"+n.name+"'"),e=this.parseExpressao(e,t,r,0);else this.erro(t[e],"campo de estrutura '"+n.name+"' precisa de valores entre chaves {...}"),e=this.parseExpressao(e,t,r,0);else e=this.parseExpressao(e,t,r,0);e++,i++}while(t[e].id==W);return t[e].id!=Z&&this.erro(t[e],"esqueceu de fechar as chaves na inicialização da estrutura"),e}},{key:"parseDeclVariavel",value:function(e,t,r){var a=ze(t[e],this.allTokens),i=!1;82==t[e].id&&(i=!0,e++);var n=t[e].id,o=null,s=null;if(t[e].id==fe){if(t[++e].id!=le||!this.isStructType(t[e].txt))return this.erro(t[e],"tipo de estrutura '"+t[e].txt+"' não encontrado. Defina a estrutura antes de usá-la."),e;o=t[e].txt,s=this.structures[o].fields,n=t[e]}else if(!je(n))return this.erro(t[e],"decl. de variável incompleta, falta o tipo da variável ou palavra-chave 'estrutura' para tipos estrutura:"),e;for(;;){var u=t[e+1].index;if(t[e+1].id==le&&t[e+2].id==re){var c=t[++e].txt,l=[];do{t[e+2].id!=ae?e=this.parseExpressao(e+2,t,l,0):(l.push(!1),e++),t[++e].id!=ae&&this.erro(t[e],"esqueceu de fechar os colchetes na declaração de vetor")}while(t[e+1].id==re);var p=!1;if(t[e+1].id==V)if(p={index:u},t[1+ ++e].id==K){var h=[];e=this.parseDeclArray(e+1,t,h),p.id=13,p.expr=h}else{var d=[];e=this.parseExpressao(e+1,t,d,0),p.id=2,p.expr=d[0]}r.push({id:Er,index:u,type:n,isConst:i,name:c,size_expr:l,expr:p,comment:a,structType:o,structDef:s})}else if(t[e+1].id==le&&t[e+2].id==V){var f=t[e+1].txt;if(o&&t[e+3].id==K){var m=[];e=this.parseDeclStruct(e+3,t,m,s);var v={id:14,expr:m,index:u};r.push({id:1,index:u,type:n,isConst:i,name:f,expr:v,comment:a,structType:o,structDef:s})}else{var y=[];e=this.parseExpressao(e+3,t,y,0),r.push({id:1,index:u,type:n,isConst:i,name:f,expr:y[0],comment:a,structType:o,structDef:s})}}else if(t[e+1].id==le){var b=t[e+1].txt;i&&this.erro(t[e],"não pode declarar uma variável constante e não definir o valor imediatamente."),r.push({id:1,index:u,type:n,isConst:i,name:b,expr:!1,comment:a,structType:o,structDef:s}),e++}else this.erro(t[e+1],"decl. de variável incompleta, falta o nome da variável:"),e++;if(e++,t.length<=e||t[e].id!=W){e--;break}}return e}},{key:"parseExpressao",value:function(e,t,r,a){var i=t[e].id,n=[];if(ie(i)){if(!se(i))return this.erro(t[e],"expressao numérica inválida, falta um dos operandos"),e;if(3==i&&(i=k),4==i&&(i=L),i==E&&(i=S),i==A&&(i=C),e++,!(t.length>e))return this.erro(t[e],"expressao numérica inválida, falta o operando à frente"),e;n.op=i,e=this.parseExpressao(e,t,n,oe(n.op))}else e=this.parseExprMember(e,t,n),e++,t.length>e&&ue(t[e].id)?n.op=t[e].id:(e--,n=n[0]);for(;;){if(e++,t.length<=e||!ce(t[e].id))return r.push(n),--e;var o=t[e].id;if(oe(o)<=a)return r.push(n),--e;(n=[n]).op=o,e++,e=this.parseExpressao(e,t,n,oe(n.op))}}},{key:"parseExprMember",value:function(e,t,r){var a,i=this;if(Sr(e,t,le,Q)){var n=t[e].txt;if(t[e+=2].id!=le)return this.erro(t[e],"esperando nome de campo após '.'"),r.push({op:Q,name:n,expr:{op:le,name:""}}),e;if(t[e+1]&&t[e+1].id==ee&&(!t[e+2]||t[e+2].id!=Q)){var o=[];return e=this.parseMethCall(e,t,o),r.push({op:Q,name:n,expr:o[0]}),e}if(!(t[e+1]&&t[e+1].id==re||t[e+1]&&t[e+1].id==Q))return r.push({op:Q,name:n,expr:{op:le,name:t[e].txt}}),e;for(var s=function(){if(t[e].id!=le)return i.erro(t[e],"esperando nome de campo após '.'"),{op:le,name:""};if(t[e+1]&&t[e+1].id==ee){var r=[];return e=i.parseMethCall(e,t,r),r[0]}if(t[e+1]&&t[e+1].id==re){var a=t[e].txt,n=[];do{e++,t[e+1].id!=ae?e=i.parseExpressao(e+1,t,n,0):(i.erro(t[e],"esperando expressão que indica a posição do vetor, mas não encontrou nada"),n.push({op:Me,value:"0"})),e++,t[e].id!=ae&&i.erro(t[e],"esqueceu de fechar os colchetes no acesso ao vetor")}while(t[e+1]&&t[e+1].id==re);return{op:re,name:a,expr:n}}return{op:le,name:t[e].txt}},u=s(),c=u;t[e+1]&&t[e+1].id==Q;){e+=2;var l=s();c.next=l,c=l}return r.push({op:Q,name:n,expr:u}),e}if(Sr(e,t,le,ee))return this.parseMethCall(e,t,r);if(Sr(e,t,le,re)){var p=t[e].txt,h=[];do{t[e+2].id!=ae?e=this.parseExpressao(e+2,t,h,0):(this.erro(t[e],"esperando expressão que indica a posição do vetor, mas não encontrou nada"),h.push({op:Me,value:"0"}),e++),e++,t[e].id!=ae&&this.erro(t[e],"esqueceu de fechar os colchetes na declaração de vetor")}while(t[e+1].id==re);return r.push({op:re,name:p,expr:h}),e}return Sr(e,t,le)?(r.push({op:le,name:t[e].txt}),e):Sr(e,t,ee)?(e=this.parseExpressao(e+1,t,r,0),t[e+1].id!=te&&this.erro(t[e+1],"esqueceu de fechar os parênteses da expressão númerica"),e+1):(a=t[e].id)>=Me&&a<=Be?(r.push({op:t[e].id,value:t[e].txt}),e):(this.erro(t[e],"esperando por membro de expressao, remova isso"),e)}},{key:"parseMethCall",value:function(e,t,r){var a=t[e].txt,i=[];if(t[1+ ++e].id!=te){for(;e=this.parseExpressao(e+1,t,i),e++,!(t.length<=e||t[e].id!=W););t[e].id!=te&&(this.erro(t[e-1],"esqueceu de fechar os parênteses da chamada de função."),e--)}else e++;return r.push({op:ee,name:a,args:i}),e}},{key:"skipTo",value:function(e,t,r){for(var a=e;a<t.length;a++)if(t[a].id==r)return a;return-1}},{key:"extractBlock",value:function(e,t,r,a){var i=[],n=0;t[e].id!=r&&(this.erro(t[e],"esqueceu de abrir o bloco, antes de '"+t[e].txt+"'"),n+=1);for(var o=e;o<t.length;o++)if(t[o].id==r)++n>1&&i.push(t[o]);else if(t[o].id==a){if(--n<=0)return{block:i,index:o};i.push(t[o])}else i.push(t[o]);return this.erro(t[e],"não encontrou o fim do bloco iniciado com "+t[e].txt),{block:i,index:o}}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,xr(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Ar(e){return function(e){if(Array.isArray(e))return Rr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ir(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Or(a.key),a)}}function Lr(e,t,r){return t&&wr(e.prototype,t),r&&wr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Or(e){var t=function(e){if("object"!=jr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jr(t)?t:t+""}function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Dr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ir(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw n}}}}function Ir(e,t){if(e){if("string"==typeof e)return Rr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rr(e,t):void 0}}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Mr(e,t,r){if(e){if(e.op==Me)return parseInt(e.value,10);if(e.op==Pe)return parseFloat(e.value);if(e.op==Fe)return e.value;if(e.op==Ne)return e.value;if(e.op==Be)return"verdadeiro"===e.value||!0===e.value;if(e.op==le){if(t&&Object.prototype.hasOwnProperty.call(t,e.name))return t[e.name];if(r)return r(e.name)}}}function Pr(e,t){if(0==e.length)return t;if(1==e.length){for(var r=[],a=0;a<e[0];a++)r.push(t);return r}if(2==e.length){for(var i=[],n=0;n<e[0];n++){for(var o=[],s=0;s<e[1];s++)o.push(t);i.push(o)}return i}return[]}function Fr(e,t,r,a,i){if(r){for(var n={__struct__:!0},o=0;o<r.length;o++){var s=r[o];if(s.initExpr){var u=Mr(s.initExpr,n,i);if(void 0!==u){n[s.name]=u,s.isConst&&Object.defineProperty(n,s.name,{value:u,writable:!1,enumerable:!0});continue}}if(s.isArray&&s.arrayDimExpr){var c,l=[],p=Dr(s.arrayDimExpr);try{for(p.s();!(c=p.n()).done;){var h=Mr(c.value,n,i);void 0===h&&(h=0),l.push(h)}}catch(e){p.e(e)}finally{p.f()}var d=null;s.structType&&a&&(d=a(s.structType));var f=Pr(l,Fr(s.type,t,d,a,i));n[s.name]=f}else{var m=null;s.structType&&a&&(m=a(s.structType));var v=Fr(s.type,t,m,a,i);s.isConst?Object.defineProperty(n,s.name,{value:v,writable:!1,enumerable:!0}):n[s.name]=v}}return n}switch(e){case ve:return 0;case ye:return"\0";case be:return"";case ge:return 0;case _e:return!!t&&1;case re:return[]}}function Nr(e,t,r){if("object"===jr(e)&&null!==e&&"object"===jr(t)&&null!==t&&e.txt&&t.txt)return e.txt===t.txt;if("object"===jr(e)&&null!==e&&e.txt)return!("object"!==jr(t)||null===t||!t.txt)&&e.txt===t.txt;if("object"===jr(t)&&null!==t&&t.txt)return!("object"!==jr(e)||null===e||!e.txt)&&e.txt===t.txt;if(e==ke&&t>=xe&&t<=Ee&&(e=t),e==Ae&&t>=Se&&t<=Te&&(e=t),e==de&&(e=t),e>=xe&&e<=Te)return r==V&&e==t;switch(r){case V:case T:case 3:case w:case 4:case O:case 5:case j:case 6:case D:case 7:case I:case 38:case M:case 41:case z:case H:case G:case $:case Y:case J:switch(e){case ve:case ge:return t==ve||t==ge||(3==r||r==T)&&t==be;case be:return r==V&&t==be||3==r||r==T;case ye:return r==V&&t==ye||(3==r||r==T)&&t==be;case _e:return r==V&&t==_e||(3==r||r==T)&&t==be||(r==$||r==H||r==J||r==z||r==G||r==Y)&&t==_e}break;case 50:case X:return!0;case L:case k:case E:case A:case S:case C:return e==ve||e==ge;case U:case q:return e==_e&&t==_e;case N:return e==_e;case P:case 9:case R:case 8:return e==t&&e!=_e&&t!=_e||(e==ve||e==ge)&&(t==ve||t==ge);case F:case B:return e==t;case re:return t==ve}}function Br(e,t){return e==t?e:e==be||t==be||e==ye||t==ye?be:e==_e||t==_e?_e:e==ge||t==ge?ge:e}var Vr=function(){return Lr(function e(){Cr(this,e),this.maxVarCount=0,this.jsSafe=!0,this.funCalls=[]},[{key:"addFuncCall",value:function(e){this.funCalls.push(e),e.jsSafe||(this.jsSafe=!1)}}])}(),Ur=function(){return Lr(function e(t,r){Cr(this,e),this.parentScope=t,this.endJumps=r},[{key:"addJump",value:function(e){this.endJumps.push(e)}}])}(),zr=function(){return Lr(function e(t,r,a){Cr(this,e),this.parentScope=t,this.endJumps=r,this.casoJumps=a,this.casoJumpsIndex=0,this.contrario=!1},[{key:"addJump",value:function(e){this.endJumps.push(e)}},{key:"getNextCasoJump",value:function(){var e=this.casoJumps[this.casoJumpsIndex];return this.casoJumpsIndex++,e}},{key:"getContrarioJump",value:function(){return this.contrario=!0,this.casoJumps[this.casoJumps.length-1]}}])}(),Hr=function(){return Lr(function e(t,r,a,i){Cr(this,e),this.parentScope=t,this.funcScopeRef=a,this.vars={},this.startTokenIndex=i,this.endTokenIndex=-1,this.globalScope=r||!1,t?(this.varCount=t.varCount,this.globalCount=t.globalCount):(this.varCount=0,this.globalCount=0)},[{key:"onPop",value:function(e){this.endTokenIndex=e}},{key:"createVar",value:function(e,t){this.vars[e]=t,this.globalScope?this.globalCount++:this.varCount++,this.funcScopeRef&&this.varCount>this.funcScopeRef.maxVarCount&&(this.funcScopeRef.maxVarCount=this.varCount)}},{key:"getVar",value:function(e){var t=this.vars[e];return!t&&this.parentScope&&(t=this.parentScope.getVar(e)),t}},{key:"getVarByIndex",value:function(e,t){if(!t&&this.globalScope)return!1;if(t&&!this.globalScope)return!!this.parentScope&&this.parentScope.getVarByIndex(e,t);for(var r=!1,a=Object.keys(this.vars),i=0;i<a.length;i++){var n=this.vars[a[i]];if(n.index==e){r=n;break}}return!r&&this.parentScope&&(r=this.parentScope.getVarByIndex(e,t)),r}}])}(),qr=function(){return Lr(function e(t,r,a,i,n,o){Cr(this,e),this.codeTree=t,this.tokens=a,this.textInput=i,this.libraries=r,this.saida="",this.saida_div=n,this.functions=[],this.incluas=[],this.scope=!1,this.scopeList=[],this.loopScope=!1,this.enviarErro=o,this.estruturas=t.estruturas||[]},[{key:"erro",value:function(e){this.enviarErro?this.enviarErro(this.textInput,{index:this.lastIndex},e,"contexto"):console.log("ERRO NO COMPILADOR:",e)}},{key:"getFuncIndex",value:function(e,t){for(var r=0;r<this.functions.length;r++)if(this.functions[r].name==e){var a=this.functions[r].parameters;if(a.length!=t.length)continue;for(var i=!0,n=0;n<a.length;n++){var o=a[n].type;if(a[n].id==Er){var s=a[n].size_expr.length;1==s&&(o=Ce(o)),2==s&&(o=we(o))}if(!Nr(o,t[n],V)){i=!1;break}}if(!i)continue;return r}return this.erro("a função '"+e+"' com "+t.length+" argumentos e tipos:"+function(e){for(var t=De(e[0]),r=1;r<e.length;r++)t+=", ",t+=De(e[r]);return t}(t)+" não foi encontrada"),0}},{key:"checkFuncJsSafety",value:function(e,t,r){if(!e.jsSafe)return!1;if(e.name.startsWith("_unsafe_"))return!1;if(t>10)return e.jsSafe=!1,!1;if(e.parameters)for(var a=0;a<e.parameters.length;a++)if(e.parameters[a].byRef)return e.jsSafe=!1,!1;if(!e.funCalls||0==e.funCalls.length)return!0;for(var i=0;i<e.funCalls.length;i++){var n=Array.from(r);if(n.push(e.funCalls[i]),!this.checkFuncJsSafety(e.funCalls[i],t+1,n))return e.jsSafe=!1,!1}return!0}},{key:"pushScope",value:function(e,t,r){this.scope=new Hr(e,t,r,this.lastIndex),this.scopeList.push(this.scope)}},{key:"popScope",value:function(){this.scope.onPop(this.lastIndex),this.scope=this.scope.parentScope}},{key:"compile",value:function(){var e=this,t=this.codeTree.funcoes,r=this.codeTree.variaveis;this.incluas=this.codeTree.incluas,this.functions=[{name:"$undefined",bytecode:[1,"<Função desconhecida>",lt,et],varCount:0,parameters:[],type:de,jsSafe:!1},{name:"escreva",comment:'Escreve na saída de dados.<br>Pule linha com "\\n" ',bytecode:[Ze,0,lt,et],varCount:1,parameters:[],type:de,jsSafe:!0},{name:"limpa",bytecode:[yt,et],varCount:0,parameters:[],type:de,jsSafe:!0},{name:"leia$inteiro",bytecode:[pt,ht,tt,et],varCount:0,parameters:[],type:de,jsSafe:!1},{name:"leia$real",bytecode:[pt,dt,tt,et],varCount:0,parameters:[],type:de,jsSafe:!1},{name:"leia$cadeia",bytecode:[pt,ft,tt,et],varCount:0,parameters:[],type:de,jsSafe:!1},{name:"leia$caracter",bytecode:[pt,mt,tt,et],varCount:0,parameters:[],type:de,jsSafe:!1},{name:"leia$logico",bytecode:[pt,vt,tt,et],varCount:0,parameters:[],type:de,jsSafe:!1},{name:"sorteia",comment:"Sorteia um número dentro do intervalo <br/><br/>Exemplo: sorteia(0,10) sorteia números entre 1 e 10",bytecode:[Ze,0,Ze,1,ct,"Util","sorteia",2,tt,et],varCount:2,parameters:[{id:1,index:0,type:ve,isConst:!1,byRef:!1,expr:!1,name:"de"},{id:1,index:0,type:ve,isConst:!1,byRef:!1,expr:!1,name:"ate"}],type:ve,jsSafe:!0}],this.constValues={};for(var a=function(t){if(Object.prototype.hasOwnProperty.call(e.constValues,t))return e.constValues[t]},i=0;i<r.length;i++){var n=r[i];if(1==n.id&&n.isConst&&n.expr){var o=Mr(n.expr,null,a);void 0!==o&&(this.constValues[n.name]=o)}}this.lastIndex=0,this.pushScope(this.scope,!0,!1);var s={name:"#globalInit",bytecode:[],bytecodeIndexes:{},varCount:0,jsSafe:!1};this.funcScopeRef=new Vr,this.compileStatements(r,s),this.functions.push(s);for(var u=this.functions.length,c=0;c<t.length;c++)this.functions.push({name:t[c].name,parameters:t[c].parameters,type:t[c].type,bytecode:[],bytecodeIndexes:{},comment:t[c].comment,varCount:0,jsSafe:!0});for(var l=0;l<t.length;l++)this.funcScopeRef=new Vr,this.pushScope(this.scope,!1,this.funcScopeRef),this.compileStatements(t[l].parameters,this.functions[u+l]),this.compileStatements(t[l].statements,this.functions[u+l]),this.compileFunctionRet(this.functions[u+l],!1),this.popScope(),this.functions[u+l].varCount=this.funcScopeRef.maxVarCount,this.functions[u+l].jsSafe=this.funcScopeRef.jsSafe,this.functions[u+l].funCalls=this.funcScopeRef.funCalls;for(var p=0;p<this.functions.length;p++){var h=this.functions[p];h.jsSafe=this.checkFuncJsSafety(h,0,[h])}s.bytecode.push(Qe);var d=this.getFuncIndex("inicio",[]);s.bytecode.push(d),s.bytecode.push(0),this.compileFunctionRet(s,!1),this.globalCount=this.scope.varCount,this.popScope()}},{key:"replaceAllBy",value:function(e,t,r){for(var a=0;a<t.length;a++)e[t[a]]=r}},{key:"createVar",value:function(e,t,r,a,i,n,o,s){var u=this.scope.getVar(e);if(u)return this.erro("a variável '"+e+"' já foi declarada"),u;var c=r;return i&&(1==n?c=Ce(r):2==n?c=we(r):this.erro("Matrizes com 3 ou mais dimensões não suportados")),u={type:c,name:e,comment:t,index:this.scope.globalScope?this.scope.globalCount:this.scope.varCount,global:this.scope.globalScope,isConst:a,isArray:i,arrayType:i?r:de,arrayDim:n,structType:o,structDef:s},this.scope.createVar(e,u),u}},{key:"getVar",value:function(e){return this.scope.getVar(e)||(this.erro("não encontrou a variável '"+e+"', esqueceu de declará-la?"),this.createVar(e,!1,be,!1,!1,0))}},{key:"compileDeclArray",value:function(e,t,r,a,i){for(var n=0;n<e.length;n++)if(a<=1){var o=this.compileExpr(e[n],t,r.arrayType);this.tryConvertType(r.arrayType,o,t),Nr(r.arrayType,o,V)||this.erro("não pode colocar "+De(o)+" em uma variável do tipo "+De(r.arrayType));for(var s=0;s<i.length;s++)t.push(1),t.push(i[s]);t.push(1),t.push(n),t.push(r.global?st:it),t.push(r.index),t.push(r.arrayDim)}else i.push(n),this.compileDeclArray(e[n],t,r,a-1,i),i.pop()}},{key:"compileDeclStruct",value:function(e,t,r,a,i){for(var n=0;n<e.length&&n<a.length;n++){var o=a[n],s=e[n];t.push(r.global?at:Ze),t.push(r.index);for(var u=0;u<i.length;u++)t.push(ut),t.push("__struct__"),t.push(i[u]);if(t.push(1),t.push(o.name),o.isArray&&o.arrayDim>0){if(Array.isArray(s)){var c={global:r.global,index:r.index,arrayType:o.type,arrayDim:o.arrayDim,structType:o.structType,structDef:o.structDef};this.compileDeclStructArray(s,t,r,c,o,i,o.arrayDim,[]);continue}}else if(o.structType){if(Array.isArray(s)){var l=[].concat(Ar(i),[o.name]);this.compileDeclStruct(s,t,r,o.structDef,l);continue}}else{var p=this.compileExpr(s,t,o.type);this.tryConvertType(o.type,p,t),Nr(o.type,p,V)||this.erro("não pode colocar "+De(p)+" no campo '"+o.name+"' do tipo "+De(o.type))}t.push(ct),t.push("__struct__"),t.push("__set__"),t.push(3)}}},{key:"compileDeclStructArray",value:function(e,t,r,a,i,n,o,s){for(var u=0;u<e.length;u++)if(o<=1){t.push(r.global?at:Ze),t.push(r.index);for(var c=0;c<n.length;c++)t.push(ut),t.push("__struct__"),t.push(n[c]);t.push(ut),t.push("__struct__"),t.push(i.name);for(var l=0;l<s.length;l++)t.push(1),t.push(s[l]);t.push(1),t.push(u);var p=this.compileExpr(e[u],t,a.arrayType);this.tryConvertType(a.arrayType,p,t),Nr(a.arrayType,p,V)||this.erro("não pode colocar "+De(p)+" em um vetor do tipo "+De(a.arrayType)),t.push(r.global?st:it),t.push(-1),t.push(s.length+1)}else s.push(u),this.compileDeclStructArray(e[u],t,r,a,i,n,o-1,s),s.pop()}},{key:"compileFunctionRet",value:function(e,t){var r=e.bytecode;if(t){var a=this.compileExpr(t,r,-1);a==de&&this.erro("não usar esta expressão para retornar, pois ela não produz valor nenhum, arrume esta expressão."),Nr(e.type,a,V)||this.erro("não pode retornar "+De(a)+" nesta função, ela é do tipo "+De(e.type))}if(e.parameters)for(var i=0;i<e.parameters.length;i++)if(e.parameters[i].byRef&&1==e.parameters[i].id){var n=this.getVar(e.parameters[i].name);r.push(Ze),r.push(n.index),r.push(tt)}t?(r.push(tt),r.push(et)):r.push(et)}},{key:"shallowExtract",value:function(e,t){for(var r=[],a=0;a<e.length;a++)3==e[a].id?r=r.concat(this.shallowExtract(e[a].statements,t)):e[a].id==t&&r.push(e[a]);return r}},{key:"compileStatements",value:function(e,t){var r=this,a=t.bytecode,i=t.bytecodeIndexes;if(Array.isArray(e)&&Array.isArray(e.localEstructuras)){var n,o=Dr(e.localEstructuras);try{var s=function(){var e=n.value;r.estruturas.some(function(t){return t.name===e.name})||r.estruturas.push(e)};for(o.s();!(n=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}}for(var u=0;u<e.length;u++){var c=e[u];switch(this.lastIndex=c.index,i[a.length]=this.lastIndex,c.id){case Er:for(var l=c.size_expr.length,p=this.createVar(c.name,c.comment,c.type,c.isConst,!0,l,c.structType,c.structDef),h=0,d=0;d<l;d++)if(c.size_expr[d]){var f=this.compileExpr(c.size_expr[d],a,ve);this.tryConvertType(ve,f,a),h++}if(0!=h)h!=l&&this.erro("não especificou um dos tamanhos da matriz."),a.push(p.global?ot:48),a.push(p.index),a.push(h),a.push(Fr(p.arrayType,p.global));else if(c.expr&&13==c.expr.id&&0==h){for(var m=c.expr.expr,v=0;v<l;v++)v>0&&(m=m[0]),a.push(1),a.push(m.length);a.push(p.global?ot:48),a.push(p.index),a.push(l),a.push(Fr(p.arrayType,p.global))}if(c.expr)if(13==c.expr.id)this.compileDeclArray(c.expr.expr,a,p,l,[]);else if(2==c.expr.id){var y=this.compileExpr(c.expr.expr,a,p.type);Nr(p.type,y,V)||this.erro("não pode colocar "+De(y)+" em uma variável do tipo "+De(p.type)),a.push(p.global?rt:Ke),a.push(p.index)}break;case 1:var b=this.createVar(c.name,c.comment,c.type,c.isConst,!1,0,c.structType,c.structDef);if(c.expr)if(14===c.expr.id){var g=function(e){var t,a=Dr(r.estruturas);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.name===e)return i.fields}}catch(e){a.e(e)}finally{a.f()}return null},_=function(e){if(r.constValues&&Object.prototype.hasOwnProperty.call(r.constValues,e))return r.constValues[e]};a.push(1),a.push(Fr(b.type,b.global,b.structDef,g,_)),a.push(b.global?rt:Ke),a.push(b.index),this.compileDeclStruct(c.expr.expr,a,b,b.structDef,[])}else{var x=this.compileExpr(c.expr,a,c.type);this.tryConvertType(b.type,x,a),Nr(b.type,x,V)||this.erro("não pode colocar "+De(x)+" em uma variável do tipo "+De(b.type)),a.push(b.global?rt:Ke),a.push(b.index)}else if(b.structType&&!c.isParameter){var T=function(e){var t,a=Dr(r.estruturas);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.name===e)return i.fields}}catch(e){a.e(e)}finally{a.f()}return null},k=function(e){if(r.constValues&&Object.prototype.hasOwnProperty.call(r.constValues,e))return r.constValues[e]};a.push(1),a.push(Fr(b.type,b.global,b.structDef,T,k)),a.push(b.global?rt:Ke),a.push(b.index)}break;case 2:ne(c.expr.op)||c.expr.op==E||c.expr.op==A||c.expr.op==S||c.expr.op==C||c.expr.op==ee||c.expr.op==Q||this.erro("Esta expressão não pode ficar sozinha, talvez tenha esquecido um operador matemático"),this.compileExpr(c.expr,a,de)!=de&&a.push(2);break;case 3:this.pushScope(this.scope,!1,this.funcScopeRef),this.compileStatements(c.statements,t),this.popScope();break;case 4:var w=[];if(this.compileLogicalExpr(c.expr,a,!1,w),this.compileStatements(c.statements_true,t),c.statements_false){a.push(Xe);var L=a.length;a.push(0),this.replaceAllBy(a,w,a.length),this.compileStatements(c.statements_false,t),a[L]=a.length}else this.replaceAllBy(a,w,a.length);break;case 5:var O=[],j=a.length;this.compileLogicalExpr(c.expr,a,!1,O),this.loopScope=new Ur(this.loopScope,O),this.compileStatements(c.statements,t),this.loopScope=this.loopScope.parentScope,a.push(Xe),a.push(j),this.replaceAllBy(a,O,a.length);break;case 6:var D=[],I=[],R=a.length;this.loopScope=new Ur(this.loopScope,I),this.compileStatements(c.statements,t),this.loopScope=this.loopScope.parentScope,this.compileLogicalExpr(c.expr,a,D,!1),this.replaceAllBy(a,D,R),this.replaceAllBy(a,I,a.length);break;case 7:var M=[];this.pushScope(this.scope,!1,this.funcScopeRef),c.decl&&this.compileStatements(c.decl,t);var P=a.length;c.expr&&this.compileLogicalExpr(c.expr,a,!1,M),this.loopScope=new Ur(this.loopScope,M),this.compileStatements(c.statements,t),this.loopScope=this.loopScope.parentScope,c.inc&&this.compileExpr(c.inc,a,de)!=de&&a.push(2),a.push(Xe),a.push(P),this.replaceAllBy(a,M,a.length),this.popScope();break;case 8:this.loopScope?(a.push(Xe),a.push(0),this.loopScope.addJump(a.length-1)):this.erro("o 'pare' não faz sentido aqui, nenhum laço de repetição para parar.");break;case 9:this.compileFunctionRet(t,c.expr);break;case 11:var F=this.compileExpr(c.expr,a,-1);F==de&&this.erro("A expressão do escolha deveria retornar um valor...");var N=[],B=this.shallowExtract(c.statements,12);0==B.length&&this.erro("escolha-caso sem casos? não faz sentido algum.");for(var U=[],z=0;z<B.length;z++)B[z].contrario||(z<B.length-1&&a.push(We),this.compileExpr(B[z].expr,a,F)!=F&&this.erro("O caso deveria ter o mesmo tipo que o valor do escolha"),a.push(31),a.push(0),U.push(a.length-1));a.push(Xe),a.push(0),U.push(a.length-1),this.loopScope=new zr(this.loopScope,N,U),this.compileStatements(c.statements,t),this.loopScope.contrario||(a[this.loopScope.getContrarioJump()]=a.length),this.loopScope=this.loopScope.parentScope,this.replaceAllBy(a,N,a.length);break;case 12:this.loopScope&&this.loopScope instanceof zr?a[c.contrario?this.loopScope.getContrarioJump():this.loopScope.getNextCasoJump()]=a.length:this.erro("o 'caso' não faz sentido aqui, deve ser colocado em uma estrutura escolha.")}}}},{key:"tryConvertType",value:function(e,t,r){e==be?t==ve?r.push(43):t==ge?r.push(44):t==_e&&r.push(45):e==ve&&t==ge&&r.push(42)}},{key:"compileLogicalExpr",value:function(e,t,r,a){if(e.op!=U&&e.op!=q&&e.op!=R&&8!=e.op&&e.op!=P&&9!=e.op&&e.op!=B&&e.op!=F&&e.op!=N)return this.compileExpr(e,t,_e)==_e||!1===r&&!1===a||this.erro("esta deveria ser uma expressão lógica. lembre-se que '=' é diferente de '==' "),!1===r&&!1===a||(!1===a?(t.push(14),t.push(0),r.push(t.length-1)):!1===r?(t.push(15),t.push(0),a.push(t.length-1)):(t.push(14),t.push(0),t.push(Xe),t.push(0),r.push(t.length-3),a.push(t.length-1))),_e;var i=de,n=de;if(e.op==N)return i=this.compileLogicalExpr(e[0],t,a,r),!1===r&&!1===a&&t.push(39),_e;if(e.op==U||e.op==q){if(e.op==U){var o=[];if(!1!==a&&(o=a),i=this.compileLogicalExpr(e[0],t,!1,o),n=this.compileLogicalExpr(e[1],t,r,o),!1===r&&!1===a){var s=t.length+6,u=t.length+4;this.replaceAllBy(t,o,u),t.push(1),t.push(0),t.push(Xe),t.push(s),t.push(1),t.push(1)}else!1===a&&this.replaceAllBy(t,o,t.length)}if(e.op==q){var c=[];if(!1!==r&&(c=r),i=this.compileLogicalExpr(e[0],t,c,!1),n=this.compileLogicalExpr(e[1],t,c,a),!1===r&&!1===a){var l=t.length+6,p=t.length+4;this.replaceAllBy(t,c,p),t.push(1),t.push(1),t.push(Xe),t.push(l),t.push(1),t.push(0)}else!1===r&&this.replaceAllBy(t,c,t.length)}i==de||n==de?this.erro("um dos elementos da expressão não retorna nenhum valor."):Nr(i,n,e.op)||this.erro("não pode aplicar a operação "+_(e.op)+" com os tipos "+De(i)+" e "+De(n))}else{switch((i=this.compileExpr(e[0],t,-1))==de&&(t.push(1),t.push(0)),(n=this.compileExpr(e[1],t,-1))==de&&(t.push(1),t.push(0)),i==de||n==de?this.erro("um dos elementos da expressão não retorna nenhum valor."):Nr(i,n,e.op)||this.erro("não pode aplicar a operação "+_(e.op)+" com os tipos "+De(i)+" e "+De(n)),e.op){case R:t.push(33);break;case 8:t.push(34);break;case P:t.push(35);break;case 9:t.push(36);break;case F:t.push(31);break;case B:t.push(32);break;default:this.erro("ERRO CRÍTICO: operador incorreto:"+e.op)}if(!1===r&&!1===a){var h=t.length+7,d=t.length+5;t.push(d),t.push(1),t.push(0),t.push(Xe),t.push(h),t.push(1),t.push(1)}else!1===a?(t.push(t.length+3),t.push(Xe),t.push(0),r.push(t.length-1)):!1===r?(t.push(0),a.push(t.length-1)):(t.push(0),t.push(Xe),t.push(0),r.push(t.length-1),a.push(t.length-3))}return _e}},{key:"compileMemberAttrib",value:function(e,t,r){if(t.isArray&&e&&e.expr){for(var a=0;a<e.expr.length;a++){var i=this.compileExpr(e.expr[a],r,ve);i==de?(this.erro("a expressão que indica a posição do vetor não retorna valor nenhum"),r.push(1),r.push(0)):i!=ve&&this.erro("para acessar um vetor ou matriz, deve informar um valor numérico do tipo inteiro.")}r.push(t.global?st:it),r.push(t.index),r.push(e.expr.length),e.expr.length!=t.arrayDim&&this.erro("seu vetor é de "+t.arrayDim+" dimensões, porém indexou "+e.expr.length+" dimensões.")}else r.push(t.global?rt:Ke),r.push(t.index);t.isConst&&this.erro("não pode alterar o valor da constante '"+t.name+"'")}},{key:"compileExpr",value:function(e,t,r){var a=this;if(!e)return de;if(e.op==U||e.op==q||e.op==R||8==e.op||e.op==P||9==e.op||e.op==B||e.op==F||e.op==N)return this.compileLogicalExpr(e,t,!1,!1);if(2==e.length){var i=de,n=de;if(e.op==V){if(e[0].op==Q){var o=this.scope.getVar(e[0].name);if(o&&o.structType){var s,u=!1,c=null,l=!1,p=null;if(e[0].expr.op==le)s=e[0].expr.name;else{if(e[0].expr.op!=re)return this.erro("atribuição inválida ao membro da estrutura"),de;s=e[0].expr.name,u=!0,c=e[0].expr.expr,e[0].expr.next&&(l=!0,p=e[0].expr.next)}var h=null;if(o.structDef)for(var d=0;d<o.structDef.length;d++)if(o.structDef[d].name===s){h=o.structDef[d];break}if(!h)return this.erro("a estrutura não tem o campo '"+s+"'"),i;var f=h.type;if(u){if(l){var m=h.type;"number"==typeof h.type&&(1==c.length?m=Oe(h.type):2==c.length&&(m=Oe(Oe(h.type))));var v=null;if(m&&m.id==le)for(var y=0;y<this.estruturas.length;y++)if(this.estruturas[y].name===m.txt){v=this.estruturas[y].fields;break}if(!v)return this.erro("tipo intermediário não é uma estrutura válida para atribuição encadeada"),de;for(var b=p.name,g=p.op==re,x=g?p.expr:null,W=null,K=0;K<v.length;K++)if(v[K].name===b){W=v[K];break}if(!W)return this.erro("a estrutura intermediária não tem o campo '"+b+"'"),de;f=W.type,g&&(1==x.length?f=Oe(W.type):2==x.length&&(f=Oe(Oe(W.type)))),t.push(o.global?at:Ze),t.push(o.index),t.push(ut),t.push("__struct__"),t.push(s);for(var Z=0;Z<c.length;Z++)this.compileExpr(c[Z],t,ve);if(t.push(nt),t.push(-1),t.push(c.length),g){t.push(ut),t.push("__struct__"),t.push(b);for(var te=0;te<x.length;te++)this.compileExpr(x[te],t,ve);return n=this.compileExpr(e[1],t,f),this.tryConvertType(f,n,t),Nr(f,n,e.op)||this.erro("não pode colocar "+De(n)+" em uma variável do tipo "+De(f)),t.push(it),t.push(-1),t.push(x.length),i=f,r!=de?f:de}return i=f,t.push(1),t.push(b),n=this.compileExpr(e[1],t,i),this.tryConvertType(i,n,t),Nr(i,n,e.op)||this.erro("não pode colocar "+De(n)+" em uma variável do tipo "+De(i)),t.push(ct),t.push("__struct__"),t.push("__set__"),t.push(3),r!=de?f:de}1==c.length?f=Oe(h.type):2==c.length&&(f=Oe(Oe(h.type))),t.push(o.global?at:Ze),t.push(o.index),t.push(ut),t.push("__struct__"),t.push(s);for(var ae=0;ae<c.length;ae++)this.compileExpr(c[ae],t,ve);return n=this.compileExpr(e[1],t,f),this.tryConvertType(f,n,t),Nr(f,n,e.op)||this.erro("não pode colocar "+De(n)+" em uma variável do tipo "+De(f)),t.push(it),t.push(-1),t.push(c.length),i=f,r!=de?f:de}return i=f,t.push(o.global?at:Ze),t.push(o.index),t.push(1),t.push(s),n=this.compileExpr(e[1],t,i),this.tryConvertType(i,n,t),Nr(i,n,e.op)||this.erro("não pode colocar "+De(n)+" em uma variável do tipo "+De(i)),t.push(ct),t.push("__struct__"),t.push("__set__"),t.push(3),r!=de?(t.push(o.global?at:Ze),t.push(o.index),t.push(ut),t.push("__struct__"),t.push(s),i):de}}var ie=this.getVar(e[0].name);return i=ie.isArray&&e[0].expr?ie.arrayType:ie.type,n=this.compileExpr(e[1],t,i),this.tryConvertType(i,n,t),r!=de&&t.push(We),this.compileMemberAttrib(e[0],ie,t),Nr(i,n,e.op)||this.erro("não pode colocar "+De(n)+" em uma variável do tipo "+De(i)),r!=de?i:de}var oe=-1;ne(e.op)&&(oe=e[0].type),(i=this.compileExpr(e[0],t,-1))==de&&(t.push(1),t.push(0)),(n=this.compileExpr(e[1],t,oe))==de&&(t.push(1),t.push(0)),i==de||n==de?this.erro("um dos elementos da expressão não retorna nenhum valor."):Nr(i,n,e.op)||this.erro("não pode aplicar a operação "+_(e.op)+" com os tipos "+De(i)+" e "+De(n));var se=Br(i,n);if(se==i||se!=ve&&se!=be||(t.push(47),this.tryConvertType(se,i,t),t.push(47)),se!=n&&this.tryConvertType(se,n,t),se!=ve||6!=e.op&&e.op!=j)switch(e.op){case T:case 3:t.push(3);break;case w:case 4:t.push(4);break;case O:case 5:t.push(5);break;case j:case 6:t.push(6);break;case D:case 7:t.push(7);break;case I:case 38:t.push(27);break;case M:case 41:t.push(26);break;case z:case H:i==_e?t.push(30):t.push(29);break;case G:case $:i==_e?t.push(29):t.push(30);break;case Y:case J:t.push(28);break;default:this.erro("o operador "+_(e.op)+" não pode ter dois operandos."),t.push(3)}else t.push(8);if(ne(e.op)){var ue=this.getVar(e[0].name);return r!=de&&t.push(We),this.compileMemberAttrib(e[0],ue,t),r!=de?i:de}return se}switch(e.op){case k:return this.compileExpr(e[0],t,-1);case L:var ce=this.compileExpr(e[0],t,-1);return t.push(37),ce;case E:case S:var pe=this.getVar(e[0].name),he=this.compileExpr(e[0],t,-1);return e.op==E&&r!=de&&t.push(We),t.push(1),t.push(1),t.push(3),e.op==S&&r!=de&&t.push(We),this.compileMemberAttrib(e[0],pe,t),r!=de?he:de;case A:case C:var fe=this.getVar(e[0].name),me=this.compileExpr(e[0],t,-1);return e.op==A&&r!=de&&t.push(We),t.push(1),t.push(1),t.push(4),e.op==C&&r!=de&&t.push(We),this.compileMemberAttrib(e[0],fe,t),r!=de?me:de;case X:var xe=this.compileExpr(e[0],t,-1);return t.push(38),xe;case ee:var Ee=e.args;if("escreva"==e.name){for(var Se=0;Se<Ee.length;Se++){var Te=this.compileExpr(Ee[Se],t,-1);this.tryConvertType(be,Te,t),t.push(Qe);var ke=this.getFuncIndex(e.name,[]);t.push(ke),t.push(1)}return de}if("leia"==e.name){if(this.funcScopeRef.jsSafe=!1,0==Ee.length)return this.erro("o leia deve receber pelo menos uma variável como argumento"),de;for(var Ae=0;Ae<Ee.length;Ae++){var Ce=Ee[Ae],we=de;if(Ce.op==le){var Le=this.getVar(Ce.name);we=Le.isArray?Le.arrayType:Le.type,t.push(Le.global?at:Ze),t.push(Le.index),t.push(Qe),t.push(this.getFuncIndex("leia$"+De(we),[])),t.push(0),this.compileMemberAttrib(Ce,Le,t)}else if(Ce.op==re){var je=this.getVar(Ce.name);we=je.arrayType,t.push(Qe),t.push(this.getFuncIndex("leia$"+De(we),[])),t.push(0),this.compileMemberAttrib(Ce,je,t)}else if(Ce.op==Q&&Ce.expr.op==re&&Ce.expr.next){var Ie=this.scope.getVar(Ce.name),Re=null;if(Ie.structDef)for(var Ve=0;Ve<Ie.structDef.length;Ve++)if(Ie.structDef[Ve].name===Ce.expr.name){Re=Ie.structDef[Ve];break}if(Re){var Ue=Re.structDef||null;if(!Ue){var ze=Re.type;if("number"==typeof ze&&(ze=Oe(ze)),ze&&ze.id==le)for(var He=0;He<this.estruturas.length;He++)if(this.estruturas[He].name===ze.txt){Ue=this.estruturas[He].fields;break}}if(Ue){for(var qe=Ce.expr.next.name,Ge=null,$e=0;$e<Ue.length;$e++)if(Ue[$e].name===qe){Ge=Ue[$e];break}Ge&&(we=Ge.type,Ce.expr.next.op==re&&"number"==typeof we&&(we=Oe(we)))}}t.push(Ie.global?at:Ze),t.push(Ie.index),t.push(ut),t.push("__struct__"),t.push(Ce.expr.name);for(var Ye=0;Ye<Ce.expr.expr.length;Ye++)this.compileExpr(Ce.expr.expr[Ye],t,ve);if(t.push(nt),t.push(-1),t.push(Ce.expr.expr.length),Ce.expr.next.op==re){t.push(ut),t.push("__struct__"),t.push(Ce.expr.next.name);for(var Je=0;Je<Ce.expr.next.expr.length;Je++)this.compileExpr(Ce.expr.next.expr[Je],t,ve);t.push(Qe),t.push(this.getFuncIndex("leia$"+De(we),[])),t.push(0),t.push(it),t.push(-1),t.push(Ce.expr.next.expr.length)}else t.push(1),t.push(Ce.expr.next.name),t.push(Qe),t.push(this.getFuncIndex("leia$"+De(we),[])),t.push(0),t.push(ct),t.push("__struct__"),t.push("__set__"),t.push(3)}else if(Ce.op==Q&&Ce.expr.op==re){var Xe=this.scope.getVar(Ce.name),Ke=null;if(Xe.structDef)for(var et=0;et<Xe.structDef.length;et++)if(Xe.structDef[et].name===Ce.expr.name){Ke=Xe.structDef[et];break}we=Ke&&"number"==typeof Ke.type?Oe(Ke.type):Ke?Ke.type:de,t.push(Xe.global?at:Ze),t.push(Xe.index),t.push(ut),t.push("__struct__"),t.push(Ce.expr.name);for(var tt=0;tt<Ce.expr.expr.length;tt++)this.compileExpr(Ce.expr.expr[tt],t,ve);t.push(Qe),t.push(this.getFuncIndex("leia$"+De(we),[])),t.push(0),t.push(it),t.push(-1),t.push(Ce.expr.expr.length)}else if(Ce.op==Q){var rt=this.scope.getVar(Ce.name),ot=null;if(rt.structDef)for(var st=0;st<rt.structDef.length;st++)if(rt.structDef[st].name===Ce.expr.name){ot=rt.structDef[st];break}we=ot?ot.type:de,t.push(rt.global?at:Ze),t.push(rt.index),t.push(1),t.push(Ce.expr.name),t.push(Qe),t.push(this.getFuncIndex("leia$"+De(we),[])),t.push(0),t.push(ct),t.push("__struct__"),t.push("__set__"),t.push(3)}}return de}for(var lt=e.name,pt=[],ht=0;ht<Ee.length;ht++)pt.push(this.compileExpr(Ee[ht],t,-1));t.push(Qe);var dt=this.getFuncIndex(lt,pt),ft=this.functions[dt];if(this.funcScopeRef.addFuncCall(ft),t.push(dt),t.push(Ee.length),0!=dt)for(var mt=Ee.length-1;mt>=0;mt--)if(ft.parameters[mt].byRef&&ft.parameters[mt].id!=Er){var vt=this.getVar(Ee[mt].name);this.compileMemberAttrib(Ee[mt],vt,t)}return ft.type;case le:var yt=this.getVar(e.name);return t.push(yt.global?at:Ze),t.push(yt.index),yt.type;case Me:return t.push(1),t.push(this.baseParseInt(e.value)),ve;case Pe:return t.push(1),t.push(parseFloat(e.value)),ge;case Fe:return t.push(1),t.push(e.value),be;case Ne:return t.push(1),t.push(e.value),ye;case Be:return t.push(1),t.push("verdadeiro"==e.value?0:1),_e;case re:for(var bt=0;bt<e.expr.length;bt++){var gt=this.compileExpr(e.expr[bt],t,ve);gt==de?(this.erro("a expressão que indica a posição do vetor não retorna valor nenhum"),t.push(1),t.push(0)):gt!=ve&&this.erro("para acessar um vetor ou matriz, deve informar um valor numérico do tipo inteiro.")}var _t=this.getVar(e.name);return t.push(_t.global?53:nt),t.push(_t.index),t.push(e.expr.length),e.expr.length!=_t.arrayDim&&this.erro("sua matriz é de "+_t.arrayDim+" dimensões, porém indexou "+e.expr.length+" dimensões."),_t.arrayType;case Q:var xt=this.scope.getVar(e.name);if(xt&&xt.structType){var Et=function(e){if(e&&e.id==le)for(var t=0;t<a.estruturas.length;t++)if(a.estruturas[t].name===e.txt)return a.estruturas[t].fields;return null},St=function(e,t){if(!e)return null;for(var r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null};t.push(xt.global?at:Ze),t.push(xt.index);for(var Tt=xt.structDef,kt=xt.type,At=e.expr;At;){if(At.op!=le&&At.op!=re)return this.erro("acesso inválido ao membro da estrutura"),de;var Ct=At.name,wt=St(Tt,Ct);if(!wt)return this.erro("a estrutura não tem o campo '"+Ct+"'"),de;if(t.push(ut),t.push("__struct__"),t.push(Ct),kt=wt.type,At.op==re){for(var Lt=0;Lt<At.expr.length;Lt++)this.compileExpr(At.expr[Lt],t,ve);if(t.push(nt),t.push(-1),t.push(At.expr.length),"number"==typeof kt)for(var Ot=0;Ot<At.expr.length;Ot++)kt=Oe(kt)}if(At.next&&!(Tt=Et(kt)))return this.erro("tipo intermediário não é uma estrutura válida para acesso encadeado"),de;At=At.next}return kt}for(var jt=e.name,Dt=e.expr,It=!1,Rt=0;Rt<this.incluas.length;Rt++)if(this.incluas[Rt].name==jt||this.incluas[Rt].alias==jt){jt=this.incluas[Rt].name,It=!0;break}It||this.erro("a biblioteca "+jt+" não foi inclusa no programa");var Mt=this.libraries[jt];if(!Mt)return this.erro("a biblioteca "+jt+" não existe."),de;if(Mt.members[Dt.name]||this.erro("a biblioteca "+jt+" não tem nenhuma variável ou função '"+Dt.name+"'"),Mt.members[Dt.name].id==le&&Dt.op==ee&&this.erro("está usando a variável '"+Dt.name+"' como se fosse uma função."),Mt.members[Dt.name].id==ee&&Dt.op==le&&this.erro("está usando a fução '"+Dt.name+"' como se fosse uma variável."),Dt.op==le)t.push(ut),t.push(jt),t.push(Dt.name);else if(Dt.op==ee){var Pt=Mt.members[Dt.name].parameters;Pt.length!=Dt.args.length&&this.erro("a função "+Dt.name+" espera "+Pt.length+" argumentos, foram passados apenas "+Dt.args.length);for(var Ft=0;Ft<Dt.args.length;Ft++){var Nt=this.compileExpr(Dt.args[Ft],t,Pt[Ft].type);Nr(Pt[Ft].type,Nt,V)||this.erro("a função "+Dt.name+" esperava o tipo "+De(Pt[Ft].type)+" no parâmetro "+Pt[Ft].name+" porém foi fornecido o tipo "+De(Nt))}Mt.members[Dt.name].jsSafe||(this.funcScopeRef.jsSafe=!1),t.push(ct),t.push(jt),t.push(Dt.name),t.push(Dt.args.length)}return Mt.members[Dt.name].type}}},{key:"baseParseInt",value:function(e){return e=e.toUpperCase(),/^[1-9][0-9]*$/.test(e)||"0"==e?parseInt(e,10):/^0[0-9]+$/.test(e)?parseInt(e.substring(1,e.length),10):/^0X[0-9A-F]+$/.test(e)?parseInt(e.substring(2,e.length),16):/^0B[01]+$/.test(e)?parseInt(e.substring(2,e.length),2):(this.erro("número inteiro escrito em formato desconhecido:'"+e+"'"),parseInt(e))}}])}();function Gr(e){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(e)}function $r(e){var t=function(e){if("object"!=Gr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gr(t)?t:t+""}function Yr(e,t){switch(e){case ve:return"0";case ye:return'"\\0"';case be:return'""';case ge:return"0.0";case _e:return t?"1":"false";case re:return"[]"}}function Jr(e){switch(e){case ve:return"i";case ye:return"c";case be:return"s";case ge:return"f";case _e:return"b";case xe:return"vi";case 102:return"vc";case 103:return"vs";case 104:return"vf";case Ee:return"vb";case Se:return"mi";case 107:return"mc";case 108:return"ms";case 109:return"mf";case Te:return"mb";case ke:return"v";case Ae:return"m"}}var Xr=function(){return e=function e(t,r,a,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.codeTree=t,this.tokens=a,this.textInput=i,this.libraries=r,this.saida="",this.incluas=[],this.scope=!1,this.functions=[],this.currentFunctionRetType=de,this.globalPrefix="JS_",this.isnewLine=!0,this.gen_output="",this.tabs="",this.saved_gen_output=[],this.enviarErro=n},t=[{key:"erro",value:function(e){this.enviarErro?this.enviarErro(this.textInput,{index:this.lastIndex},e,"exec"):console.log("ERRO NO JSGENERATOR:",e)}},{key:"save_gen",value:function(){this.saved_gen_output.push({gen_output:this.gen_output,isnewLine:this.isnewLine,tabs:this.tabs}),this.isnewLine=!0,this.gen_output="",this.tabs=""}},{key:"load_gen",value:function(){var e=this.gen_output;if(this.saved_gen_output.length>0){var t=this.saved_gen_output.pop();this.gen_output=t.gen_output,this.isnewLine=t.isnewLine,this.tabs=t.tabs}else this.isnewLine=!0,this.gen_output="",this.tabs="";return e}},{key:"gen",value:function(){this.isnewLine?(this.gen_output+=this.tabs,this.isnewLine=!1):this.gen_output+=" ";for(var e=0;e<arguments.length;e++)0!=e&&(this.gen_output+=" "),this.gen_output+=e<0||arguments.length<=e?void 0:arguments[e]}},{key:"genln",value:function(){this.isnewLine?(this.gen_output+=this.tabs,this.isnewLine=!1):this.gen_output+=" ";for(var e=0;e<arguments.length;e++)0!=e&&(this.gen_output+=" "),this.gen_output+=e<0||arguments.length<=e?void 0:arguments[e];this.gen_output+="\n",this.isnewLine=!0}},{key:"increaseTabLevel",value:function(){this.tabs+="\t"}},{key:"decreaseTabLevel",value:function(){this.tabs=this.tabs.substring(0,this.tabs.length-1)}},{key:"getFuncOverloadsTypeString",value:function(e){for(var t=e.name,r=e.parameters,a=0;a<r.length;a++)if(r[a].id==Er){var i=r[a].size_expr.length;t+=Jr(Le(r[a].type,i))}else t+=Jr(r[a].type);return t}},{key:"compile",value:function(){var e=this.codeTree.funcoes,t=this.codeTree.variaveis;this.incluas=this.codeTree.incluas,this.scope=new Hr(this.scope,!0,!1),this.functions=[{name:"$undefined",parameters:[],type:de},{name:"escreva",jsName:"escreva",parameters:[],type:de},{name:"limpa",jsName:"limpa",parameters:[],type:de},{name:"leia$inteiro",parameters:[],type:de},{name:"leia$real",parameters:[],type:de},{name:"leia$cadeia",parameters:[],type:de},{name:"leia$caracter",parameters:[],type:de},{name:"leia$logico",parameters:[],type:de},{name:"sorteia",jsName:"sorteia",parameters:[{id:1,index:0,type:ve,isConst:!1,byRef:!1,expr:!1,name:"a"},{id:1,index:0,type:ve,isConst:!1,byRef:!1,expr:!1,name:"a"}],type:ve}],window.escreva=Zt,window.limpa=er,window.leia=tr,window.sorteia=rr,window.recursiveDeclareArray=Kt,window.VM_i2s=or,window.VM_f2s=sr,window.VM_realbool2s=ur,window.VM_libraries=this.libraries,window.VM_globals=Bt,window.JS_leia$inteiro=function(){var e=tr();if(!e||0===e.length)throw"Deve inserir um número inteiro";if(!/^[\+\-]?\d+$/.test(e))throw"Deve inserir um número inteiro";return parseInt(e)},window.JS_leia$real=function(){var e=tr();if(!e||0===e.length)throw"Deve inserir um número";var t=parseFloat(e);if(isNaN(t)||!isFinite(t))throw"Deve inserir um número";return t},window.JS_leia$cadeia=function(){return tr()},window.JS_leia$caracter=function(){var e=tr();if(!e||0===e.length)throw"Deve inserir um caractere";return e[0]},window.JS_leia$logico=function(){var e=tr();if("verdadeiro"===e)return!0;if("falso"===e)return!1;throw"Deve inserir verdadeiro ou falso"};var r={name:"#globalInit",overloaded:!0,overloadedName:"globalInit"};this.currentFunctionRetType=de,this.genln("function","()"),this.genln("{"),this.increaseTabLevel(),this.compileStatements(t),this.decreaseTabLevel(),this.genln("}");var a=this.load_gen();r.jsName=this.globalPrefix+r.overloadedName,console.log(r.jsName+" = "+a),window[r.jsName]=new Function("return "+a)(),this.functions.push(r);for(var i=0;i<e.length;i++){for(var n={name:e[i].name,parameters:e[i].parameters,type:e[i].type,statements:e[i].statements,overloaded:!1,overloadedName:!1},o=0;o<e.length;o++)i!=o&&n.name==e[o].name&&(n.overloaded=!0,n.overloadedName=this.getFuncOverloadsTypeString(n));this.functions.push(n)}for(var s=0;s<this.functions.length;s++){var u=this.functions[s];if(u.statements){var c=u.name,l=u.parameters;u.overloaded&&(c=u.overloadedName),this.currentFunctionRetType=u.type,this.gen("function","("),this.scope=new Hr(this.scope,!1,!1);for(var p=0;p<l.length;p++){if(0!=p&&this.gen(","),l[p].id==Er){var h=l[p].size_expr.length;this.createVar(l[p].name,l[p].type,l[p].isConst,!0,h)}else this.createVar(l[p].name,l[p].type,l[p].isConst,!1);this.gen(l[p].name)}this.genln(")"),this.compileStatements(u.statements),this.scope=this.scope.parentScope,this.genln();var d=this.load_gen();u.jsName=this.globalPrefix+c,console.log(u.jsName+" = "+d),window[u.jsName]=new Function("return "+d)()}}this.scope=this.scope.parentScope}},{key:"getFuncIndex",value:function(e,t){for(var r=0;r<this.functions.length;r++)if(this.functions[r].name==e){var a=this.functions[r].parameters;if(a.length!=t.length)continue;for(var i=!0,n=0;n<a.length;n++){var o=a[n].type;if(a[n].id==Er){var s=a[n].size_expr.length;1==s&&(o=Ce(o)),2==s&&(o=we(o))}if(!Nr(o,t[n],V)){i=!1;break}}if(!i)continue;return r}return this.erro("a função '"+e+"' com "+t.length+" argumentos e tipos:"+t+" não foi encontrada"),0}},{key:"createVar",value:function(e,t,r,a,i){var n=this.scope.getVar(e);if(n)return this.erro("a variável '"+e+"' já foi declarada"),n;var o=t;return a&&(1==i?o=Ce(t):2==i?o=we(t):this.erro("Matrizes com 3 ou mais dimensões não suportados:"+i)),n={type:o,name:e,index:this.scope.globalScope?this.scope.globalCount:this.scope.varCount,global:this.scope.globalScope,isConst:r,isArray:a,arrayType:a?t:de,arrayDim:i},this.scope.createVar(e,n),n}},{key:"getVar",value:function(e){return this.scope.getVar(e)||(this.erro("não encontrou a variável '"+e+"', esqueceu de declará-la?"),this.createVar(e,be,!1,!1))}},{key:"compileDeclArray",value:function(e,t,r){for(var a=0;a<e.length;a++)0!=a&&this.gen(","),r<=1?this.compileExpr(e[a],t):this.compileDeclArray(e[a],t,r-1)}},{key:"compileForStatements",value:function(e){for(var t=0;t<e.length;t++){var r=e[t];switch(r.id){case 1:this.createVar(r.name,r.type,r.isConst,!1),this.gen("var",r.name),r.expr&&(this.gen("="),this.compileExpr(r.expr,r.type));break;case 2:this.compileExpr(r.expr,de)}}}},{key:"compileStatements",value:function(e){for(var t=0;t<e.length;t++){var r=e[t];switch(this.lastIndex=r.index,r.id){case Er:var a=r.size_expr.length,i=this.createVar(r.name,r.type,r.isConst,!0,a);if(i.global?this.gen("VM_globals()["+i.index+"] ="):this.gen("var",r.name,"="),r.expr)13==r.expr.id?(this.gen("["),this.compileDeclArray(r.expr.expr,r.type,a),this.genln("];")):2==r.expr.id&&(this.compileExpr(r.expr.expr,i.type),this.genln(";"));else{this.gen("recursiveDeclareArray([");for(var n=0;n<r.size_expr.length;n++)0!=n&&this.gen(","),this.compileExpr(r.size_expr[n],ve);this.genln("],"+Yr(r.type,i.global)+",0);")}break;case 1:var o=this.createVar(r.name,r.type,r.isConst,!1);o.global?this.gen("VM_globals()["+o.index+"]"):this.gen("var",r.name),r.expr?(this.gen("="),this.compileExpr(r.expr,r.type,!1,o.global),this.genln(";")):this.genln("= "+Yr(o.type,o.global)+";");break;case 2:this.compileExpr(r.expr,de),this.genln(";");break;case 3:this.genln("{"),this.scope=new Hr(this.scope,!1,!1),this.increaseTabLevel(),this.compileStatements(r.statements),this.scope=this.scope.parentScope,this.decreaseTabLevel(),this.genln("}");break;case 4:this.gen("if("),this.compileExpr(r.expr,_e),this.genln(")"),this.compileStatements(r.statements_true),r.statements_false&&(this.genln("else"),this.compileStatements(r.statements_false));break;case 5:this.gen("while("),this.compileExpr(r.expr,_e),this.genln(")"),this.compileStatements(r.statements);break;case 6:this.genln("do"),this.compileStatements(r.statements),this.gen("while("),this.compileExpr(r.expr,_e),this.genln(");");break;case 7:this.gen("for("),this.scope=new Hr(this.scope,!1,!1),r.decl&&this.compileForStatements(r.decl),this.gen(";"),r.expr&&this.compileExpr(r.expr,_e),this.gen(";"),r.inc&&this.compileExpr(r.inc,de),this.genln(")"),this.compileStatements(r.statements),this.scope=this.scope.parentScope;break;case 8:this.genln("break;");break;case 9:this.gen("return"),this.compileExpr(r.expr,this.currentFunctionRetType),this.genln(";");break;case 11:this.gen("switch("),this.compileExpr(r.expr,-1),this.genln(")"),this.compileStatements(r.statements);break;case 12:r.contrario?this.gen("default"):(this.gen("case"),this.compileExpr(r.expr,-1)),this.genln(":")}}}},{key:"tryConvertType",value:function(e,t,r){return e==be?t==ve?"VM_i2s("+r+")":t==ge?"VM_f2s("+r+")":t==_e?"VM_realbool2s("+r+")":r:e==ve&&t==ge?"Math.trunc("+r+")":r}},{key:"compileExpr",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)return de;var i=de;if(this.save_gen(),2==e.length){var n=ie(e[0].op)&&oe(e[0].op)<oe(e.op),o=ie(e[1].op)&&oe(e[1].op)<=oe(e.op);this.save_gen(),n&&this.gen("(");var s=this.compileExpr(e[0],-1,!0);n&&this.gen(")");var u=this.load_gen();this.save_gen(),o&&this.gen("(");var c=this.compileExpr(e[1],-1);o&&this.gen(")");var l=this.load_gen();if(i=Br(s,c),e.op==U||e.op==q||e.op==R||8==e.op||e.op==P||9==e.op||e.op==B||e.op==F)i=_e;else if(ne(e.op)){var p=this.getVar(e[0].name);i=s,l=s==_e&&p.global?"("+l+"? 0 : 1)":this.tryConvertType(s,c,l)}else i==be&&(u=this.tryConvertType(i,s,u),l=this.tryConvertType(i,c,l));var h=u;e.op==U?h+=" && ":e.op==q?h+=" || ":h+=" "+_(e.op)+" ",h+=l,i==ve&&6==e.op&&(h=this.tryConvertType(ve,ge,h)),i==ve&&e.op==j?this.gen(u," = ",this.tryConvertType(ve,ge,h)):this.gen(h)}else switch(e.op){case N:this.gen("!(");var d=this.compileExpr(e[0],-1);this.gen(")"),i=d;break;case k:i=this.compileExpr(e[0],-1);break;case L:this.gen("(-");var f=this.compileExpr(e[0],-1);this.gen(")"),i=f;break;case E:var m=this.compileExpr(e[0],-1);this.gen("++"),i=m;break;case S:this.gen("++"),i=this.compileExpr(e[0],-1);break;case A:var v=this.compileExpr(e[0],-1);this.gen("--"),i=v;break;case C:this.gen("--"),i=this.compileExpr(e[0],-1);break;case X:this.gen("~(");var y=this.compileExpr(e[0],-1);this.gen(")"),i=y;break;case ee:for(var b=e.args,g=e.name,x=[],T=[],w=0;w<b.length;w++)this.save_gen(),x.push(this.compileExpr(b[w],-1)),T.push(this.load_gen());var O=de,D=[];if("escreva"==g)for(var I=0;I<b.length;I++)D.push(be);else if("sorteia"==g)D=[ve,ve],O=ve;else{if("leia"==g){for(var M=0;M<b.length;M++){var V=this.getVar(b[M].name),z="leia$";V.isArray?z+=De(V.arrayType):z+=De(V.type),z=this.globalPrefix+z,this.gen(b[M].name+" = "+z+"()"),M<b.length-1&&this.gen("; ")}i=de;break}var H=this.getFuncIndex(g,x),G=this.functions[H];O=G.type,g=G.overloaded?G.overloadedName:G.name,g=this.globalPrefix+g}this.gen(g+"(");for(var $=0;$<b.length;$++)0!=$&&this.gen(","),this.gen(this.tryConvertType(D[$],x[$],T[$]));this.gen(")"),i=O;break;case le:var Y=this.getVar(e.name);Y.global?r||Y.type!=_e?this.gen("VM_globals()["+Y.index+"]"):this.gen("(VM_globals()["+Y.index+"] == 0)"):this.gen(e.name),i=Y.type;break;case Me:this.gen(this.baseParseInt(e.value)),i=ve;break;case Pe:this.gen(parseFloat(e.value)),i=ge;break;case Fe:this.gen('"'+Ue(e.value)+'"'),i=be;break;case Ne:this.gen('"'+Ue(e.value)+'"'),i=ye;break;case Be:this.gen("verdadeiro"==e.value?"true":"false"),i=_e;break;case re:var J=this.getVar(e.name);J.global?r||J.arrayType!=_e?this.gen("VM_globals()["+J.index+"]"):this.gen("(VM_globals()["+J.index+"]"):this.gen(e.name);for(var W=0;W<e.expr.length;W++)this.gen("["),this.compileExpr(e.expr[W],ve),this.gen("]");J.global&&!r&&J.arrayType==_e&&this.gen(" == 0)"),i=J.arrayType;break;case Q:for(var K=e.name,Z=e.expr,te=!1,ae=0;ae<this.incluas.length;ae++)if(this.incluas[ae].name==K||this.incluas[ae].alias==K){K=this.incluas[ae].name,te=!0;break}te||this.erro("a biblioteca "+K+" não foi inclusa no programa");var se=this.libraries[K];if(!se)return this.erro("a biblioteca "+K+" não existe."),de;if(se.members[Z.name]||this.erro("a biblioteca "+K+" não tem nenhuma variável ou função '"+Z.name+"'"),se.members[Z.name].id==le&&Z.op==ee&&this.erro("está usando a variável '"+Z.name+"' como se fosse uma função."),se.members[Z.name].id==ee&&Z.op==le&&this.erro("está usando a fução '"+Z.name+"' como se fosse uma variável."),Z.op==le)this.gen('VM_libraries["'+K+'"].'+Z.name);else if(Z.op==ee){this.gen('VM_libraries["'+K+'"].'+Z.name+"(");var ue=se.members[Z.name].parameters;ue.length!=Z.args.length&&this.erro("a função "+Z.name+" espera "+ue.length+" argumentos, foram passados apenas "+Z.args.length);for(var ce=0;ce<Z.args.length;ce++)0!=ce&&this.gen(","),ue[ce].type==_e&&this.gen("("),this.compileExpr(Z.args[ce],ue[ce].type),ue[ce].type==_e&&this.gen("? 0 : 1)");this.gen(")"),se.members[Z.name].type!=de&&this.gen(".value")}i=se.members[Z.name].type}var pe=this.load_gen();return t==_e&&a?this.gen("("+pe+"? 0 : 1)"):this.gen(this.tryConvertType(t,i,pe)),i}},{key:"baseParseInt",value:function(e){return e=e.toUpperCase(),/^[1-9][0-9]*$/.test(e)||"0"==e?parseInt(e,10):/^0[0-9]+$/.test(e)?parseInt(e.substring(1,e.length),10):/^0X[0-9A-F]+$/.test(e)?parseInt(e.substring(2,e.length),16):/^0B[01]+$/.test(e)?parseInt(e.substring(2,e.length),2):(this.erro("número inteiro escrito em formato desconhecido:'"+e+"'"),parseInt(e))}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$r(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function Qr(e){var t=function(e){if("object"!=Wr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wr(t)?t:t+""}var Kr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DIA_DOMINGO=1,this.DIA_SEGUNDA_FEIRA=2,this.DIA_TERCA_FEIRA=3,this.DIA_QUARTA_FEIRA=4,this.DIA_QUINTA_FEIRA=5,this.DIA_SEXTA_FEIRA=6,this.DIA_SABADO=7,this.MES_JANEIRO=1,this.MES_FEVEREIRO=2,this.MES_MARCO=3,this.MES_ABRIL=4,this.MES_MAIO=5,this.MES_JUNHO=6,this.MES_JULHO=7,this.MES_AGOSTO=8,this.MES_SETEMBRO=9,this.MES_OUTUBRO=10,this.MES_NOVEMBRO=11,this.MES_DEZEMBRO=12,this.members={DIA_DOMINGO:{id:le,type:ve},DIA_SEGUNDA_FEIRA:{id:le,type:ve},DIA_TERCA_FEIRA:{id:le,type:ve},DIA_QUARTA_FEIRA:{id:le,type:ve},DIA_QUINTA_FEIRA:{id:le,type:ve},DIA_SEXTA_FEIRA:{id:le,type:ve},DIA_SABADO:{id:le,type:ve},MES_JANEIRO:{id:le,type:ve},MES_FEVEREIRO:{id:le,type:ve},MES_MARCO:{id:le,type:ve},MES_ABRIL:{id:le,type:ve},MES_MAIO:{id:le,type:ve},MES_JUNHO:{id:le,type:ve},MES_JULHO:{id:le,type:ve},MES_AGOSTO:{id:le,type:ve},MES_SETEMBRO:{id:le,type:ve},MES_OUTUBRO:{id:le,type:ve},MES_NOVEMBRO:{id:le,type:ve},MES_DEZEMBRO:{id:le,type:ve},ano_atual:{id:ee,parameters:[],type:ve,jsSafe:!0},mes_atual:{id:ee,parameters:[],type:ve,jsSafe:!0},dia_mes_atual:{id:ee,parameters:[],type:ve,jsSafe:!0},dia_semana_abreviado:{id:ee,parameters:[{name:"dia",type:ve},{name:"maiusculas",type:_e},{name:"minusculas",type:_e}],type:be,jsSafe:!0},dia_semana_atual:{id:ee,parameters:[],type:ve,jsSafe:!0},dia_semana_completo:{id:ee,parameters:[{name:"dia",type:ve},{name:"maiusculas",type:_e},{name:"minusculas",type:_e}],type:be,jsSafe:!0},dia_semana_curto:{id:ee,parameters:[{name:"dia",type:ve},{name:"maiusculas",type:_e},{name:"minusculas",type:_e}],type:be,jsSafe:!0},hora_atual:{id:ee,parameters:[{name:"formato24",type:_e}],type:ve,jsSafe:!0},minuto_atual:{id:ee,parameters:[],type:ve,jsSafe:!0},segundo_atual:{id:ee,parameters:[],type:ve,jsSafe:!0},milisegundo_atual:{id:ee,parameters:[],type:ve,jsSafe:!0}},this.diasCompleto=["Domingo","Segunda-Feira","Terça-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sabado"],this.diasCurto=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sabado"],this.diasAbr=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},(t=[{key:"resetar",value:function(){}},{key:"dia_semana_completo",value:function(e,t,r){if(e<=0||e>this.diasCompleto.length)throw"Deve estar entre 1 e 7 para ser um dia válido, recebeu:"+e;return{value:0==t?this.diasCompleto[e-1].toUpperCase():0==r?this.diasCompleto[e-1].toLowerCase():this.diasCompleto[e-1]}}},{key:"dia_semana_curto",value:function(e,t,r){if(e<=0||e>this.diasCurto.length)throw"Deve estar entre 1 e 7 para ser um dia válido, recebeu:"+e;return{value:0==t?this.diasCurto[e-1].toUpperCase():0==r?this.diasCurto[e-1].toLowerCase():this.diasCurto[e-1]}}},{key:"dia_semana_abreviado",value:function(e,t,r){if(e<=0||e>this.diasAbr.length)throw"Deve estar entre 1 e 7 para ser um dia válido, recebeu:"+e;return{value:0==t?this.diasAbr[e-1].toUpperCase():0==r?this.diasAbr[e-1].toLowerCase():this.diasAbr[e-1]}}},{key:"milisegundo_atual",value:function(){return{value:(new Date).getMilliseconds()}}},{key:"segundo_atual",value:function(){return{value:(new Date).getSeconds()}}},{key:"minuto_atual",value:function(){return{value:(new Date).getMinutes()}}},{key:"hora_atual",value:function(e){return e?{value:(new Date).getHours()}:{value:(new Date).getHours()%12}}},{key:"dia_semana_atual",value:function(){return{value:(new Date).getDay()+1}}},{key:"dia_mes_atual",value:function(){return{value:(new Date).getDate()}}},{key:"mes_atual",value:function(){return{value:(new Date).getMonth()+1}}},{key:"ano_atual",value:function(){return{value:(new Date).getFullYear()}}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Qr(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function ea(e){var t=function(e){if("object"!=Zr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zr(t)?t:t+""}var ta=function(){return e=function e(t,r,a,i,n,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isMobile=s,this.canvas=t,this.modal=r,this.cwindow=a,this.title=i,this.divKeys=n,this.libTeclado=o,this.rotation=0,this.COR_AMARELO=16776960,this.COR_AZUL=255,this.COR_BRANCO=16777215,this.COR_PRETO=0,this.COR_VERDE=65280,this.COR_VERMELHO=16711680,this.CANAL_R=0,this.CANAL_G=1,this.CANAL_B=2,this.GRADIENTE_DIREITA=0,this.GRADIENTE_ESQUERDA=1,this.GRADIENTE_ACIMA=2,this.GRADIENTE_ABAIXO=3,this.GRADIENTE_INFERIOR_DIREITO=4,this.GRADIENTE_INFERIOR_ESQUERDO=5,this.GRADIENTE_SUPERIOR_DIREITO=6,this.GRADIENTE_SUPERIOR_ESQUERDO=7,this.members={COR_AMARELO:{id:le,type:ve},COR_AZUL:{id:le,type:ve},COR_BRANCO:{id:le,type:ve},COR_PRETO:{id:le,type:ve},COR_VERDE:{id:le,type:ve},COR_VERMELHO:{id:le,type:ve},CANAL_R:{id:le,type:ve},CANAL_G:{id:le,type:ve},CANAL_B:{id:le,type:ve},GRADIENTE_DIREITA:{id:le,type:ve},GRADIENTE_ESQUERDA:{id:le,type:ve},GRADIENTE_ACIMA:{id:le,type:ve},GRADIENTE_ABAIXO:{id:le,type:ve},GRADIENTE_INFERIOR_DIREITO:{id:le,type:ve},GRADIENTE_INFERIOR_ESQUERDO:{id:le,type:ve},GRADIENTE_SUPERIOR_DIREITO:{id:le,type:ve},GRADIENTE_SUPERIOR_ESQUERDO:{id:le,type:ve},iniciar_modo_grafico:{id:ee,parameters:[{name:"manter_visivel",type:_e}],type:de,jsSafe:!0},encerrar_modo_grafico:{id:ee,parameters:[],type:de,jsSafe:!0},definir_dimensoes_janela:{id:ee,parameters:[{name:"largura",type:ve},{name:"altura",type:ve}],type:de,jsSafe:!0},definir_cor:{id:ee,parameters:[{name:"cor",type:ve}],type:de,jsSafe:!0},renderizar:{id:ee,parameters:[],type:de,jsSafe:!1},desenhar_retangulo:{id:ee,parameters:[{name:"pX",type:ve},{name:"pY",type:ve},{name:"largura",type:ve},{name:"altura",type:ve},{name:"arredondar",type:_e},{name:"preencher",type:_e}],type:de,jsSafe:!0},limpar:{id:ee,parameters:[],type:de,jsSafe:!0},definir_titulo_janela:{id:ee,parameters:[{name:"titulo",type:be}],type:de,jsSafe:!0},altura_janela:{id:ee,parameters:[],type:ve,jsSafe:!0},largura_janela:{id:ee,parameters:[],type:ve,jsSafe:!0},altura_tela:{id:ee,parameters:[],type:ve,jsSafe:!0},largura_tela:{id:ee,parameters:[],type:ve,jsSafe:!0},desenhar_linha:{id:ee,parameters:[{name:"aX",type:ve},{name:"aY",type:ve},{name:"bX",type:ve},{name:"bY",type:ve}],type:de,jsSafe:!0},desenhar_texto:{id:ee,parameters:[{name:"pX",type:ve},{name:"pY",type:ve},{name:"texto",type:be}],type:de,jsSafe:!0},definir_tamanho_texto:{id:ee,parameters:[{name:"tamanho",type:ge}],type:de,jsSafe:!0},largura_texto:{id:ee,parameters:[{name:"texto",type:be}],type:ve,jsSafe:!0},altura_texto:{id:ee,parameters:[{name:"texto",type:be}],type:ve,jsSafe:!0},desenhar_elipse:{id:ee,parameters:[{name:"pX",type:ve},{name:"pY",type:ve},{name:"largura",type:ve},{name:"altura",type:ve},{name:"preencher",type:_e}],type:de,jsSafe:!0},entrar_modo_tela_cheia:{id:ee,parameters:[],type:de,jsSafe:!0},desenhar_poligono:{id:ee,parameters:[{name:"matriz_pontos",type:Se},{name:"preenchar",type:_e}],type:de,jsSafe:!0},desenhar_ponto:{id:ee,parameters:[{name:"pX",type:ve},{name:"pY",type:ve}],type:de,jsSafe:!0},carregar_imagem:{id:ee,parameters:[{name:"caminho",type:be}],type:ve,jsSafe:!1},liberar_imagem:{id:ee,parameters:[{name:"endereco",type:ve}],type:de,jsSafe:!0},desenhar_imagem:{id:ee,parameters:[{name:"pX",type:ve},{name:"pY",type:ve},{name:"endereco",type:ve}],type:de,jsSafe:!0},desenhar_porcao_imagem:{id:ee,parameters:[{name:"pX",type:ve},{name:"pY",type:ve},{name:"porcaoX",type:ve},{name:"porcaoY",type:ve},{name:"porcaoLargura",type:ve},{name:"porcaoAltura",type:ve},{name:"endereco",type:ve}],type:de,jsSafe:!0},altura_imagem:{id:ee,parameters:[{name:"endereco",type:ve}],type:ve,jsSafe:!0},largura_imagem:{id:ee,parameters:[{name:"endereco",type:ve}],type:ve,jsSafe:!0},criar_cor:{id:ee,parameters:[{name:"R",type:ve},{name:"G",type:ve},{name:"B",type:ve}],type:ve,jsSafe:!0},obter_cor:{id:ee,parameters:[{name:"RGB",type:ve},{name:"canal",type:ve}],type:ve,jsSafe:!0},obter_RGB:{id:ee,parameters:[{name:"RGB",type:ve},{name:"canal",type:ve}],type:ve,jsSafe:!0},definir_estilo_texto:{id:ee,parameters:[{name:"italico",type:_e},{name:"negrito",type:_e},{name:"sublinhado",type:_e}],type:de,jsSafe:!0},definir_fonte_texto:{id:ee,parameters:[{name:"caminho_fonte",type:be}],type:de,jsSafe:!0},definir_gradiente:{id:ee,parameters:[{name:"tipo",type:ve},{name:"cor1",type:ve},{name:"cor2",type:ve}],type:de,jsSafe:!0},definir_opacidade:{id:ee,parameters:[{name:"opacidade",type:ve}],type:de,jsSafe:!0},definir_rotacao:{id:ee,parameters:[{name:"rotacao",type:ve}],type:de,jsSafe:!0},fechar_janela:{id:ee,parameters:[],type:de,jsSafe:!1},redimensionar_imagem:{id:ee,parameters:[{name:"endereco",type:ve},{name:"largura",type:ve},{name:"altura",type:ve},{name:"qualidade",type:_e}],type:ve,jsSafe:!0},exibir_borda_janela:{id:ee,parameters:[],type:de,jsSafe:!0},ocultar_borda_janela:{id:ee,parameters:[],type:de,jsSafe:!0},minimizar_janela:{id:ee,parameters:[],type:de,jsSafe:!0},restaurar_janela:{id:ee,parameters:[],type:de,jsSafe:!0}},this.resetar()},t=[{key:"updateText",value:function(){this.ctx.font=(this.textoItalico?"italic":"")+" "+(this.textoNegrito?"bold":"")+" "+this.textoTamanho+"px "+this.textoFonte}},{key:"resetar",value:function(){this.telaCheia=!1,this.title.value="Janela sem Título",this.lastWidth=100,this.lastHeight=100,this.rotation=0,this.textoTamanho=15,this.textoItalico=!1,this.textoNegrito=!1,this.textoSublinhado=!1,this.textoFonte="Calibri",this.imgs=[]}},{key:"iniciar_modo_grafico",value:function(e){Xt=1e7,this.manter_visivel=0==e;var t=a(),r=Math.min(t.width,t.height);this.definir_dimensoes_janela(r-32,r-72),this.modal.style.display="table",this.ctx=this.canvas.getContext("2d"),this.ctx.lineWidth=2,this.ctx.fillStyle="#000000",this.limpar(),this.canvas.focus(),this.divKeys.innerHTML=""}},{key:"encerrar_modo_grafico",value:function(){this.modal.style.display="none",this.telaCheia&&this.sair_modo_tela_cheia()}},{key:"definir_dimensoes_janela",value:function(e,t){var r=a();e=Math.min(r.width-8,e),t=Math.min(r.height-48,t),this.lastWidth=e,this.lastHeight=t,this.canvas.height=t,this.canvas.width=e,this.cwindow.style.height=t+8+40+"px",this.cwindow.style.width=e+8+"px"}},{key:"definir_cor",value:function(e){this.ctx.fillStyle="#"+Number(e).toString(16).padStart(6,"0"),this.ctx.strokeStyle=this.ctx.fillStyle}},{key:"renderizar",value:function(){return this.updateTecladoGraficos(),{state:2}}},{key:"updateTecladoGraficos",value:function(){if(this.isMobile&&"none"!==this.modal.style.display){var e=Object.keys(this.libTeclado.checkMap),t=(Object.keys(this.libTeclado.teclaCharMap),"");if(e.length>0)for(var r=0;r<e.length;r++){var a=e[r];if(!0===this.libTeclado.checkMap[a]){this.libTeclado.checkMap[a]=!1;var i=this.libTeclado.teclaCharMap[a];void 0===i&&(i=String.fromCharCode(a)),t+='<input type="button" value="'+i+'" ontouchstart="index.GraficosBtnTypeDown(\''+a+"')\" ontouchend=\"index.GraficosBtnTypeUp('"+a+'\')" onfocus="index.preventFocusCanvas(event)" style="background: #1E2324;">'}}this.divKeys.innerHTML!=t&&(this.divKeys.innerHTML=t)}}},{key:"desenhar_retangulo",value:function(e,t,r,a,i,n){var o;(this.startDraw(e,t,r,a),0==i)?(o=r<=a?r/10:a/10,this.ctx.beginPath(),this.ctx.moveTo(e+o,t),this.ctx.arcTo(e+r,t,e+r,t+a,o),this.ctx.arcTo(e+r,t+a,e,t+a,o),this.ctx.arcTo(e,t+a,e,t,o),this.ctx.arcTo(e,t,e+r,t,o),this.ctx.closePath(),0==n?this.ctx.fill():this.ctx.stroke()):0==n?this.ctx.fillRect(e,t,r,a):this.ctx.strokeRect(e,t,r,a);this.endDraw()}},{key:"limpar",value:function(){this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"definir_titulo_janela",value:function(e){this.title.value=e}},{key:"altura_tela",value:function(){return{value:a().height}}},{key:"largura_tela",value:function(){return{value:a().width}}},{key:"altura_janela",value:function(){return{value:this.canvas.height}}},{key:"largura_janela",value:function(){return{value:this.canvas.width}}},{key:"desenhar_linha",value:function(e,t,r,a){this.startDraw(e,t,r-e,a-t),this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(r,a),this.ctx.stroke(),this.endDraw()}},{key:"desenhar_texto",value:function(e,t,r){var a=this.altura_texto(r).value,i=this.largura_texto(r).value;this.startDraw(e,t,i,a),this.ctx.fillText(r,e,t+.8*a),this.endDraw()}},{key:"definir_tamanho_texto",value:function(e){this.textoTamanho=e,this.updateText()}},{key:"largura_texto",value:function(e){return{value:this.ctx.measureText(e).width}}},{key:"altura_texto",value:function(e){return{value:this.textoTamanho}}},{key:"desenhar_elipse",value:function(e,t,r,a,i){this.startDraw(e,t,r,a);var n=r/2,o=a/2;if(this.ctx.ellipse)this.ctx.beginPath(),this.ctx.ellipse(e+n,t+o,n,o,0,0,2*Math.PI),0==i?this.ctx.fill():this.ctx.stroke();else{var s=.5522848,u=r/2*s,c=a/2*s,l=e+r,p=t+a,h=e+r/2,d=t+a/2;this.ctx.beginPath(),this.ctx.moveTo(e,d),this.ctx.bezierCurveTo(e,d-c,h-u,t,h,t),this.ctx.bezierCurveTo(h+u,t,l,d-c,l,d),this.ctx.bezierCurveTo(l,d+c,h+u,p,h,p),this.ctx.bezierCurveTo(h-u,p,e,d+c,e,d),0==i?this.ctx.fill():this.ctx.stroke()}this.endDraw()}},{key:"entrar_modo_tela_cheia",value:function(){var e;(e=this.modal).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.cwindow.style.height="100%",this.cwindow.style.width="100%",this.telaCheia=!0;var t=a();this.canvas.height=t.height-48,this.canvas.width=t.width-8;var r=this;window.setTimeout(function(){var e=a();r.canvas.height=e.height-48,r.canvas.width=e.width-8},50),window.setTimeout(function(){var e=a();r.canvas.height=e.height-48,r.canvas.width=e.width-8},250),this.canvas.focus()}},{key:"sair_modo_tela_cheia",value:function(){!function(){try{(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}catch(t){var e=t.stack||t.stacktrace||"";console.log(e)}}(),this.definir_dimensoes_janela(this.lastWidth,this.lastHeight),this.telaCheia=!1}},{key:"desenhar_poligono",value:function(e,t){this.ctx.beginPath(),this.ctx.moveTo(e[0][0],e[0][1]);for(var r=1;r<e.length;r++){var a=e[r];this.ctx.lineTo(a[0],a[1])}this.ctx.closePath(),0==t?this.ctx.fill():this.ctx.stroke()}},{key:"desenhar_ponto",value:function(e,t){this.ctx.fillRect(e,t,1,1)}},{key:"carregar_imagem",value:function(e){var t=this.imgs[this.imgs.length-1];if(t&&t.url==e){if(t.loaded)return{value:this.imgs.length-1};if(t.error)throw'Erro ao carregar a imagem "'+e+'",\n só é permitido carregar imagens usando um endereço web, por exemplo: "https://upload.wikimedia.org/wikipedia/commons/0/0f/Exemplo.jpg"';return At(1),{state:6}}var r=new Image;return r.src=e,t={url:e,img:r,loaded:!1,error:!1,rescale:!1,rescaleX:0,rescaleY:0},r.onerror=function(){console.log("Erro ao carregar imagem :"+e),t.error=!0},r.onload=function(){console.log("Carregada imagem :"+e),t.loaded=!0},this.imgs.push(t),At(1),{state:6}}},{key:"liberar_imagem",value:function(e){this.imgs[e]=!1}},{key:"redimensionar_imagem",value:function(e,t,r,a){if(this.imgs[e]&&this.imgs[e].loaded){var i=this.imgs[e],n={url:i.url,img:i.img,loaded:!0,error:!1,rescale:!0,rescaleX:t,rescaleY:r};return this.imgs.push(n),{value:this.imgs.length-1}}throw"Imagem "+e+" não existe ou não foi carregada"}},{key:"desenhar_imagem",value:function(e,t,r){if(!this.imgs[r]||!this.imgs[r].loaded)throw"Imagem "+r+" não existe ou não foi carregada";var a=this.imgs[r];a.rescale?(this.startDraw(e,t,a.rescaleX,a.rescaleY),this.ctx.drawImage(a.img,e,t,a.rescaleX,a.rescaleY)):(this.startDraw(e,t,a.img.width,a.img.height),this.ctx.drawImage(a.img,e,t)),this.endDraw()}},{key:"desenhar_porcao_imagem",value:function(e,t,r,a,i,n,o){if(!this.imgs[o]||!this.imgs[o].loaded)throw"Imagem "+o+" não existe ou não foi carregada";var s=this.imgs[o];if(this.startDraw(e,t,i,n),s.rescale){var u=i/s.rescaleX*s.img.width,c=n/s.rescaleY*s.img.height,l=r/s.rescaleX*s.img.width,p=a/s.rescaleY*s.img.height;this.ctx.drawImage(s.img,l,p,u,c,e,t,i,n)}else this.ctx.drawImage(s.img,r,a,i,n,e,t,i,n);this.endDraw()}},{key:"altura_imagem",value:function(e){if(this.imgs[e]&&this.imgs[e].loaded)return{value:this.imgs[e].img.height};throw"Imagem "+e+" não existe ou não foi carregada"}},{key:"largura_imagem",value:function(e){if(this.imgs[e]&&this.imgs[e].loaded)return{value:this.imgs[e].img.width};throw"Imagem "+e+" não existe ou não foi carregada"}},{key:"criar_cor",value:function(e,t,r){return{value:(255&e)<<16|(255&t)<<8|255&r}}},{key:"obter_RGB",value:function(e,t){if(t==this.CANAL_R)return{value:e>>16&255};if(t==this.CANAL_G)return{value:e>>8&255};if(t==this.CANAL_B)return{value:255&e};throw"canal deve ser CANAL_R, CANAL_G ou CANAL_B"}},{key:"obter_cor",value:function(e,t){if(t==this.CANAL_R)return{value:e>>16&255};if(t==this.CANAL_G)return{value:e>>8&255};if(t==this.CANAL_B)return{value:255&e};throw"canal deve ser CANAL_R, CANAL_G ou CANAL_B"}},{key:"definir_estilo_texto",value:function(e,t,r){this.textoItalico=0==e,this.textoNegrito=0==t,this.textoSublinhado=0==r,this.updateText()}},{key:"definir_fonte_texto",value:function(e){this.textoFonte=e,this.updateText()}},{key:"definir_gradiente",value:function(e,t,r){var a="#"+Number(t).toString(16).padStart(6,"0"),i="#"+Number(r).toString(16).padStart(6,"0"),n=this.ctx.createLinearGradient(0,0,this.canvas.width,0);n.addColorStop(0,a),n.addColorStop(1,i),this.ctx.fillStyle=n}},{key:"definir_opacidade",value:function(e){this.ctx.globalAlpha=e/255}},{key:"definir_rotacao",value:function(e){this.rotation=e}},{key:"startDraw",value:function(e,t,r,a){if(this.ctx.save(),0!=this.rotation){var i=.5*(e+(e+r)),n=.5*(t+(t+a));this.ctx.translate(i,n),this.ctx.rotate(this.rotation*Math.PI/180),this.ctx.translate(-i,-n)}}},{key:"endDraw",value:function(){this.ctx.restore()}},{key:"fechar_janela",value:function(){return this.encerrar_modo_grafico(),{state:_t}}},{key:"exibir_borda_janela",value:function(){}},{key:"ocultar_borda_janela",value:function(){}},{key:"minimizar_janela",value:function(){}},{key:"restaurar_janela",value:function(){}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ea(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ra(e){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ra(e)}function aa(e){var t=function(e){if("object"!=ra(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ra(t)?t:t+""}var ia=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.members={baixar_imagem:{id:ee,parameters:[{name:"endereco",type:be},{name:"caminho",type:be}],type:be,jsSafe:!1},definir_tempo_limite:{id:ee,parameters:[{name:"tempo_limite",type:ve}],type:de,jsSafe:!0},endereco_disponivel:{id:ee,parameters:[{name:"endereco",type:be}],type:_e,jsSafe:!1},obter_texto:{id:ee,parameters:[{name:"endereco",type:be}],type:be,jsSafe:!1}},this.resetar()},t=[{key:"resetar",value:function(){this.ocupado=!1,this.retorno=!1,this.abortador=!1,this.tempo=0,this.tempo_limite=1e4}},{key:"baixar_imagem",value:function(e,t){return{value:"Não implementado baixar_imagem, ao invés disso, informe esse endereço da internet como o caminho na função carregar_imagem da biblioteca Graficos diretamente."}}},{key:"definir_tempo_limite",value:function(e){this.tempo_limite=e}},{key:"endereco_disponivel",value:function(e){if("undefined"!=typeof Android)return Android.httpgetcheck(e,this.tempo_limite),{state:St};var t=this.obter_texto(e);return 6==t.state?t:{value:t.__sucess}}},{key:"obter_texto",value:function(e){if("undefined"!=typeof Android)return Android.httpget(e,this.tempo_limite),{state:St};if(this.ocupado){if(this.tempo=this.tempo+1,!1!==this.retorno){var t=this.retorno;return this.ocupado=!1,this.retorno=!1,this.tempo=0,this.abortador=!1,t}return this.tempo>this.tempo_limite?(this.abortador.abort(),this.ocupado=!1,this.retorno=!1,this.tempo=0,this.abortador=!1,{value:"Tempo limite atingido",__sucess:!1}):(At(1),{state:6})}this.ocupado=!0,this.tempo=0,this.retorno=!1,this.abortador=new AbortController;try{var r=this;fetch(e,{method:"GET",signal:r.abortador.signal}).then(function(e){if(!e.ok){var t=e.status;return Promise.reject(t)}return e.text()}).then(function(e){if(!e)return Promise.reject("Resposta Vazia");r.retorno={value:""+e,__sucess:!0}}).catch(function(e){console.log("FETCH --\x3e CATCH:"+e),"AbortError"===e.name?console.log("Fetch aborted"):r.retorno={value:""+e,__sucess:!1}})}catch(e){return console.log("TRY --\x3e CATCH"+e),this.ocupado=!1,this.retorno=!1,this.tempo=0,this.abortador=!1,{value:""+e,__sucess:!1}}return At(1),{state:6}}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,aa(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function na(e){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}function oa(e){var t=function(e){if("object"!=na(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==na(t)?t:t+""}var sa=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.PI=3.141592653589793,this.members={PI:{id:le,type:ge},potencia:{id:ee,parameters:[{name:"base",type:ge},{name:"expoente",type:ge}],type:ge,jsSafe:!0},arredondar:{id:ee,parameters:[{name:"numero",type:ge},{name:"casas",type:ge}],type:ge,jsSafe:!0},cosseno:{id:ee,parameters:[{name:"numero",type:ge}],type:ge,jsSafe:!0},logaritmo:{id:ee,parameters:[{name:"numero",type:ge},{name:"base",type:ge}],type:ge,jsSafe:!0},maior_numero:{id:ee,parameters:[{name:"a",type:ge},{name:"b",type:ge}],type:ge,jsSafe:!0},menor_numero:{id:ee,parameters:[{name:"a",type:ge},{name:"b",type:ge}],type:ge,jsSafe:!0},raiz:{id:ee,parameters:[{name:"numero",type:ge},{name:"potencia",type:ge}],type:ge,jsSafe:!0},seno:{id:ee,parameters:[{name:"numero",type:ge}],type:ge,jsSafe:!0},tangente:{id:ee,parameters:[{name:"numero",type:ge}],type:ge,jsSafe:!0},valor_absoluto:{id:ee,parameters:[{name:"numero",type:ge}],type:ge,jsSafe:!0}}},t=[{key:"resetar",value:function(){}},{key:"arredondar",value:function(e,t){return{value:+e.toFixed(t)}}},{key:"potencia",value:function(e,t){return{value:Math.pow(e,t)}}},{key:"cosseno",value:function(e){return{value:Math.cos(e)}}},{key:"logaritmo",value:function(e,t){return{value:Math.log(e)/Math.log(t)}}},{key:"maior_numero",value:function(e,t){return{value:e>t?e:t}}},{key:"menor_numero",value:function(e,t){return{value:e<t?e:t}}},{key:"raiz",value:function(e,t){try{var r=t%2==1&&e<0;r&&(e=-e);var a=Math.pow(e,1/t);if(t=Math.pow(a,t),Math.abs(e-t)<1&&e>0==t>0)return{value:r?-a:a}}catch(e){console.log(e)}}},{key:"seno",value:function(e){return{value:Math.sin(e)}}},{key:"tangente",value:function(e){return{value:Math.tan(e)}}},{key:"valor_absoluto",value:function(e){return{value:Math.abs(e)}}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oa(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function ca(e){var t=function(e){if("object"!=ua(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ua(t)?t:t+""}var la=function(){return e=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.BOTAO_DIREITO=1,this.BOTAO_MEIO=2,this.BOTAO_ESQUERDO=0,this.members={BOTAO_DIREITO:{id:le,type:ve},BOTAO_MEIO:{id:le,type:ve},BOTAO_ESQUERDO:{id:le,type:ve},posicao_x:{id:ee,parameters:[],type:ve,jsSafe:!0},posicao_y:{id:ee,parameters:[],type:ve,jsSafe:!0},botao_pressionado:{id:ee,parameters:[{name:"botao",type:ve}],type:_e,jsSafe:!0},algum_botao_pressionado:{id:ee,parameters:[],type:_e,jsSafe:!0},exibir_cursor:{id:ee,parameters:[],type:de,jsSafe:!0},ocultar_cursor:{id:ee,parameters:[],type:de,jsSafe:!0},ler_botao:{id:ee,parameters:[],type:ve,jsSafe:!1}},this.canvas.addEventListener("mousemove",function(e){r.mouseMove(e)}),this.canvas.addEventListener("click",function(e){r.mouseClick(e)}),this.canvas.addEventListener("mouseenter",function(e){r.mouseEnter(e)}),this.canvas.addEventListener("mouseleave",function(e){r.mouseLeave(e)}),this.canvas.addEventListener("mousedown",function(e){r.mouseDown(e)}),this.canvas.addEventListener("mouseup",function(e){r.mouseUp(e)});var a=[-1,this.BOTAO_ESQUERDO,this.BOTAO_MEIO,this.BOTAO_DIREITO];this.touchManager=new c,this.canvas.addEventListener("touchstart",function(e){r.touchManager.touchstart(e)},!1),this.canvas.addEventListener("touchmove",function(e){e.preventDefault(),r.touchManager.touchmove(e)},!1),this.canvas.addEventListener("touchend",function(e){e.preventDefault(),r.touchManager.touchend(e)},!1),this.canvas.addEventListener("touchcancel",function(e){r.touchManager.touchcancel(e)},!1),this.canvas.addEventListener("touchleave",function(e){r.touchManager.touchleave(e)},!1),this.touchManager.addEventListener("onTouchDown",function(e,t){r.mouseDown({clientX:e.x,clientY:e.y,button:a[t]})},!1),this.touchManager.addEventListener("onTouchMove",function(e,t){r.mouseMove({clientX:e.x,clientY:e.y,button:a[t]})},!1),this.touchManager.addEventListener("onTouchUp",function(e,t){r.mouseUp({clientX:e.x,clientY:e.y,button:a[t]})},!1),this.touchManager.addEventListener("onTouchZoom",function(e,t){r.doZoom(e,t)},!1),this.resetar()},(t=[{key:"resetar",value:function(){this.x=0,this.y=0,this.pressionado=[!1,!1,!1],this.touchManager.resetar()}},{key:"doZoom",value:function(e,t){}},{key:"mouseChanged",value:function(e){var t=this.canvas.getBoundingClientRect();this.x=e.clientX-t.left,this.y=e.clientY-t.top}},{key:"mouseMove",value:function(e){this.mouseChanged(e)}},{key:"mouseClick",value:function(e){this.mouseChanged(e)}},{key:"mouseEnter",value:function(e){this.mouseChanged(e)}},{key:"mouseLeave",value:function(e){this.mouseChanged(e)}},{key:"mouseDown",value:function(e){this.mouseChanged(e),this.pressionado[e.button]=!0}},{key:"mouseUp",value:function(e){this.mouseChanged(e),this.pressionado[e.button]=!1}},{key:"posicao_x",value:function(){return{value:Math.floor(this.x)}}},{key:"posicao_y",value:function(){return{value:Math.floor(this.y)}}},{key:"botao_pressionado",value:function(e){if(e==this.BOTAO_DIREITO)return{value:this.pressionado[2]};if(e==this.BOTAO_ESQUERDO)return{value:this.pressionado[0]};if(e==this.BOTAO_MEIO)return{value:this.pressionado[1]};throw"O Botão deve ser 0, 1 ou 2"}},{key:"algum_botao_pressionado",value:function(){return{value:this.pressionado[0]||this.pressionado[1]||this.pressionado[2]}}},{key:"exibir_cursor",value:function(){this.canvas.style.cursor="auto"}},{key:"ocultar_cursor",value:function(){this.canvas.style.cursor="none"}},{key:"ler_botao",value:function(){return!0===this.algum_botao_pressionado().value?{value:this.pressionado[0]?this.BOTAO_ESQUERDO:this.pressionado[1]?this.BOTAO_MEIO:this.BOTAO_DIREITO}:(At(1),{state:6})}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ca(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function pa(e){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(e)}function ha(e){var t=function(e){if("object"!=pa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=pa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pa(t)?t:t+""}var da=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TIPO_CADEIA=2,this.TIPO_CARACTER=3,this.TIPO_INTEIRO=1,this.TIPO_LOGICO=5,this.TIPO_OBJETO=6,this.TIPO_REAL=4,this.TIPO_VETOR=7,this.members={TIPO_CADEIA:{id:le,type:ve},TIPO_CARACTER:{id:le,type:ve},TIPO_INTEIRO:{id:le,type:ve},TIPO_LOGICO:{id:le,type:ve},TIPO_OBJETO:{id:le,type:ve},TIPO_REAL:{id:le,type:ve},TIPO_VETOR:{id:le,type:ve},atribuir_propriedade:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be},{name:"valor",type:de}],type:de,jsSafe:!0},contem_propriedade:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:_e,jsSafe:!0},criar_objeto:{id:ee,parameters:[],type:ve,jsSafe:!0},criar_objeto_via_json:{id:ee,parameters:[{name:"json",type:be}],type:ve,jsSafe:!0},criar_objeto_via_xml:{id:ee,parameters:[{name:"xml",type:be}],type:ve,jsSafe:!0},liberar:{id:ee,parameters:[],type:de,jsSafe:!0},liberar_objeto:{id:ee,parameters:[{name:"endereco",type:ve}],type:de,jsSafe:!0},obter_json:{id:ee,parameters:[{name:"endereco",type:ve}],type:be,jsSafe:!0},obter_propriedade_tipo_cadeia:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:be,jsSafe:!0},obter_propriedade_tipo_cadeia_em_vetor:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be},{name:"indice",type:ve}],type:be,jsSafe:!0},obter_propriedade_tipo_caracter:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:ye,jsSafe:!0},obter_propriedade_tipo_caracter_em_vetor:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be},{name:"indice",type:ve}],type:ye,jsSafe:!0},obter_propriedade_tipo_inteiro:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:ve,jsSafe:!0},obter_propriedade_tipo_inteiro_em_vetor:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be},{name:"indice",type:ve}],type:ve,jsSafe:!0},obter_propriedade_tipo_logico:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:_e,jsSafe:!0},obter_propriedade_tipo_logico_em_vetor:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be},{name:"indice",type:ve}],type:_e,jsSafe:!0},obter_propriedade_tipo_objeto:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:ve,jsSafe:!0},obter_propriedade_tipo_objeto_em_vetor:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be},{name:"indice",type:ve}],type:ve,jsSafe:!0},obter_propriedade_tipo_real:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:ge,jsSafe:!0},obter_propriedade_tipo_real_em_vetor:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be},{name:"indice",type:ve}],type:ge,jsSafe:!0},obter_tamanho_vetor_propriedade:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:ve,jsSafe:!0},tipo_propriedade:{id:ee,parameters:[{name:"endereco",type:ve},{name:"propriedade",type:be}],type:ve,jsSafe:!0}},this.obter_propriedade_tipo_cadeia=this.obter_propriedade_tipo_danese,this.obter_propriedade_tipo_caracter=this.obter_propriedade_tipo_danese,this.obter_propriedade_tipo_inteiro=this.obter_propriedade_tipo_danese,this.obter_propriedade_tipo_logico=this.obter_propriedade_tipo_danese,this.obter_propriedade_tipo_objeto=this.obter_propriedade_tipo_danese,this.obter_propriedade_tipo_real=this.obter_propriedade_tipo_danese,this.obter_propriedade_tipo_cadeia_em_vetor=this.obter_propriedade_tipo_danese_em_vetor,this.obter_propriedade_tipo_caracter_em_vetor=this.obter_propriedade_tipo_danese_em_vetor,this.obter_propriedade_tipo_inteiro_em_vetor=this.obter_propriedade_tipo_danese_em_vetor,this.obter_propriedade_tipo_logico_em_vetor=this.obter_propriedade_tipo_danese_em_vetor,this.obter_propriedade_tipo_objeto_em_vetor=this.obter_propriedade_tipo_danese_em_vetor,this.obter_propriedade_tipo_real_em_vetor=this.obter_propriedade_tipo_danese_em_vetor,this.resetar()},(t=[{key:"atribuir_propriedade",value:function(e,t,r){if(!this.objs[e])throw"Nenhum objeto encontrado no endereco "+e;this.objs[e][t]=r}},{key:"contem_propriedade",value:function(e,t){if(this.objs[e])return t in this.objs[e]?{value:!0}:{value:!1};throw"Nenhum objeto encontrado no endereco "+e}},{key:"resetar",value:function(){this.objs=[]}},{key:"criar_objeto",value:function(){return this.objs.push({}),{value:this.objs.length-1}}},{key:"criar_objeto_via_json",value:function(e){return this.objs.push(JSON.parse(e)),{value:this.objs.length-1}}},{key:"criar_objeto_via_xml",value:function(e){throw"JSON é melhor que XML, use criar_objeto_via_json"}},{key:"liberar",value:function(){this.resetar()}},{key:"liberar_objeto",value:function(e){this.objs[e]=!1}},{key:"obter_json",value:function(e){if(this.objs[e])return{value:JSON.stringify(this.objs[e])};throw"Nenhum objeto encontrado no endereco "+e}},{key:"obter_propriedade_tipo_danese",value:function(e,t){if(this.objs[e]){var r=this.objs[e];if(t in r)return{value:r[t]};throw"Não pôde acessar a propriedade '"+t+"' no endereco "+e}throw"Nenhum objeto encontrado no endereco "+e}},{key:"obter_propriedade_tipo_danese_em_vetor",value:function(e,t,r){return{value:this.obter_propriedade_tipo_danese(e,t)[r]}}},{key:"obter_tamanho_vetor_propriedade",value:function(e,t){return{value:this.obter_propriedade_tipo_danese(e,t).length}}},{key:"tipo_propriedade",value:function(e,t){var r=this.obter_propriedade_tipo_danese(e,t);if("object"===pa(r))return r.isArray?{value:this.TIPO_VETOR}:{value:this.TIPO_OBJETO};if("boolean"==typeof r)return{value:this.TIPO_LOGICO};if("string"==typeof r)return{value:this.TIPO_CADEIA};if("number"==typeof r)return{value:this.TIPO_REAL};throw"Tipo desconhecido '"+pa(r)+"'"}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ha(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function ma(e){var t=function(e){if("object"!=fa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fa(t)?t:t+""}var va=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.libGraficos=!1,this.teclaCharMap={10:"↩",8:"←",9:"↹",3:"Cancelar",12:"Limpar",16:"⇧",17:"Ctrl",19:"Pause",20:"⇪",27:"Esc",32:"␣",33:"↟",34:"↡",35:"⇥",36:"⇤",37:"←",38:"↑",39:"→",40:"↓",127:"Del",144:"Num",145:"ScLock",154:"PrtSc",155:"Insert",156:"Ajuda",524:"Win",525:"Menu",0:"Alguma",44:",",45:"_",46:".",47:"/",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"[",92:"\\",93:"]",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",108:",",109:"-",110:".",111:"%",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",61440:"F13",61441:"F14",61442:"F15",61443:"F16",61444:"F17",61445:"F18",61446:"F19",61447:"F20",61448:"F21",61449:"F22",61450:"F23",61451:"F24",222:"'"},this.teclaCodepointMap={ENTER:10,BACK_SPACE:8,TAB:9,CANCEL:3,CLEAR:12,SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27," ":32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,",":44,"-":45,_:45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,")":48,"!":49,"@":50,"#":51,$:52,"%":53,"¨":54,"&":55,"*":56,"(":57,";":59,"=":61,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"[":91,"\\":92,"]":93,"+":107,DELETE:127,NUMLOCK:144,SCROLLOCK:145,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:61440,F14:61441,F15:61442,F16:61443,F17:61444,F18:61445,F19:61446,F20:61447,F21:61448,F22:61449,F23:61450,F24:61451,PRINTSCREEN:154,INSERT:155,HELP:156,META:524,CONTEXTMENU:525,"'":222,'"':222},this.TECLA_ENTER=10,this.TECLA_BACKSPACE=8,this.TECLA_TAB=9,this.TECLA_CANCELAR=3,this.TECLA_LIMPAR=12,this.TECLA_SHIFT=16,this.TECLA_CONTROL=17,this.TECLA_ALT=18,this.TECLA_PAUSE=19,this.TECLA_CAPS_LOCK=20,this.TECLA_ESC=27,this.TECLA_ESPACO=32,this.TECLA_PAGE_UP=33,this.TECLA_PAGE_DOWN=34,this.TECLA_END=35,this.TECLA_HOME=36,this.TECLA_SETA_ESQUERDA=37,this.TECLA_SETA_ACIMA=38,this.TECLA_SETA_DIREITA=39,this.TECLA_SETA_ABAIXO=40,this.TECLA_VIRGULA=44,this.TECLA_MENOS=45,this.TECLA_PONTO_FINAL=46,this.TECLA_BARRA=47,this.TECLA_0=48,this.TECLA_1=49,this.TECLA_2=50,this.TECLA_3=51,this.TECLA_4=52,this.TECLA_5=53,this.TECLA_6=54,this.TECLA_7=55,this.TECLA_8=56,this.TECLA_9=57,this.TECLA_PONTO_VIRGULA=59,this.TECLA_IGUAL=61,this.TECLA_A=65,this.TECLA_B=66,this.TECLA_C=67,this.TECLA_D=68,this.TECLA_E=69,this.TECLA_F=70,this.TECLA_G=71,this.TECLA_H=72,this.TECLA_I=73,this.TECLA_J=74,this.TECLA_K=75,this.TECLA_L=76,this.TECLA_M=77,this.TECLA_N=78,this.TECLA_O=79,this.TECLA_P=80,this.TECLA_Q=81,this.TECLA_R=82,this.TECLA_S=83,this.TECLA_T=84,this.TECLA_U=85,this.TECLA_V=86,this.TECLA_W=87,this.TECLA_X=88,this.TECLA_Y=89,this.TECLA_Z=90,this.TECLA_ABRE_COLCHETES=91,this.TECLA_BARRA_INVERTIDA=92,this.TECLA_FECHA_COLCHETES=93,this.TECLA_0_NUM=96,this.TECLA_1_NUM=97,this.TECLA_2_NUM=98,this.TECLA_3_NUM=99,this.TECLA_4_NUM=100,this.TECLA_5_NUM=101,this.TECLA_6_NUM=102,this.TECLA_7_NUM=103,this.TECLA_8_NUM=104,this.TECLA_9_NUM=105,this.TECLA_MULTIPLICACAO=106,this.TECLA_ADICAO=107,this.TECLA_NUM_SEPARADOR_DECIMAL=108,this.TECLA_SUBTRACAO=109,this.TECLA_DECIMAL=110,this.TECLA_DIVISAO=111,this.TECLA_DELETAR=127,this.TECLA_NUM_LOCK=144,this.TECLA_SCROLL_LOCK=145,this.TECLA_F1=112,this.TECLA_F2=113,this.TECLA_F3=114,this.TECLA_F4=115,this.TECLA_F5=116,this.TECLA_F6=117,this.TECLA_F7=118,this.TECLA_F8=119,this.TECLA_F9=120,this.TECLA_F10=121,this.TECLA_F11=122,this.TECLA_F12=123,this.TECLA_F13=61440,this.TECLA_F14=61441,this.TECLA_F15=61442,this.TECLA_F16=61443,this.TECLA_F17=61444,this.TECLA_F18=61445,this.TECLA_F19=61446,this.TECLA_F20=61447,this.TECLA_F21=61448,this.TECLA_F22=61449,this.TECLA_F23=61450,this.TECLA_F24=61451,this.TECLA_PRINTSCREEN=154,this.TECLA_INSERT=155,this.TECLA_AJUDA=156,this.TECLA_WINDOWS=524,this.TECLA_MENU_CONTEXTO=525,this.members={TECLA_ENTER:{id:le,type:ve},TECLA_BACKSPACE:{id:le,type:ve},TECLA_TAB:{id:le,type:ve},TECLA_CANCELAR:{id:le,type:ve},TECLA_LIMPAR:{id:le,type:ve},TECLA_SHIFT:{id:le,type:ve},TECLA_CONTROL:{id:le,type:ve},TECLA_ALT:{id:le,type:ve},TECLA_PAUSE:{id:le,type:ve},TECLA_CAPS_LOCK:{id:le,type:ve},TECLA_ESC:{id:le,type:ve},TECLA_ESPACO:{id:le,type:ve},TECLA_PAGE_UP:{id:le,type:ve},TECLA_PAGE_DOWN:{id:le,type:ve},TECLA_END:{id:le,type:ve},TECLA_HOME:{id:le,type:ve},TECLA_SETA_ESQUERDA:{id:le,type:ve},TECLA_SETA_ACIMA:{id:le,type:ve},TECLA_SETA_DIREITA:{id:le,type:ve},TECLA_SETA_ABAIXO:{id:le,type:ve},TECLA_VIRGULA:{id:le,type:ve},TECLA_MENOS:{id:le,type:ve},TECLA_PONTO_FINAL:{id:le,type:ve},TECLA_BARRA:{id:le,type:ve},TECLA_0:{id:le,type:ve},TECLA_1:{id:le,type:ve},TECLA_2:{id:le,type:ve},TECLA_3:{id:le,type:ve},TECLA_4:{id:le,type:ve},TECLA_5:{id:le,type:ve},TECLA_6:{id:le,type:ve},TECLA_7:{id:le,type:ve},TECLA_8:{id:le,type:ve},TECLA_9:{id:le,type:ve},TECLA_PONTO_VIRGULA:{id:le,type:ve},TECLA_IGUAL:{id:le,type:ve},TECLA_A:{id:le,type:ve},TECLA_B:{id:le,type:ve},TECLA_C:{id:le,type:ve},TECLA_D:{id:le,type:ve},TECLA_E:{id:le,type:ve},TECLA_F:{id:le,type:ve},TECLA_G:{id:le,type:ve},TECLA_H:{id:le,type:ve},TECLA_I:{id:le,type:ve},TECLA_J:{id:le,type:ve},TECLA_K:{id:le,type:ve},TECLA_L:{id:le,type:ve},TECLA_M:{id:le,type:ve},TECLA_N:{id:le,type:ve},TECLA_O:{id:le,type:ve},TECLA_P:{id:le,type:ve},TECLA_Q:{id:le,type:ve},TECLA_R:{id:le,type:ve},TECLA_S:{id:le,type:ve},TECLA_T:{id:le,type:ve},TECLA_U:{id:le,type:ve},TECLA_V:{id:le,type:ve},TECLA_W:{id:le,type:ve},TECLA_X:{id:le,type:ve},TECLA_Y:{id:le,type:ve},TECLA_Z:{id:le,type:ve},TECLA_ABRE_COLCHETES:{id:le,type:ve},TECLA_BARRA_INVERTIDA:{id:le,type:ve},TECLA_FECHA_COLCHETES:{id:le,type:ve},TECLA_0_NUM:{id:le,type:ve},TECLA_1_NUM:{id:le,type:ve},TECLA_2_NUM:{id:le,type:ve},TECLA_3_NUM:{id:le,type:ve},TECLA_4_NUM:{id:le,type:ve},TECLA_5_NUM:{id:le,type:ve},TECLA_6_NUM:{id:le,type:ve},TECLA_7_NUM:{id:le,type:ve},TECLA_8_NUM:{id:le,type:ve},TECLA_9_NUM:{id:le,type:ve},TECLA_MULTIPLICACAO:{id:le,type:ve},TECLA_ADICAO:{id:le,type:ve},TECLA_NUM_SEPARADOR_DECIMAL:{id:le,type:ve},TECLA_SUBTRACAO:{id:le,type:ve},TECLA_DECIMAL:{id:le,type:ve},TECLA_DIVISAO:{id:le,type:ve},TECLA_DELETAR:{id:le,type:ve},TECLA_NUM_LOCK:{id:le,type:ve},TECLA_SCROLL_LOCK:{id:le,type:ve},TECLA_F1:{id:le,type:ve},TECLA_F2:{id:le,type:ve},TECLA_F3:{id:le,type:ve},TECLA_F4:{id:le,type:ve},TECLA_F5:{id:le,type:ve},TECLA_F6:{id:le,type:ve},TECLA_F7:{id:le,type:ve},TECLA_F8:{id:le,type:ve},TECLA_F9:{id:le,type:ve},TECLA_F10:{id:le,type:ve},TECLA_F11:{id:le,type:ve},TECLA_F12:{id:le,type:ve},TECLA_F13:{id:le,type:ve},TECLA_F14:{id:le,type:ve},TECLA_F15:{id:le,type:ve},TECLA_F16:{id:le,type:ve},TECLA_F17:{id:le,type:ve},TECLA_F18:{id:le,type:ve},TECLA_F19:{id:le,type:ve},TECLA_F20:{id:le,type:ve},TECLA_F21:{id:le,type:ve},TECLA_F22:{id:le,type:ve},TECLA_F23:{id:le,type:ve},TECLA_F24:{id:le,type:ve},TECLA_PRINTSCREEN:{id:le,type:ve},TECLA_INSERT:{id:le,type:ve},TECLA_AJUDA:{id:le,type:ve},TECLA_WINDOWS:{id:le,type:ve},TECLA_MENU_CONTEXTO:{id:le,type:ve},alguma_tecla_pressionada:{id:ee,parameters:[],type:_e,jsSafe:!0},caracter_tecla:{id:ee,parameters:[{name:"tecla",type:ve}],type:ye,jsSafe:!0},ler_tecla:{id:ee,parameters:[],type:ve,jsSafe:!1},tecla_pressionada:{id:ee,parameters:[{name:"tecla",type:ve}],type:_e,jsSafe:!0}};var r=this;this.canvas.addEventListener("keydown",function(e){r.tecladoDown(e,-1)}),this.canvas.addEventListener("keyup",function(e){r.tecladoUp(e,-1)}),this.resetar()},(t=[{key:"resetar",value:function(){this.keyMap={},this.checkMap={},this.pressionadas=0,this.ultimaPressionada=-1,this.aguardandoLer=!1,this.ultimaSolta=-1}},{key:"tecladoDown",value:function(e,t){e.preventDefault();var r=t;-1==r&&void 0===(r=this.teclaCodepointMap[e.key.toUpperCase()])&&(r=-1),this.ultimaPressionada=r,console.log(e.key+" --\x3e "+r),!0!==this.keyMap[r]&&this.pressionadas++,this.keyMap[r]=!0}},{key:"tecladoUp",value:function(e,t){e.preventDefault();var r=t;-1==r&&void 0===(r=this.teclaCodepointMap[e.key.toUpperCase()])&&(r=-1),this.ultimaSolta=r,!0===this.keyMap[r]&&this.pressionadas--,this.keyMap[r]=!1}},{key:"alguma_tecla_pressionada",value:function(){return this.checkMap[0]=!0,{value:this.pressionadas>0}}},{key:"caracter_tecla",value:function(e){return{value:""+String.fromCharCode(e)}}},{key:"ler_tecla",value:function(){for(var e=49;e<58;e++)this.checkMap[e]=!0;for(var t=65;t<91;t++)this.checkMap[t]=!0;return 0!=this.libGraficos&&this.libGraficos.updateTecladoGraficos(),0==this.aguardandoLer?(this.aguardandoLer=!0,this.ultimaSolta=-1,At(1),{state:6}):-1==this.ultimaSolta?(At(1),{state:6}):(this.aguardandoLer=!1,{value:this.ultimaSolta})}},{key:"tecla_pressionada",value:function(e){return this.checkMap[e]=!0,{value:!0===this.keyMap[e]}}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ma(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ya(e){return ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ya(e)}function ba(e){var t=function(e){if("object"!=ya(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ya(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ya(t)?t:t+""}var ga=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.members={caixa_alta:{id:ee,parameters:[{name:"cad",type:be}],type:be,jsSafe:!0},caixa_baixa:{id:ee,parameters:[{name:"cad",type:be}],type:be,jsSafe:!0},extrair_subtexto:{id:ee,parameters:[{name:"cad",type:be},{name:"posicao_inicial",type:ve},{name:"posicao_final",type:ve}],type:be,jsSafe:!0},numero_caracteres:{id:ee,parameters:[{name:"cad",type:be}],type:ve,jsSafe:!0},obter_caracter:{id:ee,parameters:[{name:"cad",type:be},{name:"indice",type:ve}],type:ye,jsSafe:!0},posicao_texto:{id:ee,parameters:[{name:"agulha",type:be},{name:"palheiro",type:be},{name:"posicao_inicial",type:ve}],type:ve,jsSafe:!0},preencher_a_esquerda:{id:ee,parameters:[{name:"letra",type:ye},{name:"tamanho",type:ve},{name:"cad",type:be}],type:be,jsSafe:!0},substituir:{id:ee,parameters:[{name:"cad",type:be},{name:"texto_pesquisa",type:be},{name:"texto_substituto",type:be}],type:be,jsSafe:!0}}},(t=[{key:"resetar",value:function(){}},{key:"caixa_alta",value:function(e){return{value:e.toUpperCase()}}},{key:"caixa_baixa",value:function(e){return{value:e.toLowerCase()}}},{key:"extrair_subtexto",value:function(e,t,r){if(t>r)throw"Posição inicial e final inválidas, a posição final deve ser maior ou igual que a inicial";if(t>=0&&r<=e.length)return{value:e.substring(t,r)};throw"Posição inicial ou final fora do intervalo. Deve estar entre 0 e o tamanho do texto"}},{key:"numero_caracteres",value:function(e){return{value:e.length}}},{key:"obter_caracter",value:function(e,t){if(t>=0&&t<e.length)return{value:e.charAt(t)};throw"Índice fora do intervalo. Deve estar entre 0 e o tamanho do texto"}},{key:"posicao_texto",value:function(e,t,r){return{value:t.indexOf(e,r)}}},{key:"preencher_a_esquerda",value:function(e,t,r){return{value:r.padStart(t,e)}}},{key:"substituir",value:function(e,t,r){return{value:function(e,t,r){for(var a=[],i=t.length,n=e.indexOf(t);-1!==n;)a.push(e.substring(0,n)),a.push(r),n=(e=e.substring(n+i)).indexOf(t);return a.push(e),a.join("")}(e,t,r)}}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ba(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _a(e){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(e)}function xa(e){var t=function(e){if("object"!=_a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_a(t)?t:t+""}var Ea=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.members={cadeia_e_caracter:{id:ee,parameters:[{name:"cad",type:be}],type:_e,jsSafe:!0},cadeia_e_inteiro:{id:ee,parameters:[{name:"cad",type:be},{name:"base",type:ve}],type:_e,jsSafe:!0},cadeia_e_logico:{id:ee,parameters:[{name:"cad",type:be}],type:_e,jsSafe:!0},cadeia_e_real:{id:ee,parameters:[{name:"cad",type:be}],type:_e,jsSafe:!0},cadeia_para_caracter:{id:ee,parameters:[{name:"cad",type:be}],type:ye,jsSafe:!0},cadeia_para_inteiro:{id:ee,parameters:[{name:"cad",type:be},{name:"base",type:ve}],type:ve,jsSafe:!0},cadeia_para_logico:{id:ee,parameters:[{name:"cad",type:be}],type:_e,jsSafe:!0},cadeia_para_real:{id:ee,parameters:[{name:"cad",type:be}],type:ge,jsSafe:!0},caracter_e_inteiro:{id:ee,parameters:[{name:"letra",type:ye}],type:_e,jsSafe:!0},caracter_e_logico:{id:ee,parameters:[{name:"letra",type:ye}],type:_e,jsSafe:!0},caracter_para_cadeia:{id:ee,parameters:[{name:"letra",type:ye}],type:be,jsSafe:!0},caracter_para_inteiro:{id:ee,parameters:[{name:"letra",type:ye}],type:ve,jsSafe:!0},caracter_para_logico:{id:ee,parameters:[{name:"letra",type:ye}],type:_e,jsSafe:!0},inteiro_e_caracter:{id:ee,parameters:[{name:"numero",type:ve}],type:_e,jsSafe:!0},inteiro_para_cadeia:{id:ee,parameters:[{name:"numero",type:ve},{name:"base",type:ve}],type:be,jsSafe:!0},inteiro_para_caracter:{id:ee,parameters:[{name:"numero",type:ve}],type:ye,jsSafe:!0},inteiro_para_logico:{id:ee,parameters:[{name:"numero",type:ve}],type:_e,jsSafe:!0},inteiro_para_real:{id:ee,parameters:[{name:"numero",type:ve}],type:ge,jsSafe:!0},logico_para_cadeia:{id:ee,parameters:[{name:"teste",type:_e}],type:be,jsSafe:!0},logico_para_caracter:{id:ee,parameters:[{name:"teste",type:_e}],type:ye,jsSafe:!0},logico_para_inteiro:{id:ee,parameters:[{name:"teste",type:_e}],type:ve,jsSafe:!0},real_para_cadeia:{id:ee,parameters:[{name:"numero",type:ge}],type:be,jsSafe:!0},real_para_inteiro:{id:ee,parameters:[{name:"numero",type:ge}],type:ve,jsSafe:!0}}},(t=[{key:"resetar",value:function(){}},{key:"cadeia_e_caracter",value:function(e){return{value:1==e.length}}},{key:"cadeia_e_inteiro",value:function(e,t){if(e=e.toLowerCase(),2==t)return{value:/^[+-]?(0b)?[0-1]+$/.test(e)};if(10==t)return{value:/^[+-]?[0-9]+$/.test(e)};if(16==t)return{value:/^[+-]?(0x)?[0-9a-f]+$/.test(e)};throw"A base deve ser 2,10 ou 16"}},{key:"cadeia_e_logico",value:function(e){return{value:"verdadeiro"==e||"falso"==e}}},{key:"cadeia_e_real",value:function(e){return{value:/^[+-]?[0-9]+\.[0-9]+$/.test(e)}}},{key:"cadeia_para_caracter",value:function(e){if(this.cadeia_e_caracter(e).value)return{value:e.charAt(0)};throw"o valor '"+e+"' não pode ser convertido para caracter"}},{key:"cadeia_para_inteiro",value:function(e,t){if(this.cadeia_e_inteiro(e,t).value)return{value:parseInt(e,t)};throw"o valor '"+e+"' não pode ser convertido para inteiro"}},{key:"cadeia_para_logico",value:function(e){if("verdadeiro"==e)return{value:!0};if("falso"==e)return{value:!1};throw"o valor '"+e+"' não pode ser convertido para logico"}},{key:"cadeia_para_real",value:function(e){if(this.cadeia_e_real(e).value)return{value:parseFloat(e)};throw"o valor '"+e+"' não pode ser convertido para real"}},{key:"caracter_e_inteiro",value:function(e){return e=e.toLowerCase(),{value:/^[0-9]+$/.test(e)}}},{key:"caracter_e_logico",value:function(e){return{value:"s"==(e=e.toLowerCase())||"n"==e}}},{key:"caracter_para_cadeia",value:function(e){return{value:e}}},{key:"caracter_para_inteiro",value:function(e){if(this.caracter_e_inteiro(e).value)return{value:e.charCodeAt(0)-48};throw"o valor '"+e+"' não pode ser convertido para inteiro"}},{key:"caracter_para_logico",value:function(e){if("s"==(e=e.toLowerCase()))return{value:!0};if("n"==e)return{value:!1};throw"o valor '"+e+"' não pode ser convertido para logico"}},{key:"inteiro_e_caracter",value:function(e){return{value:e>=0&&e<=9}}},{key:"inteiro_para_cadeia",value:function(e,t){return{value:e.toString(t)}}},{key:"inteiro_para_caracter",value:function(e){if(this.inteiro_e_caracter(e).value)return{value:(""+e).charAt(0)};throw"o valor '"+e+"' não pode ser convertido para caracter"}},{key:"inteiro_para_logico",value:function(e){return{value:e>=1}}},{key:"inteiro_para_real",value:function(e){return{value:e}}},{key:"logico_para_cadeia",value:function(e){return{value:0==e?"verdadeiro":"falso"}}},{key:"logico_para_caracter",value:function(e){return{value:0==e?"s":"n"}}},{key:"logico_para_inteiro",value:function(e){return{value:0==e?1:0}}},{key:"real_para_cadeia",value:function(e){return{value:""+e}}},{key:"real_para_inteiro",value:function(e){return{value:Math.floor(e)}}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,xa(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Sa(e){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sa(e)}function Ta(e){var t=function(e){if("object"!=Sa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Sa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sa(t)?t:t+""}var ka=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.members={aguarde:{id:ee,parameters:[{name:"intervalo",type:ve}],type:de,jsSafe:!1},numero_elementos:{id:ee,parameters:[{name:"vetor",type:ke}],type:ve,jsSafe:!0},numero_colunas:{id:ee,parameters:[{name:"matriz",type:Ae}],type:ve,jsSafe:!0},numero_linhas:{id:ee,parameters:[{name:"matriz",type:Ae}],type:ve,jsSafe:!0},sorteia:{id:ee,parameters:[{name:"minimo",type:ve},{name:"maximo",type:ve}],type:ve,jsSafe:!0},tempo_decorrido:{id:ee,parameters:[],type:ve,jsSafe:!0}},this.resetar()},(t=[{key:"resetar",value:function(){this.time=(new Date).getTime()}},{key:"aguarde",value:function(e){return At(e),{state:5}}},{key:"numero_colunas",value:function(e){return{value:e[0].length}}},{key:"numero_linhas",value:function(e){return{value:e.length}}},{key:"numero_elementos",value:function(e){return{value:e.length}}},{key:"sorteia",value:function(e,t){return t+=1,{value:Math.floor(Math.random()*(t-e))+e}}},{key:"tempo_decorrido",value:function(){return{value:(new Date).getTime()-this.time}}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ta(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Aa(e){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aa(e)}function Ca(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(r),!0).forEach(function(t){La(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ca(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function La(e,t,r){return(t=Oa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oa(e){var t=function(e){if("object"!=Aa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Aa(t)?t:t+""}var ja=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastvmState=_t,this.lastvmTime=0,this.lastvmStep=!1,this.errosCount=0,this.execMesmoComErros=!1,this.mostrar_bytecode=!1,this.escrever_erros=!0,this.escrever_debug=!1,this.escrever_tempo=!0,this.div_saida=t,this.libraries={},this.promisefn=!1},t=[{key:"getErroMiddleCallback",value:function(e){var t=this;return function(a,i,n,o){var s=r(i.index,a),u=a.substring(a.lastIndexOf("\n",i.index)+1,i.index).replace(/\t/g,"    "),c=a.substring(i.index,a.indexOf("\n",i.index)),l=u.length,p="Linha "+s+":"+u;t.errosCount++,t.escrever_erros&&console.log(n);var h={row:s-1,column:l,columnFim:l+c.length,textprev:p,textnext:c,text:n,type:"error",myErrorType:o};e?e(h):(console.log("token index:"+i.index+" ... "+s+":"+l+" -> "+n),h.text&&console.log(h.text+"\n"),h.textprev&&h.textnext&&console.log(h.textprev+h.textnext+"\n"+" ".repeat(h.textprev.length)+"^\n\n"))}}},{key:"iniciarBibliotecas",value:function(e,t,r,a,i){if(this.libraries.Util=new ka,this.libraries.Calendario=new Kr,this.libraries.Matematica=new sa,this.libraries.Texto=new ga,this.libraries.Objetos=new da,this.libraries.Tipos=new Ea,this.libraries.Internet=new ia,e&&t&&r&&a&&i){var n=l();this.libraries.Teclado=new va(e),this.libraries.Graficos=new ta(e,t,r,a,i,this.libraries.Teclado,n),this.libraries.Mouse=new la(e)}}},{key:"executar_step",value:function(){!this.lastvmStep||this.lastvmState!=Et&&this.lastvmState!=Tt||this.promisefn()}},{key:"executar",value:function(e,t,r,a){if(!t||!t.success)throw"Tentou executar mas havia erros na compilação";var i=this;if(i.lastvmState==_t)return new Promise(function(n,s){i.lastvmStep=!!a;try{i._prepararMaquina(e,t,r)}catch(e){var u=e.stack||e.stacktrace||"";return console.log(u),void s("Erro ao preparar a máquina")}i.lastvmTime=performance.now(),i.promisefn=function(){!function(e,t){var r=e.executarVM();if(r==_t)t(e.div_saida.value);else if(5==r||6==r)vr("STATE_DELAY",e.promisefn,kt);else{if(r==xt||r==St)return"undefined"!=typeof window?("function"==typeof e.div_saida.focus&&e.div_saida.focus(),void o(e.div_saida)):void(r==xt&&e.div_saida.leia().then(function(t){e.div_saida.value+=t,e.notifyReceiveInput()}));if(r==Et)return;if(r==Tt)return void("function"==typeof e.onBreakpointPause&&e.onBreakpointPause());if(2!=r)throw"Estado desconhecido:"+r;vr("EXEC",e.promisefn,0)}}(i,n)},i.promisefn()})}},{key:"_prepararMaquina",value:function(e,t,a){!function(e,t,r,a,i,n,o,s){Ut=e,zt=t,Yt=n,Ht=r,Vt=a,qt="",$t=o,Wt=0,Ot=-1,er(),Ft=[],Nt=new Array(i),Qt=s;for(var u=0;u<Ut.length;u++)if("#globalInit"==Ut[u].name){jt=Ut[Pt=u].bytecode,Dt=0,It=new Array(100),Rt=0,Mt=new Array(Ut[Pt].varCount);break}}(t.compiler.functions,t.jsgenerator.functions,this.libraries,t.compiler.scopeList,t.compiler.globalCount,e,this.div_saida,this.getErroMiddleCallback(a)),this.mostrar_bytecode&&function(){try{document.getElementById("hidden").innerHTML=function(){for(var e="",t=9;t<Ut.length;t++){var a=Ut[t];e+=t+": "+a.name+"\n";for(var i=-1,n=0;n<a.bytecode.length;n++){var o=a.bytecode[n],s=r(cr(n,t),Yt);e+=s==i?"  \t"+n+":\t":s+"\t"+n+":\t",e+=bt(o);for(var u=0;u<gt(o);u++)n++,e+="\t"+a.bytecode[n];e+="\n",i=s}}return e}()}catch(t){var e=t.stack||t.stacktrace||"";console.log(e)}}()}},{key:"parar",value:function(){return 4==this.lastvmState||this.lastvmState==xt||2==this.lastvmState||5==this.lastvmState||6==this.lastvmState||this.lastvmState==Et||this.lastvmState==St||this.lastvmState==Tt?this.lastvmState==xt||this.lastvmState==Et||this.lastvmState==St||5==this.lastvmState||6==this.lastvmState||this.lastvmState==Tt?(this.lastvmState==Et&&yr("STATE_STEP"),5!=this.lastvmState&&6!=this.lastvmState||yr("STATE_DELAY"),this.executarParou("Programa interrompido pelo usuário."),!0):4==this.lastvmState||2==this.lastvmState?(this.lastvmState=3,!1):(console.log("estado inconsistente: lastvmState:'"+this.lastvmState+"'"),!1):3==this.lastvmState?(yr("EXEC"),this.executarParou("Programa interrompido pelo usuário."),!0):(console.log("botão estava em estado inconsistente: lastvmState:'"+this.lastvmState),!1)}},{key:"compilar",value:function(e,t,r){var a=performance.now();this.errosCount=0;var i,n=a,o=0,s=0,u=0,c=this.getErroMiddleCallback(t);try{n=performance.now();var l=new He(e,c),p=l.tokenize();if(o=Math.trunc(performance.now()-n),n=performance.now(),!this.execMesmoComErros&&this.errosCount>0)return{success:!1,tokenizer:l};var h=l.getRelevantTokens(),d=new kr(h,p,e,c).parse();if(s=Math.trunc(performance.now()-n),n=performance.now(),!this.execMesmoComErros&&this.errosCount>0)return{success:!1,tokenizer:l,tree:d};for(var f=Object.keys(this.libraries),m=0;m<f.length;m++)this.libraries[f[m]].resetar();var v=new qr(d,this.libraries,h,e,null,c);if(v.compile(),u=Math.trunc(performance.now()-n),n=performance.now(),!this.execMesmoComErros&&this.errosCount>0)return{success:!1,tokenizer:l,tree:d,compiler:v};var y={functions:!1};if(r&&wt())try{(y=new Xr(d,this.libraries,h,e,this.div_saida,c)).compile()}catch(e){var b=e.stack||e.stacktrace||"";console.log(b)}return{success:!0,tokenizer:l,tree:d,compiler:v,jsgenerator:y}}finally{i=(a=Math.trunc(performance.now()-a))-(o+s+u),this.escrever_debug&&console.log("Compilou: Tempo de execução:"+a+" milissegundos \n[token:"+o+" ms,tree:"+s+" ms,compiler:"+u+" ms, other:"+i+"]")}}},{key:"_step",value:function(){var e=lr(),t=e;do{this.lastvmState=fr(1),t=e,e=lr()}while((0==e||e==t)&&2==this.lastvmState)}},{key:"executarVM",value:function(){if(3==this.lastvmState)return this.executarParou("Programa interrompido pelo usuário."),this.lastvmState;var e=this.lastvmState==xt;return this.lastvmState=4,this.lastvmStep?(this._step(),e&&this._step(),2==this.lastvmState&&(this.lastvmState=Et)):this.lastvmState=fr(Xt),this.lastvmState==_t&&this.executarParou("Programa finalizado."),this.lastvmState}},{key:"notifyReceiveInput",value:function(){if(this.lastvmState!=xt)throw"Não estava esperando input";this.promisefn()}},{key:"notifyAsyncReturn",value:function(e){if(this.lastvmState!=St)throw"Não estava esperando async return";!function(e){void 0!==e?"boolean"==typeof e&&(e=e?0:1):e=null,It[Rt++]=e}(e),this.promisefn()}},{key:"executarParou",value:function(e){this.escrever_tempo&&Zt("\n\n"+e+" Tempo de execução:"+Math.trunc(performance.now()-this.lastvmTime)+" milissegundos"),this.promisefn=!1,this.lastvmState=_t,this.libraries.Graficos&&this.libraries.Graficos.encerrar_modo_grafico()}},{key:"getCurrentDeclaredVariables",value:function(){var e=function(e){if(!Vt)return!1;var t,r=!1,a=qe(Vt);try{for(a.s();!(t=a.n()).done;){var i=t.value;e>=i.startTokenIndex&&e<=i.endTokenIndex&&(r=i)}}catch(e){a.e(e)}finally{a.f()}return r}(lr());if(!e)return[];for(var t=[],r=!1,a=0;0!=(r=e.getVarByIndex(a,!1));){var i=pr(r.index);t.push(wa(wa({},r),{},{value:i})),a++}for(a=0;0!=(r=e.getVarByIndex(a,!0));){var n=hr(r.index);t.push(wa(wa({},r),{},{value:n})),a++}return t}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Oa(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Ia(e){var t=function(e){if("object"!=Da(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Da(t)?t:t+""}var Ra=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listaPalavras=["leia()"],this.listaPalavras=this.listaPalavras.concat(v),this.listaPalavras=this.listaPalavras.concat(y),this.identifierRegexps=[/[^\s\+\-\*\/%><!=&|^~;,.{}()\[\]:]+/],this.tokenizer=!1,this.librariesNames=Object.keys(t),this.libraries=t,this.incluas=!1,this.functions=!1,this.variaveisGlobais=!1,this.todasvariaveis=!1},(t=[{key:"setCompiler",value:function(e){e.tokenizer&&(this.tokenizer=e.tokenizer),e.compiler&&(this.incluas=e.compiler.incluas,this.functions=e.compiler.functions),e.tree&&(this.variaveisGlobais=e.tree.variaveis,this.todasvariaveis=[],Tr(e.tree.funcoes,this.todasvariaveis))}},{key:"getFunctionHTMLDoc",value:function(e,t){return console.log(e),["<b>",this.getFunctionDefinition(e.name,e,!0,!1,t),"</b>","<hr></hr>",e.comment||""].join("")}},{key:"getFunctionDefinition",value:function(e,t,r,a,i){if(i==le){var n=e;return r?n+" : "+De(t.type):n}if(i==ee){var o=e+"(";if(t.parameters)if(a)o+="$0";else for(var s=0;s<t.parameters.length;s++){s>0&&(o+=", ");var u=t.parameters[s];"object"===Da(u)&&(r&&(o+=De(u.type),o+=" "),o+=u.name)}return r?o+") : "+De(t.type):o+")"}}},{key:"getCompletions",value:function(e,t,r,a,i){var n=this,o=performance.now(),s=o,u=[],c=a,l=e.session.getLine(r.row),p=Math.trunc(performance.now()-s);s=performance.now();for(var h=0;h<this.listaPalavras.length;h++){var d=this.listaPalavras[h];u.push({value:d,caption:d,meta:"sugestão",tooltip:"",score:0})}var f=Math.trunc(performance.now()-s);s=performance.now();for(var m=0;m<this.librariesNames.length;m++){var v=this.librariesNames[m],y="inclua biblioteca "+v+" --\x3e "+v.toLowerCase().charAt(0);u.push({value:y,caption:y,meta:"Biblioteca",tooltip:"Incluir a biblioteca",score:0})}var b=Math.trunc(performance.now()-s);if(s=performance.now(),this.functions)for(var g=0;g<this.functions.length;g++){var _=this.functions[g];_.name.includes("$")||_.name.includes("#")||u.push({caption:_.name,snippet:this.getFunctionDefinition(_.name,_,!1,!0,ee),docHTML:this.getFunctionHTMLDoc(_,ee),meta:"Função",value:_.name,tooltip:"Função criada neste programa.",score:0})}var x=Math.trunc(performance.now()-s);if(s=performance.now(),this.variaveisGlobais)for(var E=0;E<this.variaveisGlobais.length;E++){var S=this.variaveisGlobais[E];u.push({caption:this.getFunctionDefinition(S.name,S,!0,!1,le),meta:"Variável Global",value:this.getFunctionDefinition(S.name,S,!1,!1,le),tooltip:"Variável Global neste programa.",score:0})}var T=Math.trunc(performance.now()-s);if(s=performance.now(),this.todasvariaveis)for(var k=0;k<this.todasvariaveis.length;k++){var A=this.todasvariaveis[k];u.push({caption:this.getFunctionDefinition(A.name,A,!0,!1,le),meta:"Variável Local",value:this.getFunctionDefinition(A.name,A,!1,!1,le),tooltip:"Variável Local neste programa.",score:0})}var C=Math.trunc(performance.now()-s);if(s=performance.now(),this.incluas){var w=l.lastIndexOf("."),L="";-1!=w&&(L=l.substring(0,w));for(var O=w+1==r.column,j=function(e){if(u.push({caption:n.librariesNames[e],meta:"Biblioteca",value:n.librariesNames[e],tooltip:"Nome de Biblioteca.",score:0}),O&&L.endsWith(n.librariesNames[e])){var t=n.libraries[n.librariesNames[e]];u=u.concat(Object.keys(t.members).map(function(r){return{caption:n.getFunctionDefinition(r,t.members[r],!0,!1,t.members[r].id),meta:n.librariesNames[e],value:n.getFunctionDefinition(r,t.members[r],!1,!1,t.members[r].id),tooltip:"Membro da Biblioteca "+n.librariesNames[e],score:1e5}}))}},D=0;D<this.librariesNames.length;D++)j(D);if(this.incluas)for(var I=function(){var e=n.incluas[R];if(u.push({caption:e.alias+" ("+e.name+")",meta:"Biblioteca",value:e.alias,tooltip:"Abreviação da Biblioteca "+e.name,score:0}),O&&L.endsWith(e.alias)){var t=n.libraries[e.name];u=u.concat(Object.keys(t.members).map(function(r){return{caption:n.getFunctionDefinition(r,t.members[r],!0,!1,t.members[r].id),meta:e.name,value:n.getFunctionDefinition(r,t.members[r],!1,!1,t.members[r].id),tooltip:"Membro da Biblioteca "+e.name,score:1e5}}))}},R=0;R<this.incluas.length;R++)I()}var M=Math.trunc(performance.now()-s);s=performance.now(),Math.trunc(performance.now()-o)>100&&console.log("Sugestoes Tempo de execução:"+Math.trunc(performance.now()-o)+" milissegundos ["+p+" "+f+" "+b+" "+T+" "+x+" "+C+" "+M+"]"),i(null,u.filter(function(e){return""==c||"string"==typeof e.value&&e.value.includes(c)}))}},{key:"getDocTooltip",value:function(e){e.docHTML||(e.docHTML=["<b>",e.caption,"</b>","<hr></hr>",e.tooltip].join(""))}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ia(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Ma(e){return Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ma(e)}function Pa(e){var t=function(e){if("object"!=Ma(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ma(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ma(t)?t:t+""}var Fa=window.ace;Fa.config.set("basePath","/lib/ace-src-min-noconflict/");var Na=Fa.require("ace/range").Range,Ba=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"initEditor",value:function(e,t,r,a,i){var n=this;this.fontSize=t,this.editor_divID=e,this.editor=Fa.edit(e,{minLines:10,fontSize:t+"pt",useSoftTabs:!1,navigateWithinSoftTabs:!1}),this.editor.setTheme("ace/theme/textmate"),this.editor.session.setMode("ace/mode/portugol"),this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableEmmet:!1,enableLiveAutocompletion:!0,scrollPastEnd:.5}),this.myPortugolCompleter=new Ra(r),this.aceLangTools=Fa.require("ace/ext/language_tools"),this.aceLangTools.setCompleters(),this.aceLangTools.addCompleter(this.myPortugolCompleter),this.editor.commands.on("afterExec",function(e){"insertstring"==e.command.name&&/^[\.]$/.test(e.args)&&n.editor.execCommand("startAutocomplete")}),this.editor.on("focus",i),this.editor.focus(),this.errosMarkers=[],this.errosAnnot=[]}},{key:"setAutoCompleterState",value:function(e){this.editor.setOptions({enableBasicAutocompletion:e,enableLiveAutocompletion:e})}},{key:"setDarkTheme",value:function(e){var t=e?"ace/theme/portugol_dark":"ace/theme/textmate";this.editor.setTheme(t)}},{key:"getValue",value:function(){return this.editor.getValue()}},{key:"setValue",value:function(e){this.editor.setValue(e,-1)}},{key:"focus",value:function(){this.editor.focus()}},{key:"setFontSize",value:function(e){this.fontSize=e,this.editor.setOptions({fontSize:e+"pt"})}},{key:"editorCommand",value:function(e){this.editor.onCommandKey({},0,e)}},{key:"undo",value:function(){this.editor.undo()}},{key:"redo",value:function(){this.editor.redo()}},{key:"autoComplete",value:function(){this.editor.execCommand("startAutocomplete")}},{key:"editorType",value:function(e){this.editor.onTextInput(e)}},{key:"updateAutoComplete",value:function(e){this.myPortugolCompleter.setCompiler(e)}},{key:"removeMarkers",value:function(){for(var e=0;e<this.errosMarkers.length;e++)this.editor.getSession().removeMarker(this.errosMarkers[e]);this.errosMarkers=[]}},{key:"removeAnnotations",value:function(){this.errosAnnot=[],this.editor.getSession().setAnnotations(this.errosAnnot)}},{key:"getAnnotations",value:function(e){for(var t=[],r=0;r<this.errosAnnot.length;r++)e.includes(this.errosAnnot[r].myErrorType)||"error"!=this.errosAnnot[r].type||t.push(this.errosAnnot[r]);return t}},{key:"errMarker",value:function(e){e&&(this.errosAnnot.push(e),this.editor.getSession().setAnnotations(this.errosAnnot),this.errosMarkers.push(this.editor.getSession().addMarker(new Na(e.row,0,e.row,e.columnFim),"ace_erroportugol-marker","screenLine")))}},{key:"highlight",value:function(e,t,r,a){var i=this;"undefined"!=typeof console&&console.debug("[Ace] Realçando linha:",e,"Col:",t,"-",r,"Scroll:",a);var n=this.editor.getSession().addMarker(new Na(e-1,0,e-1,r),"ace_realceportugol-marker","screenLine");this.errosMarkers.push(n),a&&this.editor.scrollToLine(e-1,!0,!0,function(){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(function(){i.editor.renderer.updateFull(!1)})})}},{key:"resizeEditor",value:function(e){document.getElementById(this.editor_divID).style.height=e+"px",this.editor.resize()}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Pa(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function Ua(e){var t=function(e){if("object"!=Va(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Va(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Va(t)?t:t+""}var za=function(){return e=function e(t,r,a,i,n,o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isMobile=n,this.hotbar=t,this.div_saida=r,this.errosSaida=a,this.div_tabelavariaveis=i,this.resizeEditorCallback=o,this.hotbar_currentY,this.hotbar_initialY,this.hotbar_clickY,this.hotbar_initialHeight=200,this.hotbar_minyOffset=40,this.hotbar_collapsedyOffset=80,this.hotbar_middleyOffset=120,this.hotbar_extendedyOffset=295,this.hotbar_yOffset=this.hotbar_collapsedyOffset,this.hotbar_active=!1,this.hotbar_textarea=!1,this.hotbar_isDragging=!1,this.hotbar.addEventListener("touchstart",function(e){s.hotbar_dragStart(e)},!1),this.hotbar.addEventListener("touchend",function(e){s.hotbar_dragEnd(e)},!1),this.hotbar.addEventListener("touchmove",function(e){s.hotbar_drag(e)},!1),this.hotbar.addEventListener("mousedown",function(e){s.hotbar_dragStart(e)},!1),window.addEventListener("mouseup",function(e){s.hotbar_dragEnd(e)},!1),window.addEventListener("mousemove",function(e){s.hotbar_drag(e)},!1),window.addEventListener("resize",function(e){s.resizeEditorToFitHotbar(e)})},t=[{key:"collapseUntil",value:function(e){"MIDDLE"==e&&this.hotbar_yOffset>this.hotbar_middleyOffset&&this.setHotbarPosition(this.hotbar_middleyOffset,!0),"EXTENDED"==e&&this.hotbar_yOffset>this.hotbar_extendedyOffset&&this.setHotbarPosition(this.hotbar_extendedyOffset,!0)}},{key:"extendUntil",value:function(e){"EXTENDED"==e&&this.hotbar_yOffset<this.hotbar_extendedyOffset&&this.setHotbarPosition(this.hotbar_extendedyOffset,!0)}},{key:"toggleHotbar",value:function(e){e?this.mostrarHotbar():(this.ocultarHotbar(),this.isMobile&&this.hotbar_yOffset>this.hotbar_middleyOffset&&this.setHotbarPosition(this.hotbar_middleyOffset,!0))}},{key:"mostrarHotbar",value:function(){this.hotbar_initialHeight=200,this.hotbar_minyOffset=40,this.hotbar_collapsedyOffset=80,this.hotbar_middleyOffset=120,this.hotbar_extendedyOffset=295,this.hotbar_yOffset=this.hotbar_collapsedyOffset,document.getElementById("hotbar_commands").style.display="block",document.getElementById("hotbar_keys").style.display="block",document.getElementById("check-mostrar-hotbar").checked=!0,this.setHotbarPosition(this.hotbar_middleyOffset)}},{key:"ocultarHotbar",value:function(){this.hotbar_initialHeight=120,this.hotbar_minyOffset=40,this.hotbar_collapsedyOffset=0,this.hotbar_middleyOffset=40,this.hotbar_extendedyOffset=215,this.hotbar_yOffset=0,document.getElementById("hotbar_commands").style.display="none",document.getElementById("hotbar_keys").style.display="none",document.getElementById("check-mostrar-hotbar").checked=!1,this.setHotbarPosition(this.hotbar_extendedyOffset)}},{key:"hotbar_dragStart",value:function(e){var t;t="touchstart"===e.type?-e.touches[0].clientY:-e.clientY,this.hotbar_clickY=t,this.hotbar_initialY=t-this.hotbar_yOffset,e.target===this.errosSaida||(e.target===this.div_saida?this.hotbar_textarea=!0:e.target!==this.hotbar&&"touchstart"===e.type||(this.hotbar_active=!0))}},{key:"hotbar_dragEnd",value:function(e){if("touchend"!==e.type){if(!this.hotbar_active)return;this.hotbar.style.cursor="grab"}this.hotbar_initialY=this.hotbar_currentY,this.hotbar_yOffset>this.hotbar_middleyOffset+30&&this.hotbar_yOffset<this.hotbar_extendedyOffset?this.setHotbarPosition(this.hotbar_extendedyOffset,!0):Math.abs(this.hotbar_yOffset-this.hotbar_middleyOffset)<30?this.setHotbarPosition(this.hotbar_middleyOffset,!0):Math.abs(this.hotbar_yOffset-this.hotbar_collapsedyOffset)<30?this.setHotbarPosition(this.hotbar_collapsedyOffset,!0):Math.abs(this.hotbar_yOffset-this.hotbar_minyOffset)<30?this.setHotbarPosition(this.hotbar_minyOffset,!0):this.resizeEditorToFitHotbar(),this.hotbar_active=!1,this.hotbar_textarea=!1,this.hotbar_isDragging=!1}},{key:"hotbar_drag",value:function(e){var t=0;if("touchmove"===e.type)t=-e.touches[0].clientY;else{if(!this.hotbar_active)return;t=-e.clientY,this.hotbar.style.cursor="grabbing"}this.hotbar_currentY,this.hotbar_currentY=t-this.hotbar_initialY;var r,a=Math.abs(this.hotbar_clickY-t);if(this.hotbar_active)e.cancelable&&e.preventDefault();else{if(this.hotbar_textarea&&(r=this.div_saida).scrollTop!==r.scrollHeight-r.offsetHeight&&0!==r.scrollTop)return this.hotbar_clickY=t,void(this.hotbar_initialY=t-this.hotbar_yOffset);if(a<20)return;this.hotbar_active=!0}this.setHotbarPosition(this.hotbar_currentY,!1,!0),this.hotbar_isDragging||this.resizeEditorMax(),this.hotbar_isDragging=!0}},{key:"setHotbarPosition",value:function(e,t,r){t?this.hotbar.classList.add("animate"):this.hotbar.classList.remove("animate");var i=a();this.hotbar_yOffset=Math.max(this.hotbar_minyOffset,e),this.hotbar_yOffset=Math.min(this.hotbar_yOffset,i.height-5),this.hotbar.style.bottom=this.hotbar_yOffset-this.hotbar_initialHeight+"px",r||this.resizeEditorToFitHotbar(!1)}},{key:"resizeEditorToFitHotbar",value:function(e){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.resizeEditorCallback(t-this.hotbar_yOffset);var r="none"!=document.getElementById("hotbar_commands").style.display?this.hotbar_yOffset-130:this.hotbar_yOffset-50;this.div_saida.style.height=r+"px",this.div_tabelavariaveis.style.height=r+"px"}},{key:"resizeEditorMax",value:function(){var e=a();this.resizeEditorCallback(e.height),this.div_saida.style.height=e.height+"px",this.div_tabelavariaveis.style.height=e.height+"px"}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ua(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Ha(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return qa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw n}}}}function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Ga(e){return Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ga(e)}var $a=document.getElementById("textAreaSaida"),Ya=document.getElementById("errorArea"),Ja=document.getElementById("divariaveis"),Xa=document.getElementById("myCanvasModal"),Wa=document.getElementById("myCanvasWindow"),Qa=document.getElementById("myCanvasWindowTitle"),Ka=document.getElementById("myCanvas"),Za=document.getElementById("myCanvasKeys"),ei=document.getElementById("hotbar"),ti=10,ri=l();ri&&(ti=9);var ai=!1,ii=new ja($a),ni=new Ba,oi=new za(ei,$a,Ya,Ja,ri,function(e){ni.resizeEditor(e)}),si=new Set,ui=[];function ci(e){if(e){if(e.isArray){if(1==e.arrayDim)return Ce(e.type);if(2==e.arrayDim)return we(e.type)}return e.type}}function li(e,t,r,a){if(a&&r&&"object"===Ga(r)){var i,n=Ha(a);try{var o=function(){var a=i.value,n=t+"."+a.name,o=r[a.name];if(a.structType||a.type&&"object"===Ga(a.type)&&a.type.txt){if(a.isArray){var s=function(t,r,i){if(r<=0)li(e,n+i,t,a.structDef);else if(Array.isArray(t))for(var o=0;o<t.length;o++)s(t[o],r-1,i+"["+o+"]")};s(o,a.arrayDim||1,"")}else li(e,n,o,a.structDef);return 1}e.push({name:n,type:ci(a),value:o})};for(n.s();!(i=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}}}function pi(){for(var e=ni.editor.session,t=0,r=ui;t<r.length;t++){var a=r[t];e.removeGutterDecoration(a-1,"ace_breakpoint")}ui=[];var i,n=Ha(si);try{for(n.s();!(i=n.n()).done;){var o=i.value;e.addGutterDecoration(o-1,"ace_breakpoint"),ui.push(o)}}catch(e){n.e(e)}finally{n.f()}}function hi(){var e=ii.getCurrentDeclaredVariables();if(e&&0!=e.length){var t,r=document.getElementById("check-tema-escuro").checked?"<div class='atecemporcento'><table class='tabelavariaveis dark-theme'><thead><tr><th>Variaveis</th></tr></thead><tbody>":"<div class='atecemporcento'><table class='tabelavariaveis'><thead><tr><th>Variaveis</th></tr></thead><tbody>",a=Ha(e);try{var i=function(){var e=t.value,a=[e];if(e.structType&&e.structDef)if(e.isArray){var i=function(t,r,n){if(r<=0)li(a,e.name+n,t,e.structDef);else if(Array.isArray(t))for(var o=0;o<t.length;o++)i(t[o],r-1,n+"["+o+"]")};i(e.value,e.arrayDim||1,"")}else li(a,e.name,e.value,e.structDef);for(var n=0,o=a;n<o.length;n++){var s=o[n],u="";(u=void 0===s.value||null===s.value?"":nr(s.type,s.value)).length>1e3&&(u=u.substring(0,1e3)+"..."),r+="<tr><td>"+s.name+":&emsp;"+u+"</td></tr>"}};for(a.s();!(t=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}r+="</tbody></table></div>",Ja.style.display="block",Ja.innerHTML=r}else di()}function di(){Ja.style.display="none"}function fi(){var e=document.getElementById("btn-run");e&&(ii.lastvmState==_t?e.value="Executar":ii.lastvmState==Tt||ii.lastvmState==Et?e.value="Continuar":e.value="Parar")}function mi(e){var t=document.getElementById("btn-stop");t&&(t.disabled=!e)}function vi(e,t){if(ii.lastvmState==Et||ii.lastvmState==Tt)return t?(oi.extendUntil("EXTENDED"),qi(),ii.lastvmStep=!0,requestAnimationFrame(function(){Gi(ni.getValue(),lr(),!0),ii.executar_step(),hi(),fi()}),void mi(!0)):(oi.extendUntil("EXTENDED"),qi(),ii.lastvmStep=!1,mi(!0),void(ii.promisefn&&ii.promisefn()));if(di(),ii.lastvmState==_t){"Executar"!=e.value&&(console.error("Botão em estado inconsistente(Deveria ser Executar):"+e.value),e.value),Yi(),qi(),oi.extendUntil("EXTENDED");var r=ni.getValue();try{ii.mostrar_bytecode=ai;var a=ii.compilar(r,$i,wt());if(ni.updateAutoComplete(a),!a.success)return console.log(ii.errosCount+" Erros na compilação:"),void mi(!1);Lt=si,Ot=-1,mi(!0),fi(),ii.executar(r,a,$i,t).then(function(e){t&&qi(["information"]),mi(!1),fi()}).catch(function(e){var t=e.stack||e.stacktrace||"";console.log(t),mi(!1),fi()})}catch(e){var i=e.stack||e.stacktrace||"";return console.log(i),$i({row:0,column:0,columnFim:0,textprev:"",textnext:"",text:"Erro ao compilar"+e,type:"error",myErrorType:"compilador"}),mi(!1),void fi()}}else"Parar"!=e.value&&"Continuar"!=e.value&&console.error("Botão em estado inconsistente(Deveria ser 'Parar' ou 'Continuar'):"+e.value),ii.parar()&&(mi(!1),fi())}function yi(){ii.lastvmState!=_t&&ii.parar()&&(mi(!1),fi())}function bi(e){"aleatorio"==e&&(e+=Math.floor(4*Math.random())),n("exemplos/"+e+".por",function(e){ni.setValue(e),qi()}),document.getElementById("modalExemplos").style.display="none"}function gi(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=function(e){var t=decodeURIComponent(e);if(!(t=(t=t.replace(/^https?:\/\//,"")).replace(/^www\./,"")).startsWith("github.com/"))throw new Error("URL inválida: deve começar com github.com/");var r=(t=t.substring(11)).split("/");if(r.length<3)throw new Error("URL do GitHub inválida: formato esperado github.com/user/repo/arquivo.por");var a,i=r[0],n=r[1],o="main";if("blob"===r[2]||"raw"===r[2]?(o=r[3]||"main",a=r.slice(4).join("/")):a=r.slice(2).join("/"),!a)throw new Error("Caminho do arquivo não encontrado na URL");return"https://raw.githubusercontent.com/".concat(i,"/").concat(n,"/").concat(o,"/").concat(a)}(e);t?(r=r.replace("/main/","/master/"),console.log("Tentando com branch master:",r)):console.log("Carregando arquivo do GitHub:",r),n(r,function(e){ni.setValue(e),qi(),document.getElementById("modalExemplos").style.display="none",console.log("Arquivo carregado com sucesso do GitHub")}).catch(function(a){console.error("Erro ao carregar arquivo do GitHub:",a),!t&&r.includes("/main/")?(console.log("Falhou com branch main, tentando com master..."),gi(e,!0)):alert("Erro ao carregar arquivo do GitHub. Verifique se a URL está correta e o arquivo existe.\n\nURL tentada: "+r)})}catch(e){console.error("Erro ao processar URL do GitHub:",e),alert("URL do GitHub inválida. Use o formato: github.com/user/repo/arquivo.por\n\nExemplos:\n- github.com/user/repo/exemplo.por\n- github.com/user/repo/blob/main/exemplo.por")}}function _i(){if(window.location.hash){var e=window.location.hash.substring(1);if((e=decodeURIComponent(e)).startsWith("code=")){var t=e.substring(5);if(t=t.trim())return console.log("Detectado parâmetro code na URL:",t),document.getElementById("modalExemplos").style.display="none",gi(t),!0}}return!1}function xi(e){oi.toggleHotbar(e)}function Ei(e){var t;t=ii.lastvmState==_t&&e.checked,Ct=t,e.checked=wt(),console.log("Modo: "+(wt()?"Modo Turbo":"Modo Normal"))}function Si(e){ni.setAutoCompleterState(e)}function Ti(e){ni.setDarkTheme(e),document.querySelectorAll(".saida").forEach(function(t){e?t.classList.add("dark-theme"):t.classList.remove("dark-theme")});var t=document.querySelector(".tabelavariaveis");t&&(e?t.classList.add("dark-theme"):t.classList.remove("dark-theme"))}function ki(e){e.className="clicou",vi(document.getElementById("btn-run"),!0),e.className="segurando"}function Ai(e){yr("STATE_STEP"),e.className=""}function Ci(e){e.preventDefault(),e.stopPropagation(),$a.focus()}function wi(e){e.preventDefault(),e.stopPropagation(),Ka.focus()}function Li(e){e.preventDefault(),e.stopPropagation(),ni.focus()}function Oi(e){ti=e,ni.setFontSize(ti),$a.style.fontSize=ti+"pt",Ya.style.fontSize=ti+"pt",Ja.style.fontSize=ti+"pt"}function ji(){Oi(ti+1)}function Di(){Oi(ti-1)}function Ii(){var e=ni.getValue();if(e=e.replace(/\r\n/g,"\n"),"undefined"!=typeof Android)Android.save(e);else{var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","programa.por"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}function Ri(){if("undefined"!=typeof Android)Android.load();else{var e=document.createElement("input");e.setAttribute("type","file"),e.style.display="none",document.body.appendChild(e),e.click(),e.addEventListener("change",function(){var t=e.files[0],r=new FileReader;r.onload=function(e){ni.setValue(this.result),qi()},r.readAsText(t),document.body.removeChild(e)})}}function Mi(e){ni.editorCommand(e)}function Pi(e){ni.editorType(e)}function Fi(e){ii.libraries.Teclado.tecladoDown({preventDefault:function(){},key:e},e)}function Ni(e){ii.libraries.Teclado.tecladoUp({preventDefault:function(){},key:e},e)}function Bi(e){if(ii.lastvmState==xt){var t=e.value;(t=t.replace(/\r\n/g,"\n")).substring(Gt().length,t.length).endsWith("\n")&&ii.notifyReceiveInput()}else ii.lastvmState!=_t&&($a.value=Gt())}function Vi(e){o(e)}function Ui(e){"undefined"!=typeof Android?Android.openWebsite(e):window.open(e,"_blank")}function zi(e){ni.setValue(e),qi()}function Hi(e){ii.lastvmState==St&&ii.notifyAsyncReturn(e)}function qi(e){if(console.log("limpando erros"),ni.removeMarkers(),Ya.innerHTML="",e){var t=ni.getAnnotations(e);ni.removeAnnotations();var r,a=Ha(t);try{for(a.s();!(r=a.n()).done;)$i(r.value)}catch(e){a.e(e)}finally{a.f()}}else ni.removeAnnotations()}function Gi(e,t,a){for(var i=r(t,e),n=e.substring(e.lastIndexOf("\n",t)+1,t),o=e.substring(t,e.indexOf("\n",t)),s=0,u=0;u<n.length;u++)"\t"===n[u]?s+=4-s%4:s++;var c=s+o.length;ni.highlight(i,s,c,a)}function $i(e){e&&(e.text&&(Ya.innerHTML+=d(e.text)+"\n"),e.textprev&&e.textnext&&(Ya.innerHTML+=d(e.textprev+e.textnext)+"\n",Ya.innerHTML+=" ".repeat(e.textprev.length)+"^\n\n"),ni.errMarker(e))}function Yi(){try{br("code",ni.getValue()),br("autoComplete",document.getElementById("check-auto-completar").checked),br("modoTurbo",document.getElementById("check-modo-turbo").checked),br("mostrarHotbar",document.getElementById("check-mostrar-hotbar").checked),br("tamanhoFonte",ti)}catch(t){var e=t.stack||t.stacktrace||"";console.log(e)}}ii.onBreakpointPause=function(){try{Gi(ni.getValue(),lr(),!0),hi(),fi()}catch(e){console.error("Erro ao realçar linha de breakpoint:",e)}},window.android_loaded=zi,window.android_async_return=Hi;var Ji=-1,Xi=-1;function Wi(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||ii.lastvmState!=_t&&ii.libraries.Graficos.telaCheia&&ii.libraries.Graficos.sair_modo_tela_cheia()}function Qi(e){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(e)}function Ki(e){var t=function(e){if("object"!=Qi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qi(t)?t:t+""}function Zi(e){var t="function"==typeof Map?new Map:void 0;return Zi=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(en())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,t);var i=new(e.bind.apply(e,a));return r&&tn(i,r.prototype),i}(e,arguments,rn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),tn(r,e)},Zi(e)}function en(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(en=function(){return!!e})()}function tn(e,t){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tn(e,t)}function rn(e){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rn(e)}ii.iniciarBibliotecas(Ka,Xa,Wa,Qa,Za),ni.initEditor("myEditor",ti,ii.libraries,ri,function(){ri?oi.collapseUntil("MIDDLE"):oi.collapseUntil("EXTENDED")}),ni.editor.on("guttermousedown",function(e){var t,r,a=e.row;if(null==a||isNaN(a)){var i,n=(null===(i=e.domEvent)||void 0===i?void 0:i.target)||e.target;if(n){var o=n.closest(".ace_gutter-cell");if(o){var s=o.textContent||o.innerText;a=parseInt(s)-1}}}var u,c=(null===(t=e.domEvent)||void 0===t?void 0:t.target)||e.target;c&&((null===(r=c.classList)||void 0===r?void 0:r.contains("ace_gutter-cell"))||null!==c.closest(".ace_gutter-cell"))&&a>=0&&!isNaN(a)&&(u=a+1,si.has(u)?si.delete(u):si.add(u),pi(),pi(),e.preventDefault())}),$a.style.fontSize=ti+"pt",Ya.style.fontSize=ti+"pt",Ja.style.fontSize=ti+"pt",setInterval(Yi,1e4),setInterval(function(){if(document.getElementById("check-auto-completar").checked)try{if(ii.lastvmState==_t){var e=ni.getValue(),t=e.length;if(Ji!=t)return void(Ji=t);if(Xi==t)return;Xi=t,qi(["sintatico","semantico","contexto"]);var r=ii.compilar(e,$i,!1);ni.updateAutoComplete(r)}}catch(e){var a=e.stack||e.stacktrace||"";console.log(a)}},1e3),window.onbeforeunload=function(){return""},window.addEventListener("hashchange",function(){_i()},!1),document.addEventListener&&(document.addEventListener("fullscreenchange",Wi,!1),document.addEventListener("mozfullscreenchange",Wi,!1),document.addEventListener("MSFullscreenChange",Wi,!1),document.addEventListener("webkitfullscreenchange",Wi,!1)),ri&&"undefined"==typeof Android&&ni.setValue('programa\n{\n\tfuncao inicio()\n\t{\n\t\t\n\t\tescreva("Baixe o aplicativo na play store:\\n")\n\t\tescreva("https://play.google.com/store/apps/details?id=br.erickweil.portugolweb \\n")\n\t\t\n\t}\n}\n'),_i()||function(){var e=function(){var e=gr("code"),t=gr("mostrarHotbar"),r=gr("autoComplete"),a=gr("modoTurbo"),i=gr("tamanhoFonte");return"string"==typeof r?(r=""+r=="true",document.getElementById("check-auto-completar").checked=r,Si(r)):document.getElementById("check-auto-completar").checked=!0,"string"==typeof a?(a=""+a=="true",document.getElementById("check-modo-turbo").checked=a,Ei(document.getElementById("check-modo-turbo"))):document.getElementById("check-modo-turbo").checked=wt(),"string"==typeof t?(t=""+t=="true",document.getElementById("check-mostrar-hotbar").checked=t,xi(t)):xi(ri),"string"==typeof i&&Oi(parseInt(""+i)),e}();e&&ni.setValue(e)}(),oi.resizeEditorToFitHotbar(),ri&&document.body.classList.add("mobile"),window.index=t,function(){if("undefined"!=typeof Android){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=rn(t),function(e,t){if(t&&("object"==Qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,en()?Reflect.construct(t,r||[],rn(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tn(e,t)}(t,e),r=t,(a=[{key:"read",value:function(){return console.log("read() Clipboard"),Promise.resolve([new ClipboardItem({"text/plain":Android.getClipboardData("text/plain")})])}},{key:"readText",value:function(){return console.log("readText() da Clipboard"),Promise.resolve(Android.getClipboardData("text/plain"))}},{key:"write",value:function(){return console.log("Tentou write() da Clipboard"),Promise.reject("Não implementado.")}},{key:"writeText",value:function(e){return console.log("writeText() da Clipboard"),Android.setClipboardData("text/plain",e),Promise.resolve()}}])&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ki(a.key),a)}}(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a}(Zi(EventTarget));window.navigator&&(window.navigator.clipboard=new e)}}()})();